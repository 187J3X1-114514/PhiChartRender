{"version":3,"mappings":"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","names":["isObject","obj","extend","target","src","key","ssrDocument","doc","ssrWindow","callback","id","win","getNodeName","element","isNodeName","isFunction","isString","isNumber","isBoolean","isUndefined","isNull","isDocument","isElement","isNode","isObjectLike","toElement","string","replacer","returnFalse","returnTrue","eachArray","i","eachObject","keys","JQ","arr","item","document","getDocument","createElement","tagName","appendChild","child","removeChild","getChildNodesArray","parent","tempParent","get$","$","selector","isDomReady","html","toCreate","childTag","parentTag","merge","first","second","value","unique","index","defaultValue","setAttribute","removeAttribute","className","name","classes","cls","nameIndex","$element","$target","result","newItem","existingItem","isPlainText","args","targets","each","isArrayLike","map","elements","getWindow","ret","isMatched","_","compare","childLength","childNodes","contents","content","extraChilds","$result","getComputedStyleValue","isBorderBox","getExtraWidth","direction","position","prev","prop","extra","getStyle","valueNumber","cssNumber","toKebabCase","getSuffix","get","k","v","set","children","childNode","dir","$elements","filter","$nodes","matched","weakMap","getAll","keyOriginal","toCamelCase","data","setAll","object","removeAll","removeMultiple","keysOriginal","stringTransform","rbrace","dataAttr","resultData","$selector","foundElements","container","contains","$targets","length","handleExtraWidth","includeMargin","multiply","getExtraWidthValue","funcIndex","clientProp","offsetProp","innerProp","isWindow","scrollProp","elementIndex","computedValue","suffix","numerical","funcName","margin","isSet","propName","firstElement","$firstElement","option","$excludes","CustomEvent","MduiCustomEvent","type","options","elementId","elementIdMap","handlersMap","getHandlers","getElementId","parse","parts","matcherFor","namespace","getMatchedHandlers","event","handler","func","add","useCapture","callFn","elem","e","proxyFn","remove","types","handlersInElement","removeEvent","fn","objectN","offsetParent","floatStyle","currentOffset","parentOffset","$offsetParent","left","pageYOffset","pageXOffset","top","currentTopString","currentLeftString","currentTop","currentLeft","currentPosition","one","origCallback","dataN","attributeName","removeData","nameItem","newContent","param","destructure","keyTmp","formCollections","form","comparePosition","a","b","nativeFormControls","getFormControlsValue","nodeName","originalValue","elementDisplay","defaultDisplay","display","detail","ajaxStart","ajaxError","ajaxComplete","globalOptions","isQueryStringData","appendQuery","query","isCrossDomain","url","window","isHttpStatusSuccess","status","mergeOptions","defaults","ajax","isCanceled","eventParams","successEventParams","method","mergedOptions","async","cache","password","contentType","global","isMethodQueryString","processData","trigger","resultGlobal","resultCustom","textStatus","reject","doReject","reason","xhr","username","dataType","xhrTimeout","isSuccess","responseData","ajaxSuccess","resolve","statusText","timeout","ajaxSetup","__decorate","decorators","desc","c","r","d","t","f","o","css","s","t$1","n","h","style","Icon","MduiElement","HasSlotController","variant","until","componentStyle","property","Avatar","ifDefined","styleMap","customElement","nothingTemplate","Badge","booleanConverter","DefinedController","undefinedLocalNames","promises","localName","localNames","scopeSelector","globalSelector","undefinedScopeElements","undefinedGlobalElements","watch","waitUntilFirstUpdate","proto","functionName","newValue","update","ScrollBehaviorMixin","ScrollBehaviorMixinClass","oldValue","oldListening","newListening","listening","behavior","behaviors","scrollTop","isScrollingUp","withPadding","propValue","uniqueId","observer","observeResize","co","entries","entry","LayoutManager","state","items","size","currState","currIndex","placement","prevState","right","bottom","lastState","aOrder","bOrder","layoutManagerMap","getLayout","LayoutItemBase","parentElement","BottomAppBar","_changedProperties","h$1","cc","names","tmp","out","reportValidityOverloads","formResets","FormController","host","control","formId","invoker","$button","button","attr","disabled","isButton","reportValidity","AnchorMixin","superclass","AnchorMixinClass","part","refDirective","tabIndex","svgTag","svgPaths","unsafeSVG","IconCheckBoxOutlineBlank","defaultMsg","isStrTagged","joinStringsAndValues","template","LOCALE_STATUS_EVENT","Deferred","loading","listeningLitLocalizeStatus","num","lerp","stop","amount","start","clampInt","min","max","input","clampDouble","sanitizeDegreesDouble","whitePoint","utils.whitePointD65","adaptingLuminance","utils.yFromLstar","Cam16","hue","chroma","j","q","m","DynamicColor","Variant","roleA","roleB","delta","polarity","stayTogether","version","stack","warnings","message","NOOP","ensurePrecision","maxSupportedPrecision","fragmentNameCache","VertexNameCache","setProgramName","stripVersion","generateIfTestSrc","maxIfs","gl","line","char","currentLine","nextLine","isEnd","WORKER_URL","base","array","str","location","text","styleEl","commandIndex","resolveYamlBinary","chomping","CHOMPING_CLIP","didReadContent","emptyLines","atMoreIndented","common","State$1","nullpos","fisheye","glitch"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,183],"sources":["../node_modules/.pnpm/ssr-window@4.0.2/node_modules/ssr-window/ssr-window.esm.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/helper.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/core.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/dom.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/$.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/merge.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/unique.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/get.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/add.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/attributes.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/each.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/addClass.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/insertBefore.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/before.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/each.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/map.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/map.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/clone.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/is.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/remove.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/append.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/appendTo.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/css.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/attr.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/children.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/slice.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/eq.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/utils/dir.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/parent.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/closest.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/data.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/data.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/empty.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/extend.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/filter.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/find.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/first.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/contains.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/has.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/hasClass.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/width.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/hide.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/val.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/index.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/last.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/next.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/not.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/event.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/off.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/extend.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/offsetParent.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/position.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/offset.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/on.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/one.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/prev.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/removeAttr.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/removeData.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/removeData.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/removeProp.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/replaceWith.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/replaceAll.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/param.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/form.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/serializeArray.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/serialize.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/serializeObject.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/show.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/siblings.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/toggle.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/methods/trigger.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/shared/ajax.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/ajax.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/ajax.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/ajaxSetup.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/ajaxSetup.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/contains.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/functions/data.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/data.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/each.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/extend.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/map.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/merge.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/param.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/removeData.js","../node_modules/.pnpm/@mdui+jq@3.0.1/node_modules/@mdui/jq/static/unique.js","../node_modules/.pnpm/tslib@2.6.3/node_modules/tslib/tslib.es6.mjs","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/css-tag.js","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/reactive-element.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/lit-html.js","../node_modules/.pnpm/lit-element@4.0.6/node_modules/lit-element/lit-element.js","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/property.js","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/state.js","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/base.js","../node_modules/.pnpm/@lit+reactive-element@2.0.4/node_modules/@lit/reactive-element/decorators/query-assigned-elements.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/if-defined.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directive.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/style-map.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/lit-styles/component-style.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/unsafe-html.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/unsafe-svg.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directive-helpers.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/async-directive.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/private-async-helpers.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/until.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/icon/style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/icon/index.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/avatar/style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/avatar/index.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/badge/style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/badge/index.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/helpers/decorator.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/controllers/defined.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/decorators/watch.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/mixins/scrollBehavior.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/helpers/uniqueId.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/helpers/observeResize.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/layout/helper.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/layout/layout-item-base.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/bottom-app-bar/style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/bottom-app-bar/index.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/ref.js","../node_modules/.pnpm/classcat@5.0.5/node_modules/classcat/index.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/controllers/form.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/mixins/anchor.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/class-map.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/button/style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/button-icon/style.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/live.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/icons/shared/style.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/icons/shared/svg-tag.js","../node_modules/.pnpm/@mdui+shared@1.0.5/node_modules/@mdui/shared/icons/check-box-outline-blank.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/chip/style.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/when.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/internal/str-tag.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/internal/default-msg.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/internal/locale-status-event.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/internal/deferred.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/internal/fnv1a64.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/init/runtime.js","../node_modules/.pnpm/@lit+localize@0.12.1/node_modules/@lit/localize/lit-localize.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/internal/localize.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/fab/style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/list/list-item-style.js","../node_modules/.pnpm/lit-html@3.1.4/node_modules/lit-html/directives/map.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/components/segmented-button/segmented-button-style.js","../node_modules/.pnpm/mdui@2.1.1/node_modules/mdui/functions/dialog.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/utils/math_utils.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/utils/color_utils.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/hct/viewing_conditions.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/hct/cam16.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/hct/hct_solver.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/hct/hct.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/contrast/contrast.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/dislike/dislike_analyzer.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/dynamiccolor/dynamic_color.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/scheme/variant.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/dynamiccolor/contrast_curve.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/dynamiccolor/tone_delta_pair.js","../node_modules/.pnpm/@material+material-color-utilities@0.2.7/node_modules/@material/material-color-utilities/dynamiccolor/material_dynamic_colors.js","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/utils/logging/deprecation.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/utils/misc/NOOP.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/scene/text/canvas/CanvasTextMetrics.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/scene/text-bitmap/DynamicBitmapFont.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/scene/text-bitmap/utils/getBitmapTextLayout.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/assets/loader/Loader.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/_virtual/checkImageBitmap.worker.mjs","../node_modules/.pnpm/pixi.js@8.2.1/node_modules/pixi.js/lib/_virtual/loadImageBitmap.worker.mjs","../node_modules/.pnpm/7z-wasm@1.1.0/node_modules/7z-wasm/7zz.es6.js","../node_modules/.pnpm/tslog@4.9.2/node_modules/tslog/dist/esm/runtime/browser/util.inspect.polyfil.js","../node_modules/.pnpm/tslog@4.9.2/node_modules/tslog/dist/esm/runtime/browser/index.js","../node_modules/.pnpm/tslog@4.9.2/node_modules/tslog/dist/esm/BaseLogger.js","../node_modules/.pnpm/@tauri-apps+plugin-log@2.0.0-beta.8/node_modules/@tauri-apps/plugin-log/dist-js/index.js","../src/core/file/zip.ts","../src/core/font.ts","../src/core/chart/convert/phiedit.ts","../node_modules/.pnpm/js-yaml@4.1.0/node_modules/js-yaml/dist/js-yaml.mjs","../src/core/prpr/effect/shader/presets/chromatic.glsl?raw","../src/core/prpr/effect/shader/presets/circle_blur.glsl?raw","../src/core/prpr/effect/shader/presets/fisheye.glsl?raw","../src/core/prpr/effect/shader/presets/glitch.glsl?raw"],"sourcesContent":["/**\n * SSR Window 4.0.2\n * Better handling for window object in SSR environment\n * https://github.com/nolimits4web/ssr-window\n *\n * Copyright 2021, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: December 13, 2021\n */\n/* eslint-disable no-param-reassign */\nfunction isObject(obj) {\n    return (obj !== null &&\n        typeof obj === 'object' &&\n        'constructor' in obj &&\n        obj.constructor === Object);\n}\nfunction extend(target = {}, src = {}) {\n    Object.keys(src).forEach((key) => {\n        if (typeof target[key] === 'undefined')\n            target[key] = src[key];\n        else if (isObject(src[key]) &&\n            isObject(target[key]) &&\n            Object.keys(src[key]).length > 0) {\n            extend(target[key], src[key]);\n        }\n    });\n}\n\nconst ssrDocument = {\n    body: {},\n    addEventListener() { },\n    removeEventListener() { },\n    activeElement: {\n        blur() { },\n        nodeName: '',\n    },\n    querySelector() {\n        return null;\n    },\n    querySelectorAll() {\n        return [];\n    },\n    getElementById() {\n        return null;\n    },\n    createEvent() {\n        return {\n            initEvent() { },\n        };\n    },\n    createElement() {\n        return {\n            children: [],\n            childNodes: [],\n            style: {},\n            setAttribute() { },\n            getElementsByTagName() {\n                return [];\n            },\n        };\n    },\n    createElementNS() {\n        return {};\n    },\n    importNode() {\n        return null;\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n};\nfunction getDocument() {\n    const doc = typeof document !== 'undefined' ? document : {};\n    extend(doc, ssrDocument);\n    return doc;\n}\n\nconst ssrWindow = {\n    document: ssrDocument,\n    navigator: {\n        userAgent: '',\n    },\n    location: {\n        hash: '',\n        host: '',\n        hostname: '',\n        href: '',\n        origin: '',\n        pathname: '',\n        protocol: '',\n        search: '',\n    },\n    history: {\n        replaceState() { },\n        pushState() { },\n        go() { },\n        back() { },\n    },\n    CustomEvent: function CustomEvent() {\n        return this;\n    },\n    addEventListener() { },\n    removeEventListener() { },\n    getComputedStyle() {\n        return {\n            getPropertyValue() {\n                return '';\n            },\n        };\n    },\n    Image() { },\n    Date() { },\n    screen: {},\n    setTimeout() { },\n    clearTimeout() { },\n    matchMedia() {\n        return {};\n    },\n    requestAnimationFrame(callback) {\n        if (typeof setTimeout === 'undefined') {\n            callback();\n            return null;\n        }\n        return setTimeout(callback, 0);\n    },\n    cancelAnimationFrame(id) {\n        if (typeof setTimeout === 'undefined') {\n            return;\n        }\n        clearTimeout(id);\n    },\n};\nfunction getWindow() {\n    const win = typeof window !== 'undefined' ? window : {};\n    extend(win, ssrWindow);\n    return win;\n}\n\nexport { extend, getDocument, getWindow, ssrDocument, ssrWindow };\n","/**\n * 获取指定元素的标签名（小写），不存在元素的返回空字符串\n * @param element\n */\nexport const getNodeName = (element) => {\n    return element?.nodeName.toLowerCase() ?? '';\n};\n/**\n * 判断元素是否为指定的标签名（不区分大小写）\n * @param element\n * @param name\n */\nexport const isNodeName = (element, name) => {\n    return element?.nodeName.toLowerCase() === name.toLowerCase();\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const isFunction = (target) => {\n    return typeof target === 'function';\n};\nexport const isString = (target) => {\n    return typeof target === 'string';\n};\nexport const isNumber = (target) => {\n    return typeof target === 'number';\n};\nexport const isBoolean = (target) => {\n    return typeof target === 'boolean';\n};\nexport const isUndefined = (target) => {\n    return typeof target === 'undefined';\n};\nexport const isNull = (target) => {\n    return target === null;\n};\nexport const isWindow = (target) => {\n    return typeof Window !== 'undefined' && target instanceof Window;\n};\nexport const isDocument = (target) => {\n    return typeof Document !== 'undefined' && target instanceof Document;\n};\nexport const isElement = (target) => {\n    return typeof Element !== 'undefined' && target instanceof Element;\n};\nexport const isNode = (target) => {\n    return typeof Node !== 'undefined' && target instanceof Node;\n};\nexport const isArrayLike = (target) => {\n    return (!isFunction(target) &&\n        !isWindow(target) &&\n        isNumber(target.length));\n};\nexport const isObjectLike = (target) => {\n    return typeof target === 'object' && target !== null;\n};\nexport const toElement = (target) => {\n    return isDocument(target) ? target.documentElement : target;\n};\n/**\n * 把用 - 分隔的字符串转为驼峰（如 box-sizing 转换为 boxSizing）\n * @param string\n */\nexport const toCamelCase = (string) => {\n    return string.replace(/-([a-z])/g, (_, letter) => {\n        return letter.toUpperCase();\n    });\n};\n/**\n * 把驼峰法转为用 - 分隔的字符串（如 boxSizing 转换为 box-sizing）\n * @param string\n */\nexport const toKebabCase = (string) => {\n    if (!string) {\n        return string;\n    }\n    return string\n        .replace(/^./, string[0].toLowerCase()) // 首字母转小写\n        .replace(/[A-Z]/g, (replacer) => {\n        return '-' + replacer.toLowerCase();\n    });\n};\n/**\n * 始终返回 false 的函数\n */\nexport const returnFalse = () => {\n    return false;\n};\n/**\n * 始终返回 true 的函数\n */\nexport const returnTrue = () => {\n    return true;\n};\n/**\n * 遍历数组\n * @param target\n * @param callback\n */\nexport const eachArray = (target, callback) => {\n    for (let i = 0; i < target.length; i += 1) {\n        if (callback.call(target[i], target[i], i) === false) {\n            return target;\n        }\n    }\n    return target;\n};\n/**\n * 遍历对象\n * @param target\n * @param callback\n */\nexport const eachObject = (target, callback) => {\n    const keys = Object.keys(target);\n    for (let i = 0; i < keys.length; i += 1) {\n        const key = keys[i];\n        if (callback.call(target[key], key, target[key]) === false) {\n            return target;\n        }\n    }\n    return target;\n};\n","import { eachArray } from './helper.js';\n/**\n * 为了使用模块扩充，这里不能使用默认导出\n */\nexport class JQ {\n    constructor(arr) {\n        this.length = 0;\n        if (!arr) {\n            return this;\n        }\n        eachArray(arr, (item, i) => {\n            this[i] = item;\n        });\n        this.length = arr.length;\n        return this;\n    }\n}\n","import { getDocument } from 'ssr-window';\n/**\n * DOM 是否已加载完成\n *\n * 在 Web Components 中操作组件外部的 DOM、或组件中的 slot 的 DOM 时，必须先判断 DOM 是否已加载完成。\n */\nexport const isDomReady = (document = getDocument()) => {\n    return /complete|interactive/.test(document.readyState);\n};\nexport const createElement = (tagName) => {\n    const document = getDocument();\n    return document.createElement(tagName);\n};\nexport const appendChild = (element, child) => {\n    return element.appendChild(child);\n};\nexport const removeChild = (element) => {\n    return element.parentNode ? element.parentNode.removeChild(element) : element;\n};\n/**\n * 获取子节点组成的数组\n * @param target\n * @param parent\n */\nexport const getChildNodesArray = (target, parent) => {\n    const tempParent = createElement(parent);\n    tempParent.innerHTML = target;\n    return [].slice.call(tempParent.childNodes);\n};\n","import { getDocument } from 'ssr-window';\nimport { JQ } from './shared/core.js';\nimport { getChildNodesArray, isDomReady } from './shared/dom.js';\nimport { isFunction, isNode, isString, isArrayLike, eachObject, } from './shared/helper.js';\nconst get$ = () => {\n    const $ = function (selector) {\n        if (!selector) {\n            return new JQ();\n        }\n        // JQ\n        if (selector instanceof JQ) {\n            return selector;\n        }\n        // function\n        if (isFunction(selector)) {\n            const document = getDocument();\n            if (isDomReady(document)) {\n                selector.call(document, $);\n            }\n            else {\n                document.addEventListener('DOMContentLoaded', () => selector.call(document, $), { once: true });\n            }\n            return new JQ([document]);\n        }\n        // String\n        if (isString(selector)) {\n            const html = selector.trim();\n            // 根据 HTML 字符串创建 JQ 对象\n            if (html.startsWith('<') && html.endsWith('>')) {\n                let toCreate = 'div';\n                const tags = {\n                    li: 'ul',\n                    tr: 'tbody',\n                    td: 'tr',\n                    th: 'tr',\n                    tbody: 'table',\n                    option: 'select',\n                };\n                eachObject(tags, (childTag, parentTag) => {\n                    if (html.startsWith(`<${childTag}`)) {\n                        toCreate = parentTag;\n                        return false;\n                    }\n                    return;\n                });\n                return new JQ(getChildNodesArray(html, toCreate));\n            }\n            const document = getDocument();\n            // 根据 CSS 选择器创建 JQ 对象\n            return new JQ(document.querySelectorAll(selector));\n        }\n        if (isArrayLike(selector) && !isNode(selector)) {\n            return new JQ(selector);\n        }\n        return new JQ([selector]);\n    };\n    $.fn = JQ.prototype;\n    return $;\n};\nexport const $ = get$();\n","import { eachArray } from '../shared/helper.js';\n/**\n * 把第二个数组的元素追加到第一个数组中，并返回合并后的数组\n * @param first 第一个数组\n * @param second 该数组的元素将被追加到第一个数组中\n * @example\n```js\nmerge( [ 0, 1, 2 ], [ 2, 3, 4 ] )\n// [ 0, 1, 2, 2, 3, 4 ]\n```\n */\nexport const merge = (first, second) => {\n    eachArray(second, (value) => {\n        first.push(value);\n    });\n    return first;\n};\n","/**\n * 过滤掉数组中的重复元素\n * @param arr 数组\n * @example\n```js\nunique([1, 2, 12, 3, 2, 1, 2, 1, 1]);\n// [1, 2, 12, 3]\n```\n */\nexport const unique = (arr) => {\n    return [...new Set(arr)];\n};\n","import { $ } from '../$.js';\n// eslint-disable-next-line\n$.fn.get = function (index) {\n    return index === undefined\n        ? [].slice.call(this)\n        : this[index >= 0 ? index : index + this.length];\n};\n","import { $ } from '../$.js';\nimport { merge } from '../functions/merge.js';\nimport { unique } from '../functions/unique.js';\nimport { JQ } from '../shared/core.js';\nimport './get.js';\n// eslint-disable-next-line\n$.fn.add = function (selector) {\n    return new JQ(unique(merge(this.get(), $(selector).get())));\n};\n","import { isNull } from './helper.js';\n/**\n * 获取属性值\n * @param element\n * @param key 属性键名\n * @param defaultValue 当 element.getAttribute 为 null 时，默认返回 undefined\n */\nexport const getAttribute = (element, key, defaultValue) => {\n    const value = element.getAttribute(key);\n    return isNull(value) ? defaultValue : value;\n};\n/**\n * 移除属性\n * @param element\n * @param key 属性键名\n */\nexport const removeAttribute = (element, key) => {\n    element.removeAttribute(key);\n};\n/**\n * 设置属性值\n * @param element\n * @param key 属性键名\n * @param value 值，若为 null，则调用 removeAttribute\n */\nexport const setAttribute = (element, key, value) => {\n    isNull(value)\n        ? removeAttribute(element, key)\n        : element.setAttribute(key, value);\n};\n","import { $ } from '../$.js';\nimport { eachArray } from '../shared/helper.js';\n// eslint-disable-next-line\n$.fn.each = function (callback) {\n    return eachArray(this, (value, index) => {\n        return callback.call(value, index, value);\n    });\n};\n","import { $ } from '../$.js';\nimport { getAttribute, setAttribute } from '../shared/attributes.js';\nimport { isElement, isFunction, eachArray } from '../shared/helper.js';\nimport './each.js';\neachArray(['add', 'remove', 'toggle'], (name) => {\n    $.fn[`${name}Class`] = function (className) {\n        if (name === 'remove' && !arguments.length) {\n            return this.each((_, element) => {\n                setAttribute(element, 'class', '');\n            });\n        }\n        return this.each((i, element) => {\n            if (!isElement(element)) {\n                return;\n            }\n            const classes = (isFunction(className)\n                ? className.call(element, i, getAttribute(element, 'class', ''))\n                : className)\n                .split(' ')\n                .filter((name) => name);\n            eachArray(classes, (cls) => {\n                element.classList[name](cls);\n            });\n        });\n    };\n});\n","import { $ } from '../$.js';\nimport { eachArray } from '../shared/helper.js';\nimport './each.js';\nimport './get.js';\neachArray(['insertBefore', 'insertAfter'], (name, nameIndex) => {\n    // eslint-disable-next-line\n    $.fn[name] = function (target) {\n        const $element = nameIndex ? $(this.get().reverse()) : this; // 顺序和 jQuery 保持一致\n        const $target = $(target);\n        const result = [];\n        $target.each((index, target) => {\n            if (!target.parentNode) {\n                return;\n            }\n            $element.each((_, element) => {\n                const newItem = index\n                    ? element.cloneNode(true)\n                    : element;\n                const existingItem = nameIndex ? target.nextSibling : target;\n                result.push(newItem);\n                target.parentNode.insertBefore(newItem, existingItem);\n            });\n        });\n        return $(nameIndex ? result.reverse() : result);\n    };\n});\n","import { $ } from '../$.js';\nimport { getChildNodesArray } from '../shared/dom.js';\nimport { isFunction, isString, isElement, eachArray, } from '../shared/helper.js';\nimport './each.js';\nimport './insertAfter.js';\nimport './insertBefore.js';\n/**\n * 是否不是 HTML 字符串（包裹在 <> 中）\n * @param target\n */\nconst isPlainText = (target) => {\n    return isString(target) && !(target.startsWith('<') && target.endsWith('>'));\n};\neachArray(['before', 'after'], (name, nameIndex) => {\n    // eslint-disable-next-line\n    $.fn[name] = function (...args) {\n        // after 方法，多个参数需要按参数顺序添加到元素后面，所以需要将参数顺序反向处理\n        if (nameIndex === 1) {\n            args = args.reverse();\n        }\n        return this.each((index, element) => {\n            const targets = isFunction(args[0])\n                ? [args[0].call(element, index, element.innerHTML)]\n                : args;\n            eachArray(targets, (target) => {\n                let $target;\n                if (isPlainText(target)) {\n                    $target = $(getChildNodesArray(target, 'div'));\n                }\n                else if (index && isElement(target)) {\n                    $target = $(target.cloneNode(true));\n                }\n                else {\n                    $target = $(target);\n                }\n                $target[nameIndex ? 'insertAfter' : 'insertBefore'](element);\n            });\n        });\n    };\n});\n","import { isArrayLike, eachArray, eachObject } from '../shared/helper.js';\n// eslint-disable-next-line\nexport function each(target, callback) {\n    // eachArray 回调函数是 value, key，这里的 each 函数是 key, value\n    return isArrayLike(target)\n        ? eachArray(target, (value, index) => {\n            return callback.call(value, index, value);\n        })\n        : eachObject(target, callback);\n}\n","import { getWindow } from 'ssr-window';\nimport { each } from './each.js';\n// eslint-disable-next-line\nexport function map(elements, callback) {\n    const window = getWindow();\n    let value;\n    const ret = [];\n    each(elements, (i, element) => {\n        value = callback.call(window, element, i);\n        if (value != null) {\n            ret.push(value);\n        }\n    });\n    return [].concat(...ret);\n}\n","import { $ } from '../$.js';\nimport { map } from '../functions/map.js';\nimport { JQ } from '../shared/core.js';\n// eslint-disable-next-line\n$.fn.map = function (callback) {\n    return new JQ(map(this, (element, i) => {\n        return callback.call(element, i, element);\n    }));\n};\n","import { $ } from '../$.js';\nimport './map.js';\n$.fn.clone = function () {\n    return this.map(function () {\n        return this.cloneNode(true);\n    });\n};\n","import { $ } from '../$.js';\nimport { isDocument, isFunction, isString, isWindow, } from '../shared/helper.js';\nimport './each.js';\n// eslint-disable-next-line\n$.fn.is = function (selector) {\n    let isMatched = false;\n    if (isFunction(selector)) {\n        this.each((index, element) => {\n            if (selector.call(element, index, element)) {\n                isMatched = true;\n            }\n        });\n        return isMatched;\n    }\n    if (isString(selector)) {\n        this.each((_, element) => {\n            if (isDocument(element) || isWindow(element)) {\n                return;\n            }\n            if (element.matches.call(element, selector)) {\n                isMatched = true;\n            }\n        });\n        return isMatched;\n    }\n    const $compareWith = $(selector);\n    this.each((_, element) => {\n        $compareWith.each((_, compare) => {\n            if (element === compare) {\n                isMatched = true;\n            }\n        });\n    });\n    return isMatched;\n};\n","import { $ } from '../$.js';\nimport { removeChild } from '../shared/dom.js';\nimport './each.js';\nimport './is.js';\n$.fn.remove = function (selector) {\n    return this.each((_, element) => {\n        if (!selector || $(element).is(selector)) {\n            removeChild(element);\n        }\n    });\n};\n","import { $ } from '../$.js';\nimport { createElement, appendChild, removeChild } from '../shared/dom.js';\nimport { isFunction, isString, eachArray } from '../shared/helper.js';\nimport './after.js';\nimport './before.js';\nimport './clone.js';\nimport './each.js';\nimport './map.js';\nimport './remove.js';\neachArray(['prepend', 'append'], (name, nameIndex) => {\n    // eslint-disable-next-line\n    $.fn[name] = function (...args) {\n        return this.each((index, element) => {\n            const childNodes = element.childNodes;\n            const childLength = childNodes.length;\n            const child = childLength\n                ? childNodes[nameIndex ? childLength - 1 : 0]\n                : createElement('div');\n            if (!childLength) {\n                appendChild(element, child);\n            }\n            let contents = isFunction(args[0])\n                ? [args[0].call(element, index, element.innerHTML)]\n                : args;\n            // 如果不是字符串，则仅第一个元素使用原始元素，其他的都克隆自第一个元素\n            if (index) {\n                contents = contents.map((content) => {\n                    return isString(content) ? content : $(content).clone();\n                });\n            }\n            $(child)[nameIndex ? 'after' : 'before'](...contents);\n            if (!childLength) {\n                removeChild(child);\n            }\n        });\n    };\n});\n","import { $ } from '../$.js';\nimport { createElement, appendChild } from '../shared/dom.js';\nimport { eachArray } from '../shared/helper.js';\nimport './insertAfter.js';\nimport './insertBefore.js';\nimport './map.js';\nimport './remove.js';\neachArray(['appendTo', 'prependTo'], (name, nameIndex) => {\n    // eslint-disable-next-line\n    $.fn[name] = function (target) {\n        const extraChilds = [];\n        const $target = $(target).map((_, element) => {\n            const childNodes = element.childNodes;\n            const childLength = childNodes.length;\n            if (childLength) {\n                return childNodes[nameIndex ? 0 : childLength - 1];\n            }\n            const child = createElement('div');\n            appendChild(element, child);\n            extraChilds.push(child);\n            return child;\n        });\n        const $result = this[nameIndex ? 'insertBefore' : 'insertAfter']($target);\n        $(extraChilds).remove();\n        return $result;\n    };\n});\n","import { getWindow } from 'ssr-window';\nimport { toKebabCase } from './helper.js';\n/**\n * 获取元素的样式值\n * @param element\n * @param name\n */\nexport const getComputedStyleValue = (element, name) => {\n    const window = getWindow();\n    return window.getComputedStyle(element).getPropertyValue(toKebabCase(name));\n};\n/**\n * 检查元素的 box-sizing 是否是 border-box\n * @param element\n */\nexport const isBorderBox = (element) => {\n    return getComputedStyleValue(element, 'box-sizing') === 'border-box';\n};\n/**\n * 获取元素的 padding, border, margin 宽度（两侧宽度的和，单位为px）\n * @param element\n * @param direction\n * @param extra\n */\nexport const getExtraWidth = (element, direction, extra) => {\n    const position = direction === 'width'\n        ? ['Left', 'Right']\n        : ['Top', 'Bottom'];\n    return [0, 1].reduce((prev, _, index) => {\n        let prop = extra + position[index];\n        if (extra === 'border') {\n            prop += 'Width';\n        }\n        return prev + parseFloat(getComputedStyleValue(element, prop) || '0');\n    }, 0);\n};\n/**\n * 获取元素的样式值，对 width 和 height 进行过处理\n * @param element\n * @param name\n */\nexport const getStyle = (element, name) => {\n    // width、height 属性使用 getComputedStyle 得到的值不准确，需要使用 getBoundingClientRect 获取\n    if (name === 'width' || name === 'height') {\n        const valueNumber = element.getBoundingClientRect()[name];\n        if (isBorderBox(element)) {\n            return `${valueNumber}px`;\n        }\n        return `${valueNumber -\n            getExtraWidth(element, name, 'border') -\n            getExtraWidth(element, name, 'padding')}px`;\n    }\n    return getComputedStyleValue(element, name);\n};\n/**\n * 数值单位的 CSS 属性\n */\nexport const cssNumber = [\n    'animation-iteration-count',\n    'column-count',\n    'fill-opacity',\n    'flex-grow',\n    'flex-shrink',\n    'font-weight',\n    'grid-area',\n    'grid-column',\n    'grid-column-end',\n    'grid-column-start',\n    'grid-row',\n    'grid-row-end',\n    'grid-row-start',\n    'line-height',\n    'opacity',\n    'order',\n    'orphans',\n    'widows',\n    'z-index',\n    'zoom',\n];\n","import { $ } from '../$.js';\nimport { getAttribute, setAttribute } from '../shared/attributes.js';\nimport { getStyle, cssNumber } from '../shared/css.js';\nimport { isElement, isFunction, isNumber, isUndefined, isObjectLike, eachArray, eachObject, toKebabCase, } from '../shared/helper.js';\nimport './each.js';\neachArray(['attr', 'prop', 'css'], (name, nameIndex) => {\n    // eslint-disable-next-line\n    const set = (element, key, value) => {\n        // 值为 undefined 时，不修改\n        if (isUndefined(value)) {\n            return;\n        }\n        // attr\n        if (nameIndex === 0) {\n            return setAttribute(element, key, value);\n        }\n        // prop\n        if (nameIndex === 1) {\n            // @ts-ignore\n            element[key] = value;\n            return;\n        }\n        // css\n        key = toKebabCase(key);\n        // 获取默认后缀。以 -- 开头的为 CSS 变量，不添加后缀；值为数值类型的不添加后缀\n        const getSuffix = () => key.startsWith('--') || cssNumber.includes(key) ? '' : 'px';\n        element.style.setProperty(key, isNumber(value) ? `${value}${getSuffix()}` : value);\n    };\n    // eslint-disable-next-line\n    const get = (element, key) => {\n        // attr\n        if (nameIndex === 0) {\n            // 属性不存在时，原生 getAttribute 方法返回 null，而 jquery 返回 undefined。这里和 jquery 保持一致\n            return getAttribute(element, key);\n        }\n        // prop\n        if (nameIndex === 1) {\n            // @ts-ignore\n            return element[key];\n        }\n        return getStyle(element, key);\n    };\n    $.fn[name] = function (key, \n    // eslint-disable-next-line\n    value) {\n        if (isObjectLike(key)) {\n            eachObject(key, (k, v) => {\n                // @ts-ignore\n                this[name](k, v);\n            });\n            return this;\n        }\n        if (arguments.length === 1) {\n            const element = this[0];\n            return isElement(element) ? get(element, key) : undefined;\n        }\n        return this.each((i, element) => {\n            set(element, key, isFunction(value) ? value.call(element, i, get(element, key)) : value);\n        });\n    };\n});\n","import { $ } from '../$.js';\nimport { unique } from '../functions/unique.js';\nimport { JQ } from '../shared/core.js';\nimport { isElement, eachArray } from '../shared/helper.js';\nimport './each.js';\nimport './is.js';\n$.fn.children = function (selector) {\n    const children = [];\n    this.each((_, element) => {\n        eachArray(element.childNodes, (childNode) => {\n            if (!isElement(childNode)) {\n                return;\n            }\n            if (!selector || $(childNode).is(selector)) {\n                children.push(childNode);\n            }\n        });\n    });\n    return new JQ(unique(children));\n};\n","import { $ } from '../$.js';\nimport { JQ } from '../shared/core.js';\n$.fn.slice = function (...args) {\n    return new JQ([].slice.apply(this, args));\n};\n","import { $ } from '../$.js';\nimport { JQ } from '../shared/core.js';\nimport './slice.js';\n$.fn.eq = function (index) {\n    const ret = index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n    return new JQ(ret);\n};\n","import { $ } from '../../$.js';\nimport { unique } from '../../functions/unique.js';\nimport { JQ } from '../../shared/core.js';\nimport { isElement } from '../../shared/helper.js';\nimport '../each.js';\nimport '../is.js';\nexport const dir = ($elements, nameIndex, node, \n// eslint-disable-next-line\nselector, filter) => {\n    const ret = [];\n    let target;\n    $elements.each((_, element) => {\n        target = element[node];\n        // 不能包含最顶层的 document 元素\n        while (target && isElement(target)) {\n            // prevUntil, nextUntil, parentsUntil\n            if (nameIndex === 2) {\n                if (selector && $(target).is(selector)) {\n                    break;\n                }\n                if (!filter || $(target).is(filter)) {\n                    ret.push(target);\n                }\n            }\n            // prev, next, parent\n            else if (nameIndex === 0) {\n                if (!selector || $(target).is(selector)) {\n                    ret.push(target);\n                }\n                break;\n            }\n            // prevAll, nextAll, parents\n            else {\n                if (!selector || $(target).is(selector)) {\n                    ret.push(target);\n                }\n            }\n            target = target[node];\n        }\n    });\n    return new JQ(unique(ret));\n};\n","import { $ } from '../$.js';\nimport { eachArray } from '../shared/helper.js';\nimport './get.js';\nimport { dir } from './utils/dir.js';\neachArray(['', 's', 'sUntil'], (name, nameIndex) => {\n    $.fn[`parent${name}`] = function (\n    // eslint-disable-next-line\n    selector, filter) {\n        // parents、parentsUntil 需要把元素的顺序反向处理，以便和 jQuery 的结果一致\n        const $nodes = !nameIndex ? this : $(this.get().reverse());\n        return dir($nodes, nameIndex, 'parentNode', selector, filter);\n    };\n});\n","import { $ } from '../$.js';\nimport { JQ } from '../shared/core.js';\nimport './eq.js';\nimport './is.js';\nimport './parents.js';\n// eslint-disable-next-line\n$.fn.closest = function (selector) {\n    if (this.is(selector)) {\n        return this;\n    }\n    const matched = [];\n    this.parents().each((_, element) => {\n        if ($(element).is(selector)) {\n            matched.push(element);\n            return false;\n        }\n    });\n    return new JQ(matched);\n};\n","import { eachObject, toCamelCase, eachArray, isUndefined, isString, } from './helper.js';\nconst weakMap = new WeakMap();\n/**\n * 获取元素上的所有数据\n * @param element\n */\nexport const getAll = (element) => {\n    return weakMap.get(element) ?? {};\n};\n/**\n * 获取元素上的的一个数据\n * @param element\n * @param keyOriginal\n */\nexport const get = (element, keyOriginal) => {\n    const data = getAll(element);\n    const key = toCamelCase(keyOriginal);\n    return key in data ? data[key] : undefined;\n};\n/**\n * 在上设置键值对数据\n * @param element\n * @param object\n */\nexport const setAll = (element, object) => {\n    const data = getAll(element);\n    eachObject(object, (keyOriginal, value) => {\n        data[toCamelCase(keyOriginal)] = value;\n    });\n    weakMap.set(element, data);\n};\n/**\n * 在元素上设置一个数据\n * @param element\n * @param keyOriginal\n * @param value\n */\nexport const set = (element, keyOriginal, value) => {\n    setAll(element, { [keyOriginal]: value });\n};\n/**\n * 移除元素上所有数据\n * @param element\n */\nexport const removeAll = (element) => {\n    weakMap.delete(element);\n};\n/**\n * 移除元素上的多个数据\n * @param element\n * @param keysOriginal 键名组成的数组\n */\nexport const removeMultiple = (element, keysOriginal) => {\n    const data = getAll(element);\n    eachArray(keysOriginal, (keyOriginal) => {\n        const key = toCamelCase(keyOriginal);\n        delete data[key];\n    });\n    weakMap.set(element, data);\n};\nconst rbrace = /^(?:{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n/**\n * dataset 中的值读取时进行转换\n * @param value\n */\nconst stringTransform = (value) => {\n    if (value === 'true') {\n        return true;\n    }\n    if (value === 'false') {\n        return false;\n    }\n    if (value === 'null') {\n        return null;\n    }\n    if (value === +value + '') {\n        return +value;\n    }\n    if (rbrace.test(value)) {\n        return JSON.parse(value);\n    }\n    return value;\n};\n// 若 value 不存在，则从 `dataset` 中获取值。key 需要自行转为驼峰法\nexport const dataAttr = (element, key, value) => {\n    if (isUndefined(value) && element.nodeType === 1) {\n        value = element.dataset[key];\n        if (isString(value)) {\n            try {\n                value = stringTransform(value);\n            }\n            catch (e) { }\n        }\n    }\n    return value;\n};\n","import { $ } from '../$.js';\nimport { dataAttr, get, getAll, set, setAll } from '../shared/data.js';\nimport { isUndefined, isObjectLike, eachObject, toCamelCase, } from '../shared/helper.js';\nimport './each.js';\n// eslint-disable-next-line\n$.fn.data = function (key, value) {\n    // 获取所有值\n    if (isUndefined(key)) {\n        if (!this.length) {\n            return undefined;\n        }\n        const element = this[0];\n        const resultData = getAll(element);\n        // window, document 上不存在 `dataset`\n        if (element.nodeType !== 1) {\n            return resultData;\n        }\n        // 若值未通过 data 方法设置，则从 `dataset` 中获取值。dataset 中读取的 key 会自动转为驼峰法\n        eachObject(element.dataset, (key) => {\n            resultData[key] = dataAttr(element, key, resultData[key]);\n        });\n        return resultData;\n    }\n    // 同时设置多个值\n    if (isObjectLike(key)) {\n        return this.each(function () {\n            setAll(this, key);\n        });\n    }\n    // value 传入了 undefined\n    if (arguments.length === 2 && isUndefined(value)) {\n        return this;\n    }\n    // 设置值\n    if (!isUndefined(value)) {\n        return this.each(function () {\n            set(this, key, value);\n        });\n    }\n    // 获取值\n    if (!this.length) {\n        return undefined;\n    }\n    return dataAttr(this[0], toCamelCase(key), get(this[0], key));\n};\n","import { $ } from '../$.js';\nimport './each.js';\n$.fn.empty = function () {\n    return this.each((_, element) => {\n        element.innerHTML = '';\n    });\n};\n","import { $ } from '../$.js';\nimport { eachObject } from '../shared/helper.js';\n$.fn.extend = function (obj) {\n    eachObject(obj, (prop, value) => {\n        // 在 JQ 对象上扩展方法时，需要自己添加 typescript 的类型定义\n        $.fn[prop] = value;\n    });\n    return this;\n};\n","import { $ } from '../$.js';\nimport { isFunction, isString } from '../shared/helper.js';\nimport './is.js';\nimport './map.js';\n// eslint-disable-next-line\n$.fn.filter = function (selector) {\n    if (isFunction(selector)) {\n        return this.map((index, element) => {\n            return selector.call(element, index, element) ? element : undefined;\n        });\n    }\n    if (isString(selector)) {\n        return this.map((_, element) => {\n            return $(element).is(selector) ? element : undefined;\n        });\n    }\n    const $selector = $(selector);\n    return this.map((_, element) => {\n        return $selector.get().includes(element) ? element : undefined;\n    });\n};\n","import { $ } from '../$.js';\nimport { merge } from '../functions/merge.js';\nimport { JQ } from '../shared/core.js';\nimport './each.js';\nimport './get.js';\n$.fn.find = function (selector) {\n    const foundElements = [];\n    this.each((_, element) => {\n        merge(foundElements, $(element.querySelectorAll(selector)).get());\n    });\n    return new JQ(foundElements);\n};\n","import { $ } from '../$.js';\nimport './eq.js';\n$.fn.first = function () {\n    return this.eq(0);\n};\n","import { toElement } from '../shared/helper.js';\n/**\n * 检查 container 元素内是否包含 contains 元素\n * @param container 父元素\n * @param contains 子元素\n * @example\n```js\ncontains( document, document.body ); // true\ncontains( document.getElementById('test'), document ); // false\ncontains( $('.container').get(0), $('.contains').get(0) ); // false\n```\n */\nexport const contains = (container, contains) => {\n    return container !== contains && toElement(container).contains(contains);\n};\n","import { $ } from '../$.js';\nimport { contains } from '../functions/contains.js';\nimport { isString } from '../shared/helper.js';\nimport './find.js';\nimport './map.js';\n$.fn.has = function (selector) {\n    const $targets = isString(selector) ? this.find(selector) : $(selector);\n    const { length } = $targets;\n    return this.map(function () {\n        for (let i = 0; i < length; i += 1) {\n            if (contains(this, $targets[i])) {\n                return this;\n            }\n        }\n        return;\n    });\n};\n","import { $ } from '../$.js';\n$.fn.hasClass = function (className) {\n    return this[0].classList.contains(className);\n};\n","import { getDocument } from 'ssr-window';\nimport { $ } from '../$.js';\nimport { isBorderBox, getExtraWidth, getComputedStyleValue, } from '../shared/css.js';\nimport { isBoolean, isString, isDocument, isFunction, isWindow, toElement, eachArray, } from '../shared/helper.js';\nimport './css.js';\nimport './each.js';\n/**\n * 值上面的 padding、border、margin 处理\n * @param element\n * @param name\n * @param value\n * @param funcIndex\n * @param includeMargin\n * @param multiply\n */\nconst handleExtraWidth = (element, name, value, funcIndex, includeMargin, multiply) => {\n    // 获取元素的 padding, border, margin 宽度（两侧宽度的和）\n    const getExtraWidthValue = (extra) => {\n        return (getExtraWidth(element, name.toLowerCase(), extra) *\n            multiply);\n    };\n    if (funcIndex === 2 && includeMargin) {\n        value += getExtraWidthValue('margin');\n    }\n    if (isBorderBox(element)) {\n        if (funcIndex === 0) {\n            value -= getExtraWidthValue('border');\n        }\n        if (funcIndex === 1) {\n            value -= getExtraWidthValue('border');\n            value -= getExtraWidthValue('padding');\n        }\n    }\n    else {\n        if (funcIndex === 0) {\n            value += getExtraWidthValue('padding');\n        }\n        if (funcIndex === 2) {\n            value += getExtraWidthValue('border');\n            value += getExtraWidthValue('padding');\n        }\n    }\n    return value;\n};\n/**\n * 获取元素的样式值\n * @param element\n * @param name\n * @param funcIndex 0: innerWidth, innerHeight; 1: width, height; 2: outerWidth, outerHeight\n * @param includeMargin\n */\nconst get = (element, name, funcIndex, includeMargin) => {\n    const document = getDocument();\n    const clientProp = `client${name}`;\n    const scrollProp = `scroll${name}`;\n    const offsetProp = `offset${name}`;\n    const innerProp = `inner${name}`;\n    // $(window).width()\n    if (isWindow(element)) {\n        // outerWidth, outerHeight 需要包含滚动条的宽度\n        return funcIndex === 2\n            ? element[innerProp]\n            : toElement(document)[clientProp];\n    }\n    // $(document).width()\n    if (isDocument(element)) {\n        const doc = toElement(element);\n        return Math.max(\n        // @ts-ignore\n        element.body[scrollProp], doc[scrollProp], \n        // @ts-ignore\n        element.body[offsetProp], doc[offsetProp], doc[clientProp]);\n    }\n    const value = parseFloat(getComputedStyleValue(element, name.toLowerCase()) || '0');\n    return handleExtraWidth(element, name, value, funcIndex, includeMargin, 1);\n};\n/**\n * 设置元素的样式值\n * @param element\n * @param elementIndex\n * @param name\n * @param funcIndex 0: innerWidth, innerHeight; 1: width, height; 2: outerWidth, outerHeight\n * @param includeMargin\n * @param value\n */\nconst set = (element, elementIndex, name, funcIndex, includeMargin, value) => {\n    let computedValue = isFunction(value)\n        ? value.call(element, elementIndex, get(element, name, funcIndex, includeMargin))\n        : value;\n    if (computedValue == null) {\n        return;\n    }\n    const $element = $(element);\n    const dimension = name.toLowerCase();\n    // 特殊的值，不需要计算 padding、border、margin\n    if (isString(computedValue) &&\n        ['auto', 'inherit', ''].includes(computedValue)) {\n        $element.css(dimension, computedValue);\n        return;\n    }\n    // 其他值保留原始单位。注意：如果不使用 px 作为单位，则算出的值一般是不准确的\n    const suffix = computedValue.toString().replace(/\\b[0-9.]*/, '');\n    const numerical = parseFloat(computedValue);\n    computedValue =\n        handleExtraWidth(element, name, numerical, funcIndex, includeMargin, -1) +\n            (suffix || 'px');\n    $element.css(dimension, computedValue);\n};\neachArray(['Width', 'Height'], (name) => {\n    eachArray([`inner${name}`, name.toLowerCase(), `outer${name}`], (funcName, funcIndex) => {\n        $.fn[funcName] = function (\n        // eslint-disable-next-line\n        margin, \n        // eslint-disable-next-line\n        value) {\n            // 是否是赋值操作\n            const isSet = arguments.length && (funcIndex < 2 || !isBoolean(margin));\n            const includeMargin = margin === true || value === true;\n            // 获取第一个元素的值\n            if (!isSet) {\n                return this.length\n                    ? get(this[0], name, funcIndex, includeMargin)\n                    : undefined;\n            }\n            // 设置每个元素的值\n            return this.each((index, element) => {\n                return set(element, index, name, funcIndex, includeMargin, margin);\n            });\n        };\n    });\n});\n","import { $ } from '../$.js';\nimport './each.js';\n$.fn.hide = function () {\n    return this.each((_, element) => {\n        element.style.display = 'none';\n    });\n};\n","import { $ } from '../$.js';\nimport { map } from '../functions/map.js';\nimport { isElement, isFunction, isUndefined, toElement, eachArray, } from '../shared/helper.js';\nimport './each.js';\nimport './find.js';\nimport './is.js';\neachArray(['val', 'html', 'text'], (name, nameIndex) => {\n    const props = ['value', 'innerHTML', 'textContent'];\n    const propName = props[nameIndex];\n    // eslint-disable-next-line\n    const get = ($elements) => {\n        // text() 获取所有元素的文本\n        if (nameIndex === 2) {\n            return map($elements, (element) => {\n                return toElement(element)[propName];\n            }).join('');\n        }\n        // 空集合时，val() 和 html() 返回 undefined\n        if (!$elements.length) {\n            return undefined;\n        }\n        // val() 和 html() 仅获取第一个元素的内容\n        const firstElement = $elements[0];\n        const $firstElement = $(firstElement);\n        // select multiple 返回数组\n        if (nameIndex === 0 && $firstElement.is('select[multiple]')) {\n            return map($firstElement.find('option:checked'), (element) => element.value);\n        }\n        // @ts-ignore\n        return firstElement[propName];\n    };\n    // eslint-disable-next-line\n    const set = (element, value) => {\n        // text() 和 html() 赋值为 undefined，则保持原内容不变\n        // val() 赋值为 undefined 则赋值为空\n        if (isUndefined(value)) {\n            if (nameIndex !== 0) {\n                return;\n            }\n            value = '';\n        }\n        if (nameIndex === 1 && isElement(value)) {\n            value = value.outerHTML;\n        }\n        // @ts-ignore\n        element[propName] = value;\n    };\n    // eslint-disable-next-line\n    $.fn[name] = function (value) {\n        // 获取值\n        if (!arguments.length) {\n            return get(this);\n        }\n        // 设置值\n        return this.each((i, element) => {\n            const $element = $(element);\n            const computedValue = isFunction(value)\n                ? value.call(element, i, get($element))\n                : value;\n            // value 是数组，则选中数组中的元素，反选不在数组中的元素\n            if (nameIndex === 0 && Array.isArray(computedValue)) {\n                // select[multiple]\n                if ($element.is('select[multiple]')) {\n                    map($element.find('option'), (option) => {\n                        return (option.selected = computedValue.includes(option.value));\n                    });\n                }\n                // 其他 checkbox, radio 等元素\n                else {\n                    element.checked = computedValue.includes(element.value);\n                }\n            }\n            else {\n                set(element, computedValue);\n            }\n        });\n    };\n});\n","import { $ } from '../$.js';\nimport { isString } from '../shared/helper.js';\nimport './children.js';\nimport './eq.js';\nimport './get.js';\nimport './parent.js';\n// eslint-disable-next-line\n$.fn.index = function (selector) {\n    if (!arguments.length) {\n        return this.eq(0).parent().children().get().indexOf(this[0]);\n    }\n    if (isString(selector)) {\n        return $(selector).get().indexOf(this[0]);\n    }\n    return this.get().indexOf($(selector)[0]);\n};\n","import { $ } from '../$.js';\nimport './eq.js';\n$.fn.last = function () {\n    return this.eq(-1);\n};\n","import { $ } from '../$.js';\nimport { eachArray } from '../shared/helper.js';\nimport { dir } from './utils/dir.js';\neachArray(['', 'All', 'Until'], (name, nameIndex) => {\n    $.fn[`next${name}`] = function (\n    // eslint-disable-next-line\n    selector, filter) {\n        return dir(this, nameIndex, 'nextElementSibling', selector, filter);\n    };\n});\n","import { $ } from '../$.js';\nimport './filter.js';\nimport './map.js';\nimport './index.js';\n// eslint-disable-next-line\n$.fn.not = function (selector) {\n    const $excludes = this.filter(selector);\n    return this.map((_, element) => {\n        return $excludes.index(element) > -1 ? undefined : element;\n    });\n};\n","import { getWindow } from 'ssr-window';\nimport { $ } from '../$.js';\nimport { contains } from '../functions/contains.js';\nimport '../methods/find.js';\nimport '../methods/get.js';\nimport { isObjectLike } from './helper.js';\n// @ts-ignore 直接使用 CustomEvent 在 ssr 环境下会报错\nconst CustomEvent = getWindow().CustomEvent;\n/**\n * 封装 CustomEvent，使之支持 data:事件监听参数，namespace:命名空间\n */\nexport class MduiCustomEvent extends CustomEvent {\n    constructor(type, options) {\n        super(type, options);\n        this.data = options.data;\n        this.namespace = options.namespace;\n    }\n}\nconst elementIdMap = new WeakMap();\nlet elementId = 1;\n/**\n * 为元素赋予一个唯一的ID\n */\nconst getElementId = (element) => {\n    if (!elementIdMap.has(element)) {\n        elementIdMap.set(element, ++elementId);\n    }\n    return elementIdMap.get(element);\n};\n// 存储唯一ID及事件处理\nconst handlersMap = new Map();\n/**\n * 获取元素上的事件处理器数组\n * @param element\n */\nconst getHandlers = (element) => {\n    const id = getElementId(element);\n    return handlersMap.get(id) || handlersMap.set(id, []).get(id);\n};\n/**\n * 解析事件名中的命名空间\n */\nexport const parse = (type) => {\n    const parts = type.split('.');\n    return {\n        type: parts[0],\n        namespace: parts.slice(1).sort().join(' '),\n    };\n};\n/**\n * 命名空间匹配规则\n */\nconst matcherFor = (namespace) => {\n    return new RegExp('(?:^| )' + namespace.replace(' ', ' .* ?') + '(?: |$)');\n};\n/**\n * 获取匹配的事件\n * @param element\n * @param type\n * @param func\n * @param selector\n */\nconst getMatchedHandlers = (element, type, func, selector) => {\n    const event = parse(type);\n    return getHandlers(element).filter((handler) => {\n        return (handler &&\n            (!event.type || handler.type === event.type) &&\n            (!event.namespace ||\n                matcherFor(event.namespace).test(handler.namespace)) &&\n            (!func || getElementId(handler.func) === getElementId(func)) &&\n            (!selector || handler.selector === selector));\n    });\n};\n/**\n * 添加事件监听\n * @param element\n * @param types\n * @param func\n * @param data\n * @param selector\n */\nexport const add = (element, types, func, data, selector) => {\n    // 传入 data.useCapture 来设置 useCapture: true\n    let useCapture = false;\n    if (isObjectLike(data) && data.useCapture) {\n        useCapture = true;\n    }\n    types.split(' ').forEach((type) => {\n        if (!type) {\n            return;\n        }\n        const event = parse(type);\n        const callFn = (e, elem) => {\n            const result = func.apply(elem, \n            // @ts-ignore\n            e.detail === null ? [e] : [e].concat(e.detail));\n            if (result === false) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n        const proxyFn = (e) => {\n            if (e.namespace && !matcherFor(e.namespace).test(event.namespace)) {\n                return;\n            }\n            e.data = data;\n            if (selector) {\n                // 事件代理\n                $(element)\n                    .find(selector)\n                    .get()\n                    .reverse()\n                    .forEach((elem) => {\n                    if (elem === e.target || contains(elem, e.target)) {\n                        callFn(e, elem);\n                    }\n                });\n            }\n            else {\n                // 不使用事件代理\n                callFn(e, element);\n            }\n        };\n        const handler = {\n            type: event.type,\n            namespace: event.namespace,\n            func,\n            selector,\n            id: getHandlers(element).length,\n            proxy: proxyFn,\n        };\n        getHandlers(element).push(handler);\n        // @ts-ignore\n        element.addEventListener(handler.type, proxyFn, useCapture);\n    });\n};\n/**\n * 移除事件监听\n * @param element\n * @param types\n * @param func\n * @param selector\n */\nexport const remove = (element, types, func, selector) => {\n    const handlersInElement = getHandlers(element);\n    const removeEvent = (handler) => {\n        delete handlersInElement[handler.id];\n        // @ts-ignore\n        element.removeEventListener(handler.type, handler.proxy, false);\n    };\n    if (!types) {\n        handlersInElement.forEach((handler) => {\n            removeEvent(handler);\n        });\n    }\n    else {\n        types.split(' ').forEach((type) => {\n            if (type) {\n                getMatchedHandlers(element, type, func, selector).forEach((handler) => {\n                    removeEvent(handler);\n                });\n            }\n        });\n    }\n};\n","import { $ } from '../$.js';\nimport { remove } from '../shared/event.js';\nimport { isFunction, isObjectLike, returnFalse, eachObject, } from '../shared/helper.js';\nimport './each.js';\n$.fn.off = function (types, \n// eslint-disable-next-line\nselector, \n// eslint-disable-next-line\ncallback) {\n    // types 是对象\n    if (isObjectLike(types)) {\n        eachObject(types, (type, fn) => {\n            // this.off('click', undefined, function () {})\n            // this.off('click', '.box', function () {})\n            this.off(type, selector, fn);\n        });\n        return this;\n    }\n    // selector 不存在\n    if (selector === false || isFunction(selector)) {\n        callback = selector;\n        selector = undefined;\n        // this.off('click', undefined, function () {})\n    }\n    // callback 传入 `false`，相当于 `return false`\n    if (callback === false) {\n        callback = returnFalse;\n    }\n    return this.each(function () {\n        remove(this, types, callback, selector);\n    });\n};\n","import { isUndefined, eachObject, eachArray } from '../shared/helper.js';\nexport function extend(target, ...objectN) {\n    eachArray(objectN, (object) => {\n        eachObject(object, (prop, value) => {\n            if (!isUndefined(value)) {\n                target[prop] = value;\n            }\n        });\n    });\n    return target;\n}\n","import { getDocument } from 'ssr-window';\nimport { $ } from '../$.js';\nimport './css.js';\nimport './map.js';\n/**\n * 返回最近的用于定位的父元素\n */\n$.fn.offsetParent = function () {\n    const document = getDocument();\n    return this.map(function () {\n        let offsetParent = this.offsetParent;\n        while (offsetParent && $(offsetParent).css('position') === 'static') {\n            offsetParent = offsetParent.offsetParent;\n        }\n        return offsetParent || document.documentElement;\n    });\n};\n","import { $ } from '../$.js';\nimport './css.js';\nimport './eq.js';\nimport './offset.js';\nimport './offsetParent.js';\nconst floatStyle = ($element, name) => {\n    return parseFloat($element.css(name));\n};\n// @ts-ignore\n$.fn.position = function () {\n    if (!this.length) {\n        return undefined;\n    }\n    const $element = this.eq(0);\n    let currentOffset;\n    let parentOffset = {\n        left: 0,\n        top: 0,\n    };\n    if ($element.css('position') === 'fixed') {\n        currentOffset = $element[0].getBoundingClientRect();\n    }\n    else {\n        currentOffset = $element.offset();\n        const $offsetParent = $element.offsetParent();\n        parentOffset = $offsetParent.offset();\n        parentOffset.top += floatStyle($offsetParent, 'border-top-width');\n        parentOffset.left += floatStyle($offsetParent, 'border-left-width');\n    }\n    return {\n        top: currentOffset.top - parentOffset.top - floatStyle($element, 'margin-top'),\n        left: currentOffset.left -\n            parentOffset.left -\n            floatStyle($element, 'margin-left'),\n    };\n};\n","import { $ } from '../$.js';\nimport { extend } from '../functions/extend.js';\nimport { isFunction } from '../shared/helper.js';\nimport './css.js';\nimport './each.js';\nimport './position.js';\nconst get = (element) => {\n    if (!element.getClientRects().length) {\n        return { top: 0, left: 0 };\n    }\n    const { top, left } = element.getBoundingClientRect();\n    const { pageYOffset, pageXOffset } = element.ownerDocument\n        .defaultView;\n    return {\n        top: top + pageYOffset,\n        left: left + pageXOffset,\n    };\n};\nconst set = (element, value, index) => {\n    const $element = $(element);\n    const position = $element.css('position');\n    if (position === 'static') {\n        $element.css('position', 'relative');\n    }\n    const currentOffset = get(element);\n    const currentTopString = $element.css('top');\n    const currentLeftString = $element.css('left');\n    let currentTop;\n    let currentLeft;\n    const calculatePosition = (position === 'absolute' || position === 'fixed') &&\n        (currentTopString + currentLeftString).includes('auto');\n    if (calculatePosition) {\n        const currentPosition = $element.position();\n        currentTop = currentPosition.top;\n        currentLeft = currentPosition.left;\n    }\n    else {\n        currentTop = parseFloat(currentTopString);\n        currentLeft = parseFloat(currentLeftString);\n    }\n    const computedValue = isFunction(value)\n        ? value.call(element, index, extend({}, currentOffset))\n        : value;\n    $element.css({\n        top: computedValue.top != null\n            ? computedValue.top - currentOffset.top + currentTop\n            : undefined,\n        left: computedValue.left != null\n            ? computedValue.left - currentOffset.left + currentLeft\n            : undefined,\n    });\n};\n// eslint-disable-next-line\n$.fn.offset = function (value) {\n    // 获取坐标\n    if (!arguments.length) {\n        if (!this.length) {\n            return undefined;\n        }\n        return get(this[0]);\n    }\n    // 设置坐标\n    return this.each(function (index) {\n        set(this, value, index);\n    });\n};\n","import { $ } from '../$.js';\nimport { add } from '../shared/event.js';\nimport { isString, isObjectLike, returnFalse, eachObject, } from '../shared/helper.js';\nimport './each.js';\nimport './off.js';\n$.fn.on = function (\n// eslint-disable-next-line\ntypes, \n// eslint-disable-next-line\nselector, \n// eslint-disable-next-line\ndata, \n// eslint-disable-next-line\ncallback, one) {\n    // types 可以是 type/func 对象\n    if (isObjectLike(types)) {\n        // (types-Object, selector, data)\n        if (!isString(selector)) {\n            // (types-Object, data)\n            data = data || selector;\n            selector = undefined;\n        }\n        eachObject(types, (type, fn) => {\n            // selector 和 data 都可能是 undefined\n            // @ts-ignore\n            this.on(type, selector, data, fn, one);\n        });\n        return this;\n    }\n    if (data == null && callback == null) {\n        // (types, fn)\n        callback = selector;\n        data = selector = undefined;\n    }\n    else if (callback == null) {\n        if (isString(selector)) {\n            // (types, selector, fn)\n            callback = data;\n            data = undefined;\n        }\n        else {\n            // (types, data, fn)\n            callback = data;\n            data = selector;\n            selector = undefined;\n        }\n    }\n    if (callback === false) {\n        callback = returnFalse;\n    }\n    else if (!callback) {\n        return this;\n    }\n    // $().one()\n    if (one) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const _this = this;\n        const origCallback = callback;\n        callback = function (event, ...dataN) {\n            _this.off(event.type, selector, callback);\n            return origCallback.call(this, event, ...dataN);\n        };\n    }\n    return this.each(function () {\n        add(this, types, callback, data, selector);\n    });\n};\n","import { $ } from '../$.js';\nimport './on.js';\n$.fn.one = function (types, \n// eslint-disable-next-line\nselector, \n// eslint-disable-next-line\ndata, \n// eslint-disable-next-line\ncallback) {\n    // @ts-ignore\n    return this.on(types, selector, data, callback, true);\n};\n","import { $ } from '../$.js';\nimport { eachArray } from '../shared/helper.js';\nimport './get.js';\nimport { dir } from './utils/dir.js';\neachArray(['', 'All', 'Until'], (name, nameIndex) => {\n    $.fn[`prev${name}`] = function (\n    // eslint-disable-next-line\n    selector, filter) {\n        // prevAll、prevUntil 需要把元素的顺序倒序处理，以便和 jQuery 的结果一致\n        const $nodes = !nameIndex ? this : $(this.get().reverse());\n        return dir($nodes, nameIndex, 'previousElementSibling', selector, filter);\n    };\n});\n","import { $ } from '../$.js';\nimport { removeAttribute } from '../shared/attributes.js';\nimport { eachArray } from '../shared/helper.js';\nimport './each.js';\n$.fn.removeAttr = function (attributeName) {\n    const names = attributeName.split(' ').filter((name) => name);\n    return this.each(function () {\n        eachArray(names, (name) => {\n            removeAttribute(this, name);\n        });\n    });\n};\n","import { removeAll, removeMultiple } from '../shared/data.js';\nimport { isUndefined, isString } from '../shared/helper.js';\n/**\n * 移除指定元素上存放的数据\n * @param element 存放数据的元素\n * @param name\n * 数据键名\n *\n * 若未指定键名，将移除元素上所有数据\n *\n * 多个键名可以用空格分隔，或者用数组表示多个键名\n  @example\n```js\n// 移除元素上键名为 name 的数据\nremoveData(document.body, 'name');\n```\n * @example\n```js\n// 移除元素上键名为 name1 和 name2 的数据\nremoveData(document.body, 'name1 name2');\n```\n * @example\n```js\n// 移除元素上键名为 name1 和 name2 的数据\nremoveData(document.body, ['name1', 'name2']);\n```\n * @example\n```js\n// 移除元素上所有数据\nremoveData(document.body);\n```\n */\nexport const removeData = (element, name) => {\n    if (isUndefined(name)) {\n        return removeAll(element);\n    }\n    const keys = isString(name)\n        ? name.split(' ').filter((nameItem) => nameItem)\n        : name;\n    removeMultiple(element, keys);\n};\n","import { $ } from '../$.js';\nimport { removeData } from '../functions/removeData.js';\nimport './each.js';\n$.fn.removeData = function (name) {\n    return this.each((_, element) => {\n        removeData(element, name);\n    });\n};\n","import { $ } from '../$.js';\nimport './each.js';\n$.fn.removeProp = function (name) {\n    return this.each((_, element) => {\n        try {\n            // @ts-ignore\n            delete element[name];\n        }\n        catch (e) { }\n    });\n};\n","import { $ } from '../$.js';\nimport { isFunction, isString } from '../shared/helper.js';\nimport './before.js';\nimport './clone.js';\nimport './each.js';\nimport './remove.js';\n// eslint-disable-next-line\n$.fn.replaceWith = function (newContent) {\n    this.each((index, element) => {\n        let content = newContent;\n        if (isFunction(content)) {\n            content = content.call(element, index, element.innerHTML);\n        }\n        else if (index && !isString(content)) {\n            content = $(content).clone();\n        }\n        $(element).before(content);\n    });\n    return this.remove();\n};\n","import { $ } from '../$.js';\nimport './clone.js';\nimport './get.js';\nimport './map.js';\nimport './replaceWith.js';\n// eslint-disable-next-line\n$.fn.replaceAll = function (target) {\n    return $(target).map((index, element) => {\n        $(element).replaceWith(index ? this.clone() : this);\n        return this.get();\n    });\n};\n","import { isObjectLike, eachObject, eachArray } from '../shared/helper.js';\n/**\n * 将数组或对象序列化，序列化后的字符串可作为 URL 查询字符串使用\n *\n * 若传入数组，则格式必须和 serializeArray 方法的返回值一样\n * @param obj 对象或数组\n * @example\n```js\nparam({ width: 1680, height: 1050 });\n// width=1680&height=1050\n```\n * @example\n```js\nparam({ foo: { one: 1, two: 2 }})\n// foo[one]=1&foo[two]=2\n```\n * @example\n```js\nparam({ids: [1, 2, 3]})\n// ids[]=1&ids[]=2&ids[]=3\n```\n * @example\n```js\nparam([\n  {\"name\":\"name\",\"value\":\"mdui\"},\n  {\"name\":\"password\",\"value\":\"123456\"}\n])\n// name=mdui&password=123456\n```\n */\nexport const param = (obj) => {\n    if (!isObjectLike(obj) && !Array.isArray(obj)) {\n        return '';\n    }\n    const args = [];\n    const destructure = (key, value) => {\n        let keyTmp;\n        if (isObjectLike(value)) {\n            eachObject(value, (i, v) => {\n                keyTmp = Array.isArray(value) && !isObjectLike(v) ? '' : i;\n                destructure(`${key}[${keyTmp}]`, v);\n            });\n        }\n        else {\n            keyTmp =\n                value == null || value === '' ? '=' : `=${encodeURIComponent(value)}`;\n            args.push(encodeURIComponent(key) + keyTmp);\n        }\n    };\n    if (Array.isArray(obj)) {\n        eachArray(obj, ({ name, value }) => {\n            return destructure(name, value);\n        });\n    }\n    else {\n        eachObject(obj, destructure);\n    }\n    return args.join('&');\n};\n","/**\n * 使用该 WeakMap 来存储指定表单中所有的 mdui 表单控件\n * 在每个表单控件的 hostConnected 中添加、hostDisconnected 中移除对应表单的 mdui 表单控件，\n * 然后在 getFormControls 方法中就能获取到表单中所有的 mdui 表单控件\n */\nexport const formCollections = new WeakMap();\n/**\n * 获取表单中的所有表单控件，包含原生和 mdui 表单控件\n * 原生的 `HTMLFormElement.elements` 仅返回原生表单控件，不包含 mdui 表单控件\n */\nexport const getFormControls = (form) => {\n    const nativeFormControls = [...form.elements];\n    const formControls = formCollections.get(form) || [];\n    const comparePosition = (a, b) => {\n        const position = a.compareDocumentPosition(b);\n        return position & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n    };\n    // 按 DOM 元素的顺序排序\n    return [...nativeFormControls, ...formControls].sort(comparePosition);\n};\n","import { $ } from '../$.js';\nimport { getFormControls } from '../shared/form.js';\nimport './each.js';\nimport './val.js';\n/**\n * 表单控件的 name、value 组成的数组。其中 value 为原始值\n */\nexport const getFormControlsValue = ($elements) => {\n    const result = [];\n    $elements.each((_, element) => {\n        const elements = (element instanceof HTMLFormElement ? getFormControls(element) : [element]);\n        $(elements).each((_, element) => {\n            const $element = $(element);\n            const type = element.type;\n            const nodeName = element.nodeName.toLowerCase();\n            if (nodeName !== 'fieldset' &&\n                element.name &&\n                !element.disabled &&\n                [\n                    'input',\n                    'select',\n                    'textarea',\n                    'keygen',\n                    'mdui-checkbox',\n                    'mdui-radio-group',\n                    'mdui-switch',\n                    'mdui-text-field',\n                    'mdui-select',\n                    'mdui-slider',\n                    'mdui-range-slider',\n                    'mdui-segmented-button-group',\n                ].includes(nodeName) &&\n                !['submit', 'button', 'image', 'reset', 'file'].includes(type) &&\n                (!['radio', 'checkbox'].includes(type) || element.checked) &&\n                (!['mdui-checkbox', 'mdui-switch'].includes(nodeName) ||\n                    element.checked)) {\n                result.push({\n                    name: element.name,\n                    value: $element.val(),\n                });\n            }\n        });\n    });\n    return result;\n};\n/**\n * 将表单元素的值组合成键值对数组\n *\n * 包含哪些表单元素，参考：https://www.w3.org/TR/html401/interact/forms.html#h-17.13.2\n * 其中不包含 type=\"submit\"，因为表单不是通过点击按钮提交的\n *\n * @returns {Array}\n */\n$.fn.serializeArray = function () {\n    return getFormControlsValue(this)\n        .map((element) => {\n        if (!Array.isArray(element.value)) {\n            return element;\n        }\n        return element.value.map((value) => ({\n            name: element.name,\n            value,\n        }));\n    })\n        .flat();\n};\n","import { $ } from '../$.js';\nimport { param } from '../functions/param.js';\nimport './serializeArray.js';\n$.fn.serialize = function () {\n    return param(this.serializeArray());\n};\n","import { $ } from '../$.js';\nimport { getFormControlsValue } from './serializeArray.js';\n/**\n * 将表单元素的值转换为对象\n */\n$.fn.serializeObject = function () {\n    const result = {};\n    getFormControlsValue(this).forEach((element) => {\n        const { name, value } = element;\n        if (!result.hasOwnProperty(name)) {\n            result[name] = value;\n        }\n        else {\n            const originalValue = result[name];\n            if (!Array.isArray(originalValue)) {\n                result[name] = [originalValue];\n            }\n            // value 可能是数组，合并到原有数组中\n            if (Array.isArray(value)) {\n                result[name].push(...value);\n            }\n            else {\n                result[name].push(value);\n            }\n        }\n    });\n    return result;\n};\n","import { getDocument } from 'ssr-window';\nimport { $ } from '../$.js';\nimport { getStyle } from '../shared/css.js';\nimport { createElement, appendChild, removeChild } from '../shared/dom.js';\nimport './each.js';\nconst elementDisplay = {};\n/**\n * 获取元素的初始 display 值，用于 .show() 方法\n * @param nodeName\n */\nconst defaultDisplay = (nodeName) => {\n    const document = getDocument();\n    let element;\n    let display;\n    if (!elementDisplay[nodeName]) {\n        element = createElement(nodeName);\n        appendChild(document.body, element);\n        display = getStyle(element, 'display');\n        removeChild(element);\n        if (display === 'none') {\n            display = 'block';\n        }\n        elementDisplay[nodeName] = display;\n    }\n    return elementDisplay[nodeName];\n};\n/**\n * 显示指定元素\n * @returns {JQ}\n */\n$.fn.show = function () {\n    return this.each((_, element) => {\n        if (element.style.display === 'none') {\n            element.style.display = '';\n        }\n        if (getStyle(element, 'display') === 'none') {\n            element.style.display = defaultDisplay(element.nodeName);\n        }\n    });\n};\n","import { $ } from '../$.js';\nimport './add.js';\nimport './nextAll.js';\nimport './prevAll.js';\n/**\n * 取得同辈元素的集合\n * @param selector {String=}\n * @returns {JQ}\n */\n$.fn.siblings = function (selector) {\n    return this.prevAll(selector).add(this.nextAll(selector));\n};\n","import { $ } from '../$.js';\nimport { getStyle } from '../shared/css.js';\nimport './each.js';\nimport './hide.js';\nimport './show.js';\n/**\n * 切换元素的显示状态\n */\n$.fn.toggle = function () {\n    return this.each((_, element) => {\n        getStyle(element, 'display') === 'none'\n            ? $(element).show()\n            : $(element).hide();\n    });\n};\n","import { $ } from '../$.js';\nimport { parse, MduiCustomEvent } from '../shared/event.js';\nimport './each.js';\n$.fn.trigger = function (name, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndetail = null, options) {\n    const { type, namespace } = parse(name);\n    const event = new MduiCustomEvent(type, {\n        detail,\n        data: null,\n        namespace,\n        bubbles: true,\n        cancelable: false,\n        composed: true,\n        ...options,\n    });\n    return this.each((_, element) => {\n        element.dispatchEvent(event);\n    });\n};\n","import { getWindow } from 'ssr-window';\nimport { extend } from '../functions/extend.js';\nimport { eachObject, isUndefined } from './helper.js';\n// 全局事件名\nexport const ajaxStart = 'ajaxStart';\nexport const ajaxSuccess = 'ajaxSuccess';\nexport const ajaxError = 'ajaxError';\nexport const ajaxComplete = 'ajaxComplete';\n// 全局配置参数\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const globalOptions = {};\n/**\n * 判断此请求方法是否通过查询字符串提交参数\n * @param method 请求方法，大写\n */\nexport const isQueryStringData = (method) => {\n    return ['GET', 'HEAD'].includes(method);\n};\n/**\n * 添加参数到 URL 上，且 URL 中不存在 ? 时，自动把第一个 & 替换为 ?\n * @param url\n * @param query\n */\nexport const appendQuery = (url, query) => {\n    return `${url}&${query}`.replace(/[&?]{1,2}/, '?');\n};\n/**\n * url 是否跨域\n * @param url\n */\nexport const isCrossDomain = (url) => {\n    const window = getWindow();\n    return (/^([\\w-]+:)?\\/\\/([^/]+)/.test(url) && RegExp.$2 !== window.location.host);\n};\n/**\n * HTTP 状态码是否表示请求成功\n * @param status\n */\nexport const isHttpStatusSuccess = (status) => {\n    return (status >= 200 && status < 300) || [0, 304].includes(status);\n};\n/**\n * 合并请求参数，参数优先级：options > globalOptions > defaults\n * @param options\n */\nexport const mergeOptions = (options) => {\n    // 默认参数\n    const defaults = {\n        url: '',\n        method: 'GET',\n        data: '',\n        processData: true,\n        async: true,\n        cache: true,\n        username: '',\n        password: '',\n        headers: {},\n        xhrFields: {},\n        statusCode: {},\n        dataType: '',\n        contentType: 'application/x-www-form-urlencoded',\n        timeout: 0,\n        global: true,\n    };\n    // globalOptions 中的回调函数不合并\n    eachObject(globalOptions, (key, value) => {\n        const callbacks = [\n            'beforeSend',\n            'success',\n            'error',\n            'complete',\n            'statusCode',\n        ];\n        if (!callbacks.includes(key) && !isUndefined(value)) {\n            defaults[key] = value;\n        }\n    });\n    return extend({}, defaults, options);\n};\n","import { getDocument, getWindow } from 'ssr-window';\nimport { $ } from '../$.js';\nimport '../methods/trigger.js';\nimport { globalOptions, ajaxStart, ajaxSuccess, ajaxError, ajaxComplete, isQueryStringData, isCrossDomain, isHttpStatusSuccess, appendQuery, mergeOptions, } from '../shared/ajax.js';\nimport { isString, isUndefined, eachObject, eachArray, } from '../shared/helper.js';\nimport { param } from './param.js';\n/**\n * 发送 ajax 请求\n * @param options\n * @example\n```js\najax({\n  method: \"POST\",\n  url: \"some.php\",\n  data: { name: \"John\", location: \"Boston\" }\n}).then(function( msg ) {\n  alert( \"Data Saved: \" + msg );\n});\n```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const ajax = (options) => {\n    const document = getDocument();\n    const window = getWindow();\n    // 是否已取消请求\n    let isCanceled = false;\n    // ajaxStart、ajaxError、ajaxComplete 事件参数\n    // @ts-ignore\n    const eventParams = {};\n    // ajaxSuccess 事件参数\n    // @ts-ignore\n    const successEventParams = {};\n    // 参数合并\n    const mergedOptions = mergeOptions(options);\n    const method = mergedOptions.method.toUpperCase();\n    let { data, url } = mergedOptions;\n    url = url || window.location.toString();\n    const { processData, async, cache, username, password, headers, xhrFields, statusCode, dataType, contentType, timeout, global, } = mergedOptions;\n    // 需要发送的数据\n    // GET/HEAD 请求和 processData 为 true 时，转换为查询字符串格式，特殊格式不转换\n    const isMethodQueryString = isQueryStringData(method);\n    if (data &&\n        (isMethodQueryString || processData) &&\n        !isString(data) &&\n        !(data instanceof ArrayBuffer) &&\n        !(data instanceof Blob) &&\n        !(data instanceof Document) &&\n        !(data instanceof FormData)) {\n        data = param(data);\n    }\n    // 对于 GET、HEAD 类型的请求，把 data 数据添加到 URL 中\n    if (data && isMethodQueryString) {\n        // 查询字符串拼接到 URL 中\n        url = appendQuery(url, data);\n        data = null;\n    }\n    /**\n     * 触发事件和回调函数\n     * @param event\n     * @param callback\n     * @param args\n     */\n    const trigger = (event, callback, ...args) => {\n        // 触发全局事件\n        if (global) {\n            $(document).trigger(event, callback === 'success' ? successEventParams : eventParams);\n        }\n        // 触发 ajax 回调和事件\n        let resultGlobal;\n        let resultCustom;\n        // 全局回调\n        if (callback in globalOptions) {\n            // @ts-ignore\n            resultGlobal = globalOptions[callback](...args);\n        }\n        // 自定义回调\n        if (mergedOptions[callback]) {\n            // @ts-ignore\n            resultCustom = mergedOptions[callback](...args);\n        }\n        // beforeSend 回调返回 false 时取消 ajax 请求\n        if (callback === 'beforeSend' &&\n            [resultGlobal, resultCustom].includes(false)) {\n            isCanceled = true;\n        }\n    };\n    // XMLHttpRequest 请求\n    const XHR = () => {\n        let textStatus;\n        return new Promise((resolve, reject) => {\n            const doReject = (reason) => {\n                return reject(new Error(reason));\n            };\n            // GET/HEAD 请求的缓存处理\n            if (isMethodQueryString && !cache) {\n                url = appendQuery(url, `_=${Date.now()}`);\n            }\n            // 创建 XHR\n            const xhr = new XMLHttpRequest();\n            xhr.open(method, url, async, username, password);\n            if (contentType ||\n                (data && !isMethodQueryString && contentType !== false)) {\n                xhr.setRequestHeader('Content-Type', contentType);\n            }\n            // 设置 Accept\n            if (dataType === 'json') {\n                xhr.setRequestHeader('Accept', 'application/json, text/javascript');\n            }\n            // 添加 headers\n            eachObject(headers, (key, value) => {\n                // undefined 值不发送，string 和 null 需要发送\n                if (!isUndefined(value)) {\n                    xhr.setRequestHeader(key, value + ''); // 把 null 转换成字符串\n                }\n            });\n            // 检查是否是跨域请求，跨域请求时不添加 X-Requested-With\n            if (!isCrossDomain(url)) {\n                xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n            }\n            // 设置 xhr 选项\n            eachObject(xhrFields, (key, value) => {\n                xhr[key] = value;\n            });\n            eventParams.xhr = successEventParams.xhr = xhr;\n            eventParams.options = successEventParams.options = mergedOptions;\n            let xhrTimeout;\n            xhr.onload = () => {\n                if (xhrTimeout) {\n                    clearTimeout(xhrTimeout);\n                }\n                // AJAX 返回的 HTTP 响应码是否表示成功\n                const isSuccess = isHttpStatusSuccess(xhr.status);\n                // @ts-ignore\n                let responseData = undefined;\n                if (isSuccess) {\n                    textStatus =\n                        xhr.status === 204 || method === 'HEAD'\n                            ? 'nocontent'\n                            : xhr.status === 304\n                                ? 'notmodified'\n                                : 'success';\n                    if (dataType === 'json' ||\n                        (!dataType &&\n                            (xhr.getResponseHeader('content-type') || '').includes('json'))) {\n                        try {\n                            responseData =\n                                method === 'HEAD' ? undefined : JSON.parse(xhr.responseText);\n                            successEventParams.response = responseData;\n                        }\n                        catch (err) {\n                            textStatus = 'parsererror';\n                            trigger(ajaxError, 'error', xhr, textStatus);\n                            doReject(textStatus);\n                        }\n                        if (textStatus !== 'parsererror') {\n                            trigger(ajaxSuccess, 'success', responseData, textStatus, xhr);\n                            resolve(responseData);\n                        }\n                    }\n                    else {\n                        responseData =\n                            method === 'HEAD'\n                                ? undefined\n                                : xhr.responseType === 'text' || xhr.responseType === ''\n                                    ? xhr.responseText\n                                    : xhr.response;\n                        successEventParams.response = responseData;\n                        trigger(ajaxSuccess, 'success', responseData, textStatus, xhr);\n                        resolve(responseData);\n                    }\n                }\n                else {\n                    textStatus = 'error';\n                    trigger(ajaxError, 'error', xhr, textStatus);\n                    doReject(textStatus);\n                }\n                // statusCode\n                eachArray([globalOptions.statusCode ?? {}, statusCode], (func) => {\n                    if (func[xhr.status]) {\n                        if (isSuccess) {\n                            func[xhr.status](responseData, textStatus, xhr);\n                        }\n                        else {\n                            func[xhr.status](xhr, textStatus);\n                        }\n                    }\n                });\n                trigger(ajaxComplete, 'complete', xhr, textStatus);\n            };\n            xhr.onerror = () => {\n                if (xhrTimeout) {\n                    clearTimeout(xhrTimeout);\n                }\n                trigger(ajaxError, 'error', xhr, xhr.statusText);\n                trigger(ajaxComplete, 'complete', xhr, 'error');\n                doReject(xhr.statusText);\n            };\n            xhr.onabort = () => {\n                let statusText = 'abort';\n                if (xhrTimeout) {\n                    statusText = 'timeout';\n                    clearTimeout(xhrTimeout);\n                }\n                trigger(ajaxError, 'error', xhr, statusText);\n                trigger(ajaxComplete, 'complete', xhr, statusText);\n                doReject(statusText);\n            };\n            // ajax start 回调\n            trigger(ajaxStart, 'beforeSend', xhr, mergedOptions);\n            if (isCanceled) {\n                return doReject('cancel');\n            }\n            // Timeout\n            if (timeout > 0) {\n                xhrTimeout = window.setTimeout(() => xhr.abort(), timeout);\n            }\n            // 发送 XHR\n            xhr.send(data);\n        });\n    };\n    return XHR();\n};\n","import { $ } from '../$.js';\nimport { ajax } from '../functions/ajax.js';\n$.ajax = ajax;\n","import { globalOptions } from '../shared/ajax.js';\nimport { extend } from './extend.js';\n/**\n * 为 ajax 请求设置全局配置参数\n * @param options 键值对参数\n * @example\n```js\najaxSetup({\n  dataType: 'json',\n  method: 'POST',\n});\n```\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const ajaxSetup = (options) => {\n    return extend(globalOptions, options);\n};\n","import { $ } from '../$.js';\nimport { ajaxSetup } from '../functions/ajaxSetup.js';\n$.ajaxSetup = ajaxSetup;\n","import { $ } from '../$.js';\nimport { contains } from '../functions/contains.js';\n$.contains = contains;\n","import { get, set, getAll, setAll } from '../shared/data.js';\nimport { isUndefined, isObjectLike } from '../shared/helper.js';\nexport function data(element, key, value) {\n    // 根据键值对设置值\n    // data(element, { 'key' : 'value' })\n    if (isObjectLike(key)) {\n        setAll(element, key);\n        return key;\n    }\n    // 根据 key、value 设置值\n    // data(element, 'key', 'value')\n    if (!isUndefined(value)) {\n        set(element, key, value);\n        return value;\n    }\n    // 获取所有值\n    // data(element)\n    if (isUndefined(key)) {\n        return getAll(element);\n    }\n    // 获取指定值\n    // data(element, 'key')\n    return get(element, key);\n}\n","import { $ } from '../$.js';\nimport { data } from '../functions/data.js';\n$.data = data;\n","import { $ } from '../$.js';\nimport { each } from '../functions/each.js';\n$.each = each;\n","import { $ } from '../$.js';\nimport { extend } from '../functions/extend.js';\nimport { eachObject } from '../shared/helper.js';\n$.extend = function (target, ...objectN) {\n    if (!objectN.length) {\n        eachObject(target, (prop, value) => {\n            this[prop] = value;\n        });\n        return this;\n    }\n    return extend(target, ...objectN);\n};\n","import { $ } from '../$.js';\nimport { map } from '../functions/map.js';\n$.map = map;\n","import { $ } from '../$.js';\nimport { merge } from '../functions/merge.js';\n$.merge = merge;\n","import { $ } from '../$.js';\nimport { param } from '../functions/param.js';\n$.param = param;\n","import { $ } from '../$.js';\nimport { removeData } from '../functions/removeData.js';\n$.removeData = removeData;\n","import { $ } from '../$.js';\nimport { unique } from '../functions/unique.js';\n$.unique = unique;\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:r,getOwnPropertyNames:h,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=y){if(s.state&&(s.attribute=!1),this._$Ei(),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,s);void 0!==r&&e(this.prototype,t,r)}}static getPropertyDescriptor(t,s,i){const{get:e,set:h}=r(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get(){return e?.call(this)},set(s){const r=e?.call(this);h.call(this,s),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...h(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$EC(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==r?this.removeAttribute(e):this.setAttribute(e,r),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),r=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e,this[e]=r.fromAttribute(s,t.type),this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??f)(this[t],s))return;this.P(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,s,i){this._$AL.has(t)||this._$AL.set(t,s),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t)!0!==i.wrapped||this._$AL.has(s)||void 0===this[s]||this.P(s,this[s],i)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:\"open\"},b[d(\"elementProperties\")]=new Map,b[d(\"finalized\")]=new Map,p?.({ReactiveElement:b}),(a.reactiveElementVersions??=[]).push(\"2.0.4\");export{b as ReactiveElement,u as defaultConverter,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=Symbol.for(\"lit-noChange\"),T=Symbol.for(\"lit-nothing\"),A=new WeakMap,E=r.createTreeWalker(r,129);function C(t,i){if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const P=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[C(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\")),o]};class V{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=P(t,s);if(this.el=V.createElement(f,n),E.currentNode=this.el.content,2===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=E.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?k:\"?\"===e[1]?H:\"@\"===e[1]?I:R}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),E.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function N(t,i,s=t,e){if(i===w)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=N(t,h._$AS(t,i.values),h,e)),i}class S{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);E.currentNode=e;let h=E.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new M(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new L(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=E.nextNode(),o++)}return E.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class M{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=T,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=N(this,t,i),c(t)?t===T||null==t||\"\"===t?(this._$AH!==T&&this._$AR(),this._$AH=T):t!==this._$AH&&t!==w&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==T&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=V.createElement(C(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new S(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new V(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new M(this.S(l()),this.S(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class R{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=T,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=T}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=N(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==w,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=N(this,e[s+n],i,n),r===w&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===T?t=T:t!==T&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===T?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class k extends R{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===T?void 0:t}}class H extends R{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==T)}}class I extends R{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=N(this,t,i,0)??T)===w)return;const s=this._$AH,e=t===T&&s!==T||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==T&&(s===T||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){N(this,t)}}const z={P:e,A:h,C:o,M:1,L:P,R:S,D:u,V:N,I:M,H:R,N:H,U:I,B:k,F:L},Z=t.litHtmlPolyfillSupport;Z?.(V,M),(t.litHtmlVersions??=[]).push(\"3.1.4\");const j=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new M(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{z as _$LH,x as html,w as noChange,T as nothing,j as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return i}}s._$litElement$=!0,s[(\"finalized\",\"finalized\")]=!0,globalThis.litElementHydrateSupport?.({LitElement:s});const r=globalThis.litElementPolyfillSupport;r?.({LitElement:s});const o={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(globalThis.litElementVersions??=[]).push(\"4.0.6\");export{s as LitElement,o as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{defaultConverter as t,notEqual as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:t,reflect:!1,hasChanged:e},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t)},init(e){return void 0!==e&&this.P(o,void 0,t),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=(e,t,c)=>(c.configurable=!0,c.enumerable=!0,Reflect.decorate&&\"object\"!=typeof t&&Object.defineProperty(e,t,c),c);export{e as desc};\n//# sourceMappingURL=base.js.map\n","import{desc as t}from\"./base.js\";\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function o(o){return(e,n)=>{const{slot:r,selector:s}=o??{},c=\"slot\"+(r?`[name=${r}]`:\":not([name])\");return t(e,n,{get(){const t=this.renderRoot?.querySelector(c),e=t?.assignedElements(o)??[];return void 0===s?e:e.filter((t=>t.matches(s)))}})}}export{o as queryAssignedElements};\n//# sourceMappingURL=query-assigned-elements.js.map\n","import{nothing as t}from\"../lit-html.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o=o=>o??t;export{o as ifDefined};\n//# sourceMappingURL=if-defined.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{noChange as t}from\"../lit-html.js\";import{directive as e,Directive as r,PartType as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const n=\"important\",i=\" !\"+n,o=e(class extends r{constructor(t){if(super(t),t.type!==s.ATTRIBUTE||\"style\"!==t.name||t.strings?.length>2)throw Error(\"The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.\")}render(t){return Object.keys(t).reduce(((e,r)=>{const s=t[r];return null==s?e:e+`${r=r.includes(\"-\")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,\"-$&\").toLowerCase()}:${s};`}),\"\")}update(e,[r]){const{style:s}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(r)),this.render(r);for(const t of this.ft)null==r[t]&&(this.ft.delete(t),t.includes(\"-\")?s.removeProperty(t):s[t]=null);for(const t in r){const e=r[t];if(null!=e){this.ft.add(t);const r=\"string\"==typeof e&&e.endsWith(i);t.includes(\"-\")||r?s.setProperty(t,r?e.slice(0,-11):e,r?n:\"\"):s[t]=e}}return t}});export{o as styleMap};\n//# sourceMappingURL=style-map.js.map\n","import { css } from 'lit';\nexport const componentStyle = css `\n  :host {\n    box-sizing: border-box;\n  }\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n  :host(:focus),\n  :host(:focus-visible),\n  :host *:focus,\n  :host *:focus-visible {\n    outline: none;\n  }\n  [hidden] {\n    display: none !important;\n  }\n`;\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this._t=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this._t;this.it=r;const s=[r];return s.raw=s,this._t={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","import{directive as s}from\"../directive.js\";import{UnsafeHTMLDirective as e}from\"./unsafe-html.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class t extends e{}t.directiveName=\"unsafeSVG\",t.resultType=2;const o=s(t);export{o as unsafeSVG};\n//# sourceMappingURL=unsafe-svg.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{I:t}=o,i=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,n={HTML:1,SVG:2},e=(o,t)=>void 0===t?void 0!==o?._$litType$:o?._$litType$===t,l=o=>null!=o?._$litType$?.h,c=o=>void 0!==o?._$litDirective$,d=o=>o?._$litDirective$,f=o=>void 0===o.strings,s=()=>document.createComment(\"\"),r=(o,i,n)=>{const e=o._$AA.parentNode,l=void 0===i?o._$AB:i._$AA;if(void 0===n){const i=e.insertBefore(s(),l),c=e.insertBefore(s(),l);n=new t(i,c,o,o.options)}else{const t=n._$AB.nextSibling,i=n._$AM,c=i!==o;if(c){let t;n._$AQ?.(o),n._$AM=o,void 0!==n._$AP&&(t=o._$AU)!==i._$AU&&n._$AP(t)}if(t!==l||c){let o=n._$AA;for(;o!==t;){const t=o.nextSibling;e.insertBefore(o,l),o=t}}}return n},v=(o,t,i=o)=>(o._$AI(t,i),o),u={},m=(o,t=u)=>o._$AH=t,p=o=>o._$AH,h=o=>{o._$AP?.(!1,!0);let t=o._$AA;const i=o._$AB.nextSibling;for(;t!==i;){const o=t.nextSibling;t.remove(),t=o}},j=o=>{o._$AR()};export{n as TemplateResultType,j as clearPart,p as getCommittedValue,d as getDirectiveClass,r as insertPart,l as isCompiledTemplateResult,c as isDirectiveResult,i as isPrimitive,f as isSingleExpression,e as isTemplateResult,h as removePart,v as setChildPartValue,m as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","import{isSingleExpression as i}from\"./directive-helpers.js\";import{Directive as t,PartType as e}from\"./directive.js\";export{directive}from\"./directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=(i,t)=>{const e=i._$AN;if(void 0===e)return!1;for(const i of e)i._$AO?.(t,!1),s(i,t);return!0},o=i=>{let t,e;do{if(void 0===(t=i._$AM))break;e=t._$AN,e.delete(i),i=t}while(0===e?.size)},r=i=>{for(let t;t=i._$AM;i=t){let e=t._$AN;if(void 0===e)t._$AN=e=new Set;else if(e.has(i))break;e.add(i),c(t)}};function h(i){void 0!==this._$AN?(o(this),this._$AM=i,r(this)):this._$AM=i}function n(i,t=!1,e=0){const r=this._$AH,h=this._$AN;if(void 0!==h&&0!==h.size)if(t)if(Array.isArray(r))for(let i=e;i<r.length;i++)s(r[i],!1),o(r[i]);else null!=r&&(s(r,!1),o(r));else s(this,i)}const c=i=>{i.type==e.CHILD&&(i._$AP??=n,i._$AQ??=h)};class f extends t{constructor(){super(...arguments),this._$AN=void 0}_$AT(i,t,e){super._$AT(i,t,e),r(this),this.isConnected=i._$AU}_$AO(i,t=!0){i!==this.isConnected&&(this.isConnected=i,i?this.reconnected?.():this.disconnected?.()),t&&(s(this,i),o(this))}setValue(t){if(i(this._$Ct))this._$Ct._$AI(t,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=t,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}export{f as AsyncDirective,t as Directive,e as PartType};\n//# sourceMappingURL=async-directive.js.map\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=async(t,s)=>{for await(const i of t)if(!1===await s(i))return};class s{constructor(t){this.Y=t}disconnect(){this.Y=void 0}reconnect(t){this.Y=t}deref(){return this.Y}}class i{constructor(){this.Z=void 0,this.q=void 0}get(){return this.Z}pause(){this.Z??=new Promise((t=>this.q=t))}resume(){this.q?.(),this.Z=this.q=void 0}}export{i as Pauser,s as PseudoWeakRef,t as forAwaitOf};\n//# sourceMappingURL=private-async-helpers.js.map\n","import{noChange as t}from\"../lit-html.js\";import{isPrimitive as s}from\"../directive-helpers.js\";import{AsyncDirective as i}from\"../async-directive.js\";import{PseudoWeakRef as e,Pauser as r}from\"./private-async-helpers.js\";import{directive as o}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const n=t=>!s(t)&&\"function\"==typeof t.then,h=1073741823;class c extends i{constructor(){super(...arguments),this._$Cwt=h,this._$Cbt=[],this._$CK=new e(this),this._$CX=new r}render(...s){return s.find((t=>!n(t)))??t}update(s,i){const e=this._$Cbt;let r=e.length;this._$Cbt=i;const o=this._$CK,c=this._$CX;this.isConnected||this.disconnected();for(let t=0;t<i.length&&!(t>this._$Cwt);t++){const s=i[t];if(!n(s))return this._$Cwt=t,s;t<r&&s===e[t]||(this._$Cwt=h,r=0,Promise.resolve(s).then((async t=>{for(;c.get();)await c.get();const i=o.deref();if(void 0!==i){const e=i._$Cbt.indexOf(s);e>-1&&e<i._$Cwt&&(i._$Cwt=e,i.setValue(t))}})))}return t}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const m=o(c);export{c as UntilDirective,m as until};\n//# sourceMappingURL=until.js.map\n","import { css } from 'lit';\nexport const style = css `:host{display:inline-block;width:1em;height:1em;font-weight:400;font-family:'Material Icons';font-style:normal;line-height:1;direction:ltr;letter-spacing:normal;white-space:nowrap;text-transform:none;word-wrap:normal;-webkit-font-smoothing:antialiased;text-rendering:optimizelegibility;-moz-osx-font-smoothing:grayscale;font-size:1.5rem}::slotted(svg),svg{width:100%;height:100%;fill:currentcolor}`;\n","import { __decorate } from \"tslib\";\nimport { html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { unsafeSVG } from 'lit/directives/unsafe-svg.js';\nimport { until } from 'lit/directives/until.js';\nimport { ajax } from '@mdui/jq/functions/ajax.js';\nimport { MduiElement } from '@mdui/shared/base/mdui-element.js';\nimport { HasSlotController } from '@mdui/shared/controllers/has-slot.js';\nimport { componentStyle } from '@mdui/shared/lit-styles/component-style.js';\nimport { style } from './style.js';\n/**\n * @summary 图标组件\n *\n * ```html\n * <mdui-icon name=\"search\"></mdui-icon>\n * ```\n *\n * @slot - `svg` 图标的内容\n */\nlet Icon = class Icon extends MduiElement {\n    constructor() {\n        super(...arguments);\n        this.hasSlotController = new HasSlotController(this, '[default]');\n    }\n    render() {\n        const renderDefault = () => {\n            if (this.name) {\n                const [name, variant] = this.name.split('--');\n                const familyMap = new Map([\n                    ['outlined', 'Material Icons Outlined'],\n                    ['filled', 'Material Icons'],\n                    ['rounded', 'Material Icons Round'],\n                    ['sharp', 'Material Icons Sharp'],\n                    ['two-tone', 'Material Icons Two Tone'],\n                ]);\n                return html `<span style=\"${styleMap({ fontFamily: familyMap.get(variant) })}\">${name}</span>`;\n            }\n            if (this.src) {\n                return html `${until(ajax({ url: this.src }).then(unsafeSVG))}`;\n            }\n            return html ``;\n        };\n        return this.hasSlotController.test('[default]')\n            ? html `<slot></slot>`\n            : renderDefault();\n    }\n};\nIcon.styles = [componentStyle, style];\n__decorate([\n    property({ reflect: true })\n], Icon.prototype, \"name\", void 0);\n__decorate([\n    property({ reflect: true })\n], Icon.prototype, \"src\", void 0);\nIcon = __decorate([\n    customElement('mdui-icon')\n], Icon);\nexport { Icon };\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner:var(--mdui-shape-corner-full);position:relative;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;white-space:nowrap;vertical-align:middle;border-radius:var(--shape-corner);-webkit-user-select:none;user-select:none;width:2.5rem;height:2.5rem;background-color:rgb(var(--mdui-color-primary-container));color:rgb(var(--mdui-color-on-primary-container));font-size:var(--mdui-typescale-title-medium-size);font-weight:var(--mdui-typescale-title-medium-weight);letter-spacing:var(--mdui-typescale-title-medium-tracking);line-height:var(--mdui-typescale-title-medium-line-height)}img{width:100%;height:100%}::slotted(mdui-icon),mdui-icon{font-size:1.5em}`;\n","import { __decorate } from \"tslib\";\nimport { html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { MduiElement } from '@mdui/shared/base/mdui-element.js';\nimport { HasSlotController } from '@mdui/shared/controllers/has-slot.js';\nimport { nothingTemplate } from '@mdui/shared/helpers/template.js';\nimport { componentStyle } from '@mdui/shared/lit-styles/component-style.js';\nimport '../icon.js';\nimport { style } from './style.js';\n/**\n * @summary 头像组件\n *\n * ```html\n * <mdui-avatar src=\"https://avatars.githubusercontent.com/u/3030330?s=40&v=4\"></mdui-avatar>\n * ```\n *\n * @slot - 自定义头像内容，可以为字母、汉字、`<img>` 元素、图标等\n *\n * @csspart image - 使用图片作为头像时，组件内部的 `<img>` 元素\n * @csspart icon - 使用图标作为头像时，组件内部的 `<mdui-icon>` 元素\n *\n * @cssprop --shape-corner - 组件的圆角大小。可以指定一个具体的像素值；但更推荐引用[设计令牌](/docs/2/styles/design-tokens#shape-corner)\n */\nlet Avatar = class Avatar extends MduiElement {\n    constructor() {\n        super(...arguments);\n        this.hasSlotController = new HasSlotController(this, '[default]');\n    }\n    render() {\n        return this.hasSlotController.test('[default]')\n            ? html `<slot></slot>`\n            : this.src\n                ? html `<img part=\"image\" alt=\"${ifDefined(this.label)}\" src=\"${this.src}\" style=\"${styleMap({ objectFit: this.fit })}\">`\n                : this.icon\n                    ? html `<mdui-icon part=\"icon\" name=\"${this.icon}\"></mdui-icon>`\n                    : nothingTemplate;\n    }\n};\nAvatar.styles = [componentStyle, style];\n__decorate([\n    property({ reflect: true })\n], Avatar.prototype, \"src\", void 0);\n__decorate([\n    property({ reflect: true })\n], Avatar.prototype, \"fit\", void 0);\n__decorate([\n    property({ reflect: true })\n], Avatar.prototype, \"icon\", void 0);\n__decorate([\n    property({ reflect: true })\n], Avatar.prototype, \"label\", void 0);\nAvatar = __decorate([\n    customElement('mdui-avatar')\n], Avatar);\nexport { Avatar };\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner:var(--mdui-shape-corner-full);display:inline-flex;align-items:center;justify-content:center;border-radius:var(--shape-corner);padding-left:.25rem;padding-right:.25rem;color:rgb(var(--mdui-color-on-error));background-color:rgb(var(--mdui-color-error));height:1rem;min-width:1rem;font-size:var(--mdui-typescale-label-small-size);font-weight:var(--mdui-typescale-label-small-weight);letter-spacing:var(--mdui-typescale-label-small-tracking);line-height:var(--mdui-typescale-label-small-line-height)}:host([variant=small]){min-width:0;padding:0;width:.375rem;height:.375rem}`;\n","import { __decorate } from \"tslib\";\nimport { html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { MduiElement } from '@mdui/shared/base/mdui-element.js';\nimport { nothingTemplate } from '@mdui/shared/helpers/template.js';\nimport { componentStyle } from '@mdui/shared/lit-styles/component-style.js';\nimport { style } from './style.js';\n/**\n * @summary 徽标组件\n *\n * ```html\n * <mdui-badge>12</mdui-badge>\n * ```\n *\n * @slot - 徽标中显示的文本\n *\n * @cssprop --shape-corner - 组件的圆角大小。可以指定一个具体的像素值；但更推荐引用[设计令牌](/docs/2/styles/design-tokens#shape-corner)\n */\nlet Badge = class Badge extends MduiElement {\n    constructor() {\n        super(...arguments);\n        /**\n         * 徽标的形状。可选值包括：\n         *\n         * * `small`：小型徽标，不显示文本\n         * * `large`：大型徽标，会显示文本\n         */\n        this.variant = 'large';\n    }\n    render() {\n        if (this.variant === 'small') {\n            return nothingTemplate;\n        }\n        return html `<slot></slot>`;\n    }\n};\nBadge.styles = [componentStyle, style];\n__decorate([\n    property({ reflect: true })\n], Badge.prototype, \"variant\", void 0);\nBadge = __decorate([\n    customElement('mdui-badge')\n], Badge);\nexport { Badge };\n","/**\n * 在原生的 HTML 中，布尔属性只要添加了属性名，不论属性值设置成什么，属性值都是 true\n * 但这里设置了 attr=\"false\" 时，要把属性设置为 false\n *\n * 原因是：\n * 在 vue3 中，通过 :attr=\"value\" 设置属性时，vue 会优先从 DOM 属性中寻找是否存在 attr 属性名，\n * 若存在，则设置对应的 DOM 属性，否则设置对应的 attribute 属性\n * 但在 vue 的服务端渲染（ssr）时，不存在 DOM 对象，所以会把 attribute 属性设置成 attr=\"true\" 或 attr=\"false\"\n * 所以在 attribute 属性 attr=\"false\" 时，需要把属性值转换为布尔值 false\n *\n * 这段代码不能封装成函数，否则生成 custom-elements.json 会识别不了\n * 这段注释仅在这里写一次，其他地方不再重复\n *\n * @see https://v3-migration.vuejs.org/zh/breaking-changes/attribute-coercion.html\n */\nexport const booleanConverter = (value) => {\n    return value !== null && value !== 'false';\n};\n","import { getDocument } from 'ssr-window';\nimport { unique } from '@mdui/jq/functions/unique.js';\nimport { isDomReady } from '@mdui/jq/shared/dom.js';\n/**\n * 判断组件是否定义完成\n *\n * 如果需要在组件操作或读取组件外部、或组件 slot 中的原生 DOM 时，则需要在 DOM 就绪时，才能认为组件定义完成\n * 如果组件需要和其他组件配合使用，则需要等待其他组件定义完成后，才能认为组件定义完成\n */\nexport class DefinedController {\n    constructor(host, options) {\n        /**\n         * 组件是否已定义完成\n         */\n        this.defined = false;\n        (this.host = host).addController(this);\n        this.relatedElements = options.relatedElements;\n        this.needDomReady = options.needDomReady || !!options.relatedElements;\n        this.onSlotChange = this.onSlotChange.bind(this);\n    }\n    hostConnected() {\n        this.host.shadowRoot.addEventListener('slotchange', this.onSlotChange);\n    }\n    hostDisconnected() {\n        this.host.shadowRoot.removeEventListener('slotchange', this.onSlotChange);\n    }\n    /**\n     * 判断组件是否定义完成\n     */\n    isDefined() {\n        if (this.defined) {\n            return true;\n        }\n        this.defined =\n            (!this.needDomReady || isDomReady()) &&\n                !this.getUndefinedLocalNames().length;\n        return this.defined;\n    }\n    /**\n     * 在组件定义完成后，promise 被 resolve\n     */\n    async whenDefined() {\n        if (this.defined) {\n            return Promise.resolve();\n        }\n        const document = getDocument();\n        if (this.needDomReady && !isDomReady(document)) {\n            await new Promise((resolve) => {\n                document.addEventListener('DOMContentLoaded', () => resolve(), {\n                    once: true,\n                });\n            });\n        }\n        const undefinedLocalNames = this.getUndefinedLocalNames();\n        if (undefinedLocalNames.length) {\n            const promises = [];\n            undefinedLocalNames.forEach((localName) => {\n                promises.push(customElements.whenDefined(localName));\n            });\n            await Promise.all(promises);\n        }\n        this.defined = true;\n        return;\n    }\n    /**\n     * slot 中的未完成定义的相关 Web components 组件的 CSS 选择器\n     */\n    getScopeLocalNameSelector() {\n        const localNames = this.relatedElements;\n        if (!localNames) {\n            return null;\n        }\n        if (Array.isArray(localNames)) {\n            return localNames\n                .map((localName) => `${localName}:not(:defined)`)\n                .join(',');\n        }\n        return Object.keys(localNames)\n            .filter((localName) => !localNames[localName])\n            .map((localName) => `${localName}:not(:defined)`)\n            .join(',');\n    }\n    /**\n     * 整个页面中的未完成定义的相关 Web components 组件的 CSS 选择器\n     */\n    getGlobalLocalNameSelector() {\n        const localNames = this.relatedElements;\n        if (!localNames || Array.isArray(localNames)) {\n            return null;\n        }\n        return Object.keys(localNames)\n            .filter((localName) => localNames[localName])\n            .map((localName) => `${localName}:not(:defined)`)\n            .join(',');\n    }\n    /**\n     * 获取未完成定义的相关 Web components 组件名\n     */\n    getUndefinedLocalNames() {\n        const scopeSelector = this.getScopeLocalNameSelector();\n        const globalSelector = this.getGlobalLocalNameSelector();\n        const undefinedScopeElements = scopeSelector\n            ? [...this.host.querySelectorAll(scopeSelector)]\n            : [];\n        const undefinedGlobalElements = globalSelector\n            ? [...getDocument().querySelectorAll(globalSelector)]\n            : [];\n        const localNames = [\n            ...undefinedScopeElements,\n            ...undefinedGlobalElements,\n        ].map((element) => element.localName);\n        return unique(localNames);\n    }\n    /**\n     * slot 变更时，若 slot 中包含未完成定义的相关 Web components 组件，则组件未定义完成\n     */\n    onSlotChange() {\n        const selector = this.getScopeLocalNameSelector();\n        if (selector) {\n            const undefinedElements = this.host.querySelectorAll(selector);\n            if (undefinedElements.length) {\n                this.defined = false;\n            }\n        }\n    }\n}\n","/**\n * watch 装饰器。在 @property 或 @state 属性变更时，且在组件更新前触发\n * 若初始值为 undefined，则初始状态不会触发；否则初始状态就会先触发一次\n *\n * 如果要等属性变更后，且组件更新完成再执行，可以在函数中执行 `await this.updateComplete`\n * 如果要等组件首次渲染完后再监听属性，可以传入第二个参数 true。或者在函数中通过 `this.hasUpdated` 进行判断\n *\n * @watch('propName')\n * handlePropChange(oldValue, newValue) {\n *\n * }\n */\n/**\n * @param propName 监听的属性名\n * @param waitUntilFirstUpdate 是否等首次渲染完后再监听\n */\nexport function watch(propName, waitUntilFirstUpdate = false) {\n    return (proto, functionName) => {\n        // @ts-ignore\n        const { update } = proto;\n        if (propName in proto) {\n            // @ts-ignore\n            proto.update = function (changedProperties) {\n                if (changedProperties.has(propName)) {\n                    const oldValue = changedProperties.get(propName);\n                    const newValue = this[propName];\n                    if (oldValue !== newValue) {\n                        if (!waitUntilFirstUpdate || this.hasUpdated) {\n                            // @ts-ignore\n                            this[functionName](oldValue, newValue);\n                        }\n                    }\n                }\n                update.call(this, changedProperties);\n            };\n        }\n    };\n}\n","import { __decorate } from \"tslib\";\nimport { property } from 'lit/decorators.js';\nimport { $ } from '@mdui/jq/$.js';\nimport '@mdui/jq/methods/css.js';\nimport { isNodeName } from '@mdui/jq/shared/helper.js';\nimport { DefinedController } from '../controllers/defined.js';\nimport { watch } from '../decorators/watch.js';\n/**\n * 滚动行为\n *\n * 父类需要实现\n * @property() public scrollBehavior\n * protected runScrollThreshold(isScrollingUp: boolean, scrollTop: number): void;\n * protected runScrollNoThreshold(isScrollingUp: boolean, scrollTop: number): void;\n * protected get scrollPaddingPosition(): ScrollPaddingPosition\n */\nexport const ScrollBehaviorMixin = (superclass) => {\n    class ScrollBehaviorMixinClass extends superclass {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        constructor(...args) {\n            super(...args);\n            this.scrollBehaviorDefinedController = new DefinedController(this, {\n                needDomReady: true,\n            });\n            /**\n             * 上次滚动后，垂直方向的距离（滚动距离超过 scrollThreshold 才记录）\n             */\n            this.lastScrollTopThreshold = 0;\n            /**\n             * 上次滚动后，垂直方向的距离（无视 scrollThreshold，始终记录）\n             */\n            this.lastScrollTopNoThreshold = 0;\n            /**\n             * 父元素是否是 `mdui-layout`\n             */\n            this.isParentLayout = false;\n            this.onListeningScroll = this.onListeningScroll.bind(this);\n        }\n        /**\n         * 滚动时，如果需要给 container 添加 padding，添加在顶部还是底部\n         */\n        get scrollPaddingPosition() {\n            throw new Error('Must implement scrollPaddingPosition getter');\n        }\n        async onScrollTargetChange(oldValue, newValue) {\n            await this.scrollBehaviorDefinedController.whenDefined();\n            // 仅在有值切换到无值、或无值切换到有值时，更新\n            if ((oldValue && !newValue) || (!oldValue && newValue)) {\n                this.updateContainerPadding();\n            }\n            if (!this.scrollBehavior) {\n                return;\n            }\n            const oldListening = this.getListening(oldValue);\n            if (oldListening) {\n                oldListening.removeEventListener('scroll', this.onListeningScroll);\n            }\n            const newListening = this.getListening(newValue);\n            if (newListening) {\n                this.updateScrollTop(newListening);\n                newListening.addEventListener('scroll', this.onListeningScroll);\n            }\n        }\n        async onScrollBehaviorChange(oldValue, newValue) {\n            await this.scrollBehaviorDefinedController.whenDefined();\n            // 仅在有值切换到无值、或无值切换到有值时，更新\n            if ((oldValue && !newValue) || (!oldValue && newValue)) {\n                this.updateContainerPadding();\n            }\n            const listening = this.getListening(this.scrollTarget);\n            if (!listening) {\n                return;\n            }\n            if (this.scrollBehavior) {\n                this.updateScrollTop(listening);\n                listening.addEventListener('scroll', this.onListeningScroll);\n            }\n            else {\n                listening.removeEventListener('scroll', this.onListeningScroll);\n            }\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.scrollBehaviorDefinedController.whenDefined().then(() => {\n                this.isParentLayout = isNodeName(this.parentElement, 'mdui-layout');\n                this.updateContainerPadding();\n            });\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this.scrollBehaviorDefinedController.whenDefined().then(() => {\n                this.updateContainerPadding(false);\n            });\n        }\n        /**\n         * scrollBehavior 包含多个滚动行为，用空格分割\n         * 用该方法判断指定滚动行为是否在 scrollBehavior 中\n         * @param behavior 为数组时，只要其中一个行为在 scrollBehavior 中，即返回 `true`\n         */\n        hasScrollBehavior(behavior) {\n            const behaviors = (this.scrollBehavior?.split(' ') ??\n                []);\n            if (Array.isArray(behavior)) {\n                return !!behaviors.filter((v) => behavior.includes(v)).length;\n            }\n            else {\n                return behaviors.includes(behavior);\n            }\n        }\n        /**\n         * 执行滚动事件，在滚动距离超过 scrollThreshold 时才会执行\n         * Note: 父类可以按需实现该方法\n         * @param isScrollingUp 是否向上滚动\n         * @param scrollTop 距离 scrollTarget 顶部的距离\n         */\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        runScrollThreshold(isScrollingUp, scrollTop) {\n            return;\n        }\n        /**\n         * 执行滚动事件，会无视 scrollThreshold，始终会执行\n         * @param isScrollingUp 是否向上滚动\n         * @param scrollTop 距离 scrollTarget 顶部的距离\n         */\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        runScrollNoThreshold(isScrollingUp, scrollTop) {\n            return;\n        }\n        /**\n         * 更新滚动容器的 padding，避免内容被 navigation-bar 覆盖\n         * 仅 scrollBehavior 包含 hide、shrink 时，添加 padding\n         * @param withPadding 该值为 false 时，为移除 padding\n         */\n        updateContainerPadding(withPadding = true) {\n            const container = this.getContainer(this.scrollTarget);\n            if (!container || this.isParentLayout) {\n                return;\n            }\n            const propName = this.scrollPaddingPosition === 'top' ? 'paddingTop' : 'paddingBottom';\n            if (withPadding) {\n                const propValue = this.getListening(this.scrollTarget) &&\n                    ['fixed', 'absolute'].includes($(this).css('position'))\n                    ? this.offsetHeight\n                    : null;\n                $(container).css({ [propName]: propValue });\n            }\n            else {\n                $(container).css({ [propName]: null });\n            }\n        }\n        onListeningScroll() {\n            const listening = this.getListening(this.scrollTarget);\n            window.requestAnimationFrame(() => this.onScroll(listening));\n        }\n        /**\n         * 滚动事件，这里过滤掉不符合条件的滚动\n         */\n        onScroll(listening) {\n            const scrollTop = listening.scrollY ?? listening.scrollTop;\n            // 无视 scrollThreshold 的回调\n            if (this.lastScrollTopNoThreshold !== scrollTop) {\n                this.runScrollNoThreshold(scrollTop < this.lastScrollTopNoThreshold, scrollTop);\n                this.lastScrollTopNoThreshold = scrollTop;\n            }\n            // 滚动距离大于 scrollThreshold 时才执行的回调\n            if (Math.abs(scrollTop - this.lastScrollTopThreshold) >\n                (this.scrollThreshold || 0)) {\n                this.runScrollThreshold(scrollTop < this.lastScrollTopThreshold, scrollTop);\n                this.lastScrollTopThreshold = scrollTop;\n            }\n        }\n        /**\n         * 重新更新 lastScrollTopThreshold、lastScrollTopNoThreshold 的值\n         * 用于在 scrollTarget、scrollBehavior 变更时，重新设置 lastScrollTopThreshold、lastScrollTopNoThreshold 的初始值\n         */\n        updateScrollTop(listening) {\n            this.lastScrollTopThreshold = this.lastScrollTopNoThreshold =\n                listening.scrollY ?? listening.scrollTop;\n        }\n        /**\n         * 获取组件需要监听哪个元素的滚动状态\n         */\n        getListening(target) {\n            return target ? $(target)[0] : window;\n        }\n        /**\n         * 获取组件在哪个容器内滚动\n         */\n        getContainer(target) {\n            return target ? $(target)[0] : document.body;\n        }\n    }\n    __decorate([\n        property({ attribute: 'scroll-target' })\n    ], ScrollBehaviorMixinClass.prototype, \"scrollTarget\", void 0);\n    __decorate([\n        property({ reflect: true, attribute: 'scroll-behavior' })\n    ], ScrollBehaviorMixinClass.prototype, \"scrollBehavior\", void 0);\n    __decorate([\n        property({ type: Number, reflect: true, attribute: 'scroll-threshold' })\n    ], ScrollBehaviorMixinClass.prototype, \"scrollThreshold\", void 0);\n    __decorate([\n        watch('scrollTarget')\n    ], ScrollBehaviorMixinClass.prototype, \"onScrollTargetChange\", null);\n    __decorate([\n        watch('scrollBehavior')\n    ], ScrollBehaviorMixinClass.prototype, \"onScrollBehaviorChange\", null);\n    return ScrollBehaviorMixinClass;\n};\n","let id = 0;\n/**\n * 返回一个唯一ID\n */\nexport const uniqueId = () => {\n    return ++id;\n};\n","import { $ } from '@mdui/jq/$.js';\nimport '@mdui/jq/methods/each.js';\nimport { uniqueId } from './uniqueId.js';\nlet weakMap;\n// ResizeObserver 实例，所有 resizeObserver 函数内部共用一个 ResizeObserver 实例\nlet observer;\n/**\n * 监听元素的尺寸变化\n * @param target 监听该元素的尺寸变化\n * @param callback 尺寸变化时执行的回调函数，`this` 指向监听的元素\n */\nexport const observeResize = (target, callback) => {\n    const $target = $(target);\n    const key = uniqueId();\n    // 取消监听函数\n    const result = {\n        unobserve: () => {\n            $target.each((_, target) => {\n                const options = weakMap.get(target);\n                const index = options.coArr.findIndex((co) => co.key === key);\n                if (index !== -1) {\n                    options.coArr.splice(index, 1);\n                }\n                if (!options.coArr.length) {\n                    observer.unobserve(target);\n                    weakMap.delete(target);\n                }\n                else {\n                    weakMap.set(target, options);\n                }\n            });\n        },\n    };\n    // 初始化\n    if (!weakMap) {\n        weakMap = new WeakMap();\n        observer = new ResizeObserver((entries) => {\n            entries.forEach((entry) => {\n                const target = entry.target;\n                const options = weakMap.get(target);\n                options.entry = entry;\n                options.coArr.forEach((co) => {\n                    co.callback.call(result, entry, result);\n                });\n            });\n        });\n    }\n    // 添加监听\n    $target.each((_, target) => {\n        const options = weakMap.get(target) ?? { coArr: [] };\n        // 同一个元素已添加过监听后，再次添加新的监听时，不会立即执行回调函数，所以这里手动调用一次回调函数\n        if (options.coArr.length && options.entry) {\n            callback.call(result, options.entry, result);\n        }\n        options.coArr.push({ callback, key });\n        weakMap.set(target, options);\n        observer.observe(target);\n    });\n    return result;\n};\n","import { $ } from '@mdui/jq/$.js';\nimport '@mdui/jq/methods/children.js';\nimport '@mdui/jq/methods/css.js';\nimport '@mdui/jq/methods/get.js';\nimport { isNodeName } from '@mdui/jq/shared/helper.js';\nimport { observeResize } from '@mdui/shared/helpers/observeResize.js';\nexport class LayoutManager {\n    constructor() {\n        this.states = [];\n    }\n    /**\n     * 注册 `<mdui-layout-main>`\n     */\n    registerMain(element) {\n        this.$main = $(element);\n    }\n    /**\n     * 取消注册 `<mdui-layout-main>`\n     */\n    unregisterMain() {\n        this.$main = undefined;\n    }\n    /**\n     * 注册新的 `<mdui-layout-item>`\n     */\n    registerItem(element) {\n        const state = { element };\n        this.states.push(state);\n        // 监听元素尺寸变化\n        state.observeResize = observeResize(state.element, () => {\n            this.updateLayout(state.element, {\n                width: this.isNoWidth(state) ? 0 : undefined,\n            });\n        });\n        this.items = undefined;\n        this.resort();\n        // 从头更新布局\n        this.updateLayout();\n    }\n    /**\n     * 取消注册 `<mdui-layout-item>`\n     */\n    unregisterItem(element) {\n        const index = this.states.findIndex((item) => item.element === element);\n        if (index < 0) {\n            return;\n        }\n        // 取消监听尺寸变化\n        const item = this.states[index];\n        item.observeResize?.unobserve();\n        this.items = undefined;\n        // 移除一个元素，并从下一个元素开始更新\n        this.states.splice(index, 1);\n        if (this.states[index]) {\n            this.updateLayout(this.states[index].element);\n        }\n    }\n    /**\n     * 获取所有 `<mdui-layout-item>` 元素（按在 DOM 中的顺序）\n     */\n    getItems() {\n        if (!this.items) {\n            const items = this.states.map((state) => state.element);\n            this.items = items.sort((a, b) => {\n                const position = a.compareDocumentPosition(b);\n                if (position & Node.DOCUMENT_POSITION_FOLLOWING) {\n                    return -1;\n                }\n                else if (position & Node.DOCUMENT_POSITION_PRECEDING) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n        }\n        return this.items;\n    }\n    /**\n     * 获取 `<mdui-layout-main>` 元素\n     */\n    getMain() {\n        return this.$main ? this.$main[0] : undefined;\n    }\n    /**\n     * 获取 `<mdui-layout-item>` 及 `<mdui-layout-main>` 元素\n     */\n    getItemsAndMain() {\n        return [...this.getItems(), this.getMain()].filter((i) => i);\n    }\n    /**\n     * 更新 `order` 值，更新完后重新计算布局\n     */\n    updateOrder() {\n        this.resort();\n        this.updateLayout();\n    }\n    /**\n     * 重新计算布局\n     * @param element 从哪一个元素开始更新；若未传入参数，则将更新所有元素\n     * @param size 此次更新中，元素的宽高（仅在此次更新中使用）。若不传则自动计算\n     */\n    updateLayout(element, size) {\n        const state = element\n            ? {\n                element,\n                width: size?.width,\n                height: size?.height,\n            }\n            : undefined;\n        const index = state\n            ? this.states.findIndex((v) => v.element === state.element)\n            : 0;\n        if (index < 0) {\n            return;\n        }\n        Object.assign(this.states[index], state);\n        this.states.forEach((currState, currIndex) => {\n            if (currIndex < index) {\n                return;\n            }\n            // @ts-ignore\n            const placement = currState.element.layoutPlacement;\n            // 前一个元素\n            const prevState = currIndex > 0 ? this.states[currIndex - 1] : undefined;\n            const top = prevState?.top ?? 0;\n            const right = prevState?.right ?? 0;\n            const bottom = prevState?.bottom ?? 0;\n            const left = prevState?.left ?? 0;\n            Object.assign(currState, { top, right, bottom, left });\n            switch (placement) {\n                case 'top':\n                case 'bottom':\n                    currState[placement] +=\n                        currState.height ?? currState.element.offsetHeight;\n                    break;\n                case 'right':\n                case 'left':\n                    currState[placement] +=\n                        (this.isNoWidth(currState) ? 0 : currState.width) ??\n                            currState.element.offsetWidth;\n                    break;\n            }\n            currState.height = currState.width = undefined;\n            $(currState.element).css({\n                position: 'absolute',\n                top: placement === 'bottom' ? null : top,\n                right: placement === 'left' ? null : right,\n                bottom: placement === 'top' ? null : bottom,\n                left: placement === 'right' ? null : left,\n            });\n        });\n        // 更新完后，设置 layout-main 的 padding\n        const lastState = this.states[this.states.length - 1];\n        if (this.$main) {\n            this.$main.css({\n                paddingTop: lastState.top,\n                paddingRight: lastState.right,\n                paddingBottom: lastState.bottom,\n                paddingLeft: lastState.left,\n            });\n        }\n    }\n    /**\n     * 按 order 排序，order 相同时，按在 DOM 中的顺序排序\n     */\n    resort() {\n        const items = this.getItems();\n        this.states.sort((a, b) => {\n            const aOrder = a.element.order ?? 0;\n            const bOrder = b.element.order ?? 0;\n            if (aOrder > bOrder) {\n                return 1;\n            }\n            if (aOrder < bOrder) {\n                return -1;\n            }\n            if (items.indexOf(a.element) > items.indexOf(b.element)) {\n                return 1;\n            }\n            if (items.indexOf(a.element) < items.indexOf(b.element)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    /**\n     * 组件宽度是否为 0\n     * mdui-navigation-drawer 较为特殊，在为模态化时，占据的宽度为 0\n     */\n    isNoWidth(state) {\n        return (isNodeName(state.element, 'mdui-navigation-drawer') &&\n            // @ts-ignore\n            state.element.isModal);\n    }\n}\nconst layoutManagerMap = new WeakMap();\n/**\n * 获取 layout 实例\n */\nexport const getLayout = (element) => {\n    if (!layoutManagerMap.has(element)) {\n        layoutManagerMap.set(element, new LayoutManager());\n    }\n    return layoutManagerMap.get(element);\n};\n","import { __decorate } from \"tslib\";\nimport { property } from 'lit/decorators.js';\nimport { isNodeName } from '@mdui/jq/shared/helper.js';\nimport { MduiElement } from '@mdui/shared/base/mdui-element.js';\nimport { watch } from '@mdui/shared/decorators/watch.js';\nimport { getLayout } from './helper.js';\nexport class LayoutItemBase extends MduiElement {\n    constructor() {\n        super(...arguments);\n        // 父元素是否是 `mdui-layout`\n        this.isParentLayout = false;\n    }\n    /**\n     * 当前布局组件所处的位置，父类必须实现该 getter\n     */\n    get layoutPlacement() {\n        throw new Error('Must implement placement getter!');\n    }\n    // order 变更时，需要重新调整布局\n    onOrderChange() {\n        this.layoutManager?.updateOrder();\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        const parentElement = this.parentElement;\n        this.isParentLayout = isNodeName(parentElement, 'mdui-layout');\n        if (this.isParentLayout) {\n            this.layoutManager = getLayout(parentElement);\n            this.layoutManager.registerItem(this);\n        }\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        if (this.layoutManager) {\n            this.layoutManager.unregisterItem(this);\n        }\n    }\n}\n__decorate([\n    property({ type: Number, reflect: true })\n], LayoutItemBase.prototype, \"order\", void 0);\n__decorate([\n    watch('order', true)\n], LayoutItemBase.prototype, \"onOrderChange\", null);\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner:var(--mdui-shape-corner-none);--z-index:2000;position:fixed;right:0;bottom:0;left:0;display:flex;flex:0 0 auto;align-items:center;justify-content:flex-start;border-radius:var(--shape-corner) var(--shape-corner) 0 0;z-index:var(--z-index);transition:bottom var(--mdui-motion-duration-long2) var(--mdui-motion-easing-emphasized);padding:0 1rem;height:5rem;background-color:rgb(var(--mdui-color-surface-container));box-shadow:var(--mdui-elevation-level2)}:host([scroll-target]:not([scroll-target=''])){position:absolute}:host([hide]){transition-duration:var(--mdui-motion-duration-short4);bottom:-5.625rem}::slotted(:not(:first-child)){margin-left:.5rem}::slotted(mdui-fab){box-shadow:var(--mdui-elevation-level0)}:host([fab-detach]) ::slotted(mdui-fab){position:absolute;transition:bottom var(--mdui-motion-duration-long2) var(--mdui-motion-easing-standard);right:1rem;bottom:.75rem}:host([fab-detach][hide][scroll-behavior~=hide]) ::slotted(mdui-fab){transition-duration:var(--mdui-motion-duration-short4);bottom:1rem;box-shadow:var(--mdui-elevation-level2)}:host([fab-detach][hide][scroll-behavior~=hide][scroll-target]:not([scroll-target=''])) ::slotted(mdui-fab){bottom:6.625rem}:host([hide]) ::slotted(:not(mdui-fab)),:host([hide]:not([fab-detach])) ::slotted(mdui-fab){transform:translateY(8.75rem);transition:transform var(--mdui-motion-duration-0) var(--mdui-motion-easing-emphasized-accelerate) var(--mdui-motion-duration-short4)}::slotted(:first-child){transition:transform var(--mdui-motion-duration-short3) var(--mdui-motion-easing-emphasized-decelerate) var(--mdui-motion-duration-short1)}::slotted(:nth-child(2)){transition:transform var(--mdui-motion-duration-short3) var(--mdui-motion-easing-emphasized-decelerate) var(--mdui-motion-duration-short3)}::slotted(:nth-child(3)){transition:transform var(--mdui-motion-duration-short3) var(--mdui-motion-easing-emphasized-decelerate) var(--mdui-motion-duration-short4)}::slotted(:nth-child(4)){transition:transform var(--mdui-motion-duration-short3) var(--mdui-motion-easing-emphasized-decelerate) var(--mdui-motion-duration-medium1)}::slotted(:nth-child(5)){transition:transform var(--mdui-motion-duration-short3) var(--mdui-motion-easing-emphasized-decelerate) var(--mdui-motion-duration-medium2)}::slotted(:nth-child(6)){transition:transform var(--mdui-motion-duration-short3) var(--mdui-motion-easing-emphasized-decelerate) var(--mdui-motion-duration-medium3)}`;\n","import { __decorate } from \"tslib\";\nimport { html } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { booleanConverter } from '@mdui/shared/helpers/decorator.js';\nimport { componentStyle } from '@mdui/shared/lit-styles/component-style.js';\nimport { ScrollBehaviorMixin } from '@mdui/shared/mixins/scrollBehavior.js';\nimport { LayoutItemBase } from '../layout/layout-item-base.js';\nimport { style } from './style.js';\n/**\n * @summary 底部应用栏组件\n *\n * ```html\n * <mdui-bottom-app-bar>\n * ..<mdui-button-icon icon=\"check_box--outlined\"></mdui-button-icon>\n * ..<mdui-button-icon icon=\"edit--outlined\"></mdui-button-icon>\n * ..<mdui-button-icon icon=\"mic_none--outlined\"></mdui-button-icon>\n * ..<mdui-button-icon icon=\"image--outlined\"></mdui-button-icon>\n * ..<div style=\"flex-grow: 1\"></div>\n * ..<mdui-fab icon=\"add\"></mdui-fab>\n * </mdui-bottom-app-bar>\n * ```\n *\n * @event show - 开始显示时，事件被触发。可以通过调用 `event.preventDefault()` 阻止显示\n * @event shown - 显示动画完成时，事件被触发\n * @event hide - 开始隐藏时，事件被触发。可以通过调用 `event.preventDefault()` 阻止隐藏\n * @event hidden - 隐藏动画完成时，事件被触发\n *\n * @slot - 底部应用栏内部的元素\n *\n * @cssprop --shape-corner - 组件的圆角大小。可以指定一个具体的像素值；但更推荐引用[设计令牌](/docs/2/styles/design-tokens#shape-corner)\n * @cssprop --z-index - 组件的 CSS `z-index` 值\n */\nlet BottomAppBar = class BottomAppBar extends ScrollBehaviorMixin(LayoutItemBase) {\n    constructor() {\n        super(...arguments);\n        /**\n         * 是否隐藏\n         */\n        this.hide = false;\n        /**\n         * 是否让底部应用栏中的 [`<mdui-fab>`](/docs/2/components/fab) 组件脱离应用栏。如果为 `true`，则当应用栏隐藏后，[`<mdui-fab>`](/docs/2/components/fab) 仍会停留在页面上\n         */\n        this.fabDetach = false;\n    }\n    get scrollPaddingPosition() {\n        return 'bottom';\n    }\n    get layoutPlacement() {\n        return 'bottom';\n    }\n    firstUpdated(_changedProperties) {\n        super.firstUpdated(_changedProperties);\n        this.addEventListener('transitionend', (event) => {\n            if (event.target === this) {\n                this.emit(this.hide ? 'hidden' : 'shown');\n            }\n        });\n    }\n    render() {\n        return html `<slot></slot>`;\n    }\n    /**\n     * 滚动行为\n     * 当前仅支持 hide 这一个行为，所以不做行为类型判断\n     */\n    runScrollThreshold(isScrollingUp) {\n        // 向下滚动\n        if (!isScrollingUp && !this.hide) {\n            const eventProceeded = this.emit('hide', { cancelable: true });\n            if (eventProceeded) {\n                this.hide = true;\n            }\n        }\n        // 向上滚动\n        if (isScrollingUp && this.hide) {\n            const eventProceeded = this.emit('show', { cancelable: true });\n            if (eventProceeded) {\n                this.hide = false;\n            }\n        }\n    }\n};\nBottomAppBar.styles = [componentStyle, style];\n__decorate([\n    property({\n        type: Boolean,\n        reflect: true,\n        converter: booleanConverter,\n    })\n], BottomAppBar.prototype, \"hide\", void 0);\n__decorate([\n    property({\n        type: Boolean,\n        reflect: true,\n        converter: booleanConverter,\n        attribute: 'fab-detach',\n    })\n], BottomAppBar.prototype, \"fabDetach\", void 0);\n__decorate([\n    property({ reflect: true, attribute: 'scroll-behavior' })\n], BottomAppBar.prototype, \"scrollBehavior\", void 0);\nBottomAppBar = __decorate([\n    customElement('mdui-bottom-app-bar')\n], BottomAppBar);\nexport { BottomAppBar };\n","import{nothing as t}from\"../lit-html.js\";import{AsyncDirective as i}from\"../async-directive.js\";import{directive as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=()=>new h;class h{}const o=new WeakMap,n=s(class extends i{render(i){return t}update(i,[s]){const e=s!==this.Y;return e&&void 0!==this.Y&&this.rt(void 0),(e||this.lt!==this.ct)&&(this.Y=s,this.ht=i.options?.host,this.rt(this.ct=i.element)),t}rt(t){if(this.isConnected||(t=void 0),\"function\"==typeof this.Y){const i=this.ht??globalThis;let s=o.get(i);void 0===s&&(s=new WeakMap,o.set(i,s)),void 0!==s.get(this.Y)&&this.Y.call(this.ht,void 0),s.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){return\"function\"==typeof this.Y?o.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});export{e as createRef,n as ref};\n//# sourceMappingURL=ref.js.map\n","export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","/**\n * 参考：https://github.com/shoelace-style/shoelace/blob/next/src/internal/form.ts\n */\nimport { $ } from '@mdui/jq/$.js';\nimport '@mdui/jq/methods/attr.js';\nimport '@mdui/jq/methods/css.js';\nimport { formCollections, getFormControls } from '@mdui/jq/shared/form.js';\nimport { isFunction, isString, isUndefined } from '@mdui/jq/shared/helper.js';\nimport { DefinedController } from './defined.js';\n/**\n * 在执行 `<form>` 元素的 reportValidity() 时，不会执行 mdui 组件的 reportValidity() 方法，\n * 因此在 mdui 表单控件的 hostConnected 中把 `<form>` 的 reportValidity 替换为自定义方法，\n * hostDisconnected 中恢复为 原生 reportValidity 方法\n *\n * 该 WeakMap 用于存储指定 `<form>` 的原生 reportValidity 方法\n *\n * 日后使用 ElementInternals 可不再进行该处理，但当前 safari 浏览器不支持。\n */\nconst reportValidityOverloads = new WeakMap();\n/**\n * 在执行表单的 reset() 方法后，使用该 WeakMap 存储指定表单中所有的表单控件\n * 在表单控件中监听值变更后，需要从该 WeakMap 中判断是否存在该表单控件，\n * 若存在，则 invalid 设置为 false（不显示验证不通过样式），同时从 WeakMap 中移除该表单控件\n */\nexport const formResets = new WeakMap();\nexport class FormController {\n    constructor(host, options) {\n        (this.host = host).addController(this);\n        this.definedController = new DefinedController(host, {\n            needDomReady: true,\n        });\n        this.options = {\n            form: (control) => {\n                const formId = $(control).attr('form');\n                if (formId) {\n                    const root = control.getRootNode();\n                    return root.getElementById(formId);\n                }\n                return control.closest('form');\n            },\n            name: (control) => control.name,\n            value: (control) => control.value,\n            defaultValue: (control) => control.defaultValue,\n            setValue: (control, value) => (control.value = value),\n            disabled: (control) => control.disabled,\n            reportValidity: (control) => isFunction(control.reportValidity) ? control.reportValidity() : true,\n            ...options,\n        };\n        this.onFormData = this.onFormData.bind(this);\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.onFormReset = this.onFormReset.bind(this);\n        this.reportFormValidity = this.reportFormValidity.bind(this);\n    }\n    hostConnected() {\n        this.definedController.whenDefined().then(() => {\n            this.form = this.options.form(this.host);\n            if (this.form) {\n                this.attachForm(this.form);\n            }\n        });\n    }\n    hostDisconnected() {\n        this.detachForm();\n    }\n    hostUpdated() {\n        this.definedController.whenDefined().then(() => {\n            const form = this.options.form(this.host);\n            if (!form) {\n                this.detachForm();\n            }\n            if (form && this.form !== form) {\n                this.detachForm();\n                this.attachForm(form);\n            }\n        });\n    }\n    /**\n     * 获取当前表单控件关联的 `<form>` 元素\n     */\n    getForm() {\n        return this.form ?? null;\n    }\n    /**\n     * 重置整个表单，所有表单控件恢复成默认值\n     */\n    reset(invoker) {\n        this.doAction('reset', invoker);\n    }\n    /**\n     * 提交整个表单\n     */\n    submit(invoker) {\n        this.doAction('submit', invoker);\n    }\n    attachForm(form) {\n        if (!form) {\n            this.form = undefined;\n            return;\n        }\n        this.form = form;\n        if (formCollections.has(this.form)) {\n            formCollections.get(this.form).add(this.host);\n        }\n        else {\n            formCollections.set(this.form, new Set([this.host]));\n        }\n        this.form.addEventListener('formdata', this.onFormData);\n        this.form.addEventListener('submit', this.onFormSubmit);\n        this.form.addEventListener('reset', this.onFormReset);\n        if (!reportValidityOverloads.has(this.form)) {\n            reportValidityOverloads.set(this.form, this.form.reportValidity);\n            this.form.reportValidity = () => this.reportFormValidity();\n        }\n    }\n    detachForm() {\n        if (this.form) {\n            formCollections.get(this.form).delete(this.host);\n            this.form.removeEventListener('formdata', this.onFormData);\n            this.form.removeEventListener('submit', this.onFormSubmit);\n            this.form.removeEventListener('reset', this.onFormReset);\n            if (reportValidityOverloads.has(this.form) &&\n                !formCollections.get(this.form).size) {\n                this.form.reportValidity = reportValidityOverloads.get(this.form);\n                reportValidityOverloads.delete(this.form);\n            }\n        }\n    }\n    doAction(type, invoker) {\n        if (!this.form) {\n            return;\n        }\n        const $button = $(`<button type=\"${type}\">`).css({\n            position: 'absolute',\n            width: 0,\n            height: 0,\n            clipPath: 'inset(50%)',\n            overflow: 'hidden',\n            whiteSpace: 'nowrap',\n        });\n        const button = $button[0];\n        if (invoker) {\n            button.name = invoker.name;\n            button.value = invoker.value;\n            [\n                'formaction',\n                'formenctype',\n                'formmethod',\n                'formnovalidate',\n                'formtarget',\n            ].forEach((attr) => {\n                $button.attr(attr, $(invoker).attr(attr));\n            });\n        }\n        this.form.append(button);\n        button.click();\n        button.remove();\n    }\n    onFormData(event) {\n        const disabled = this.options.disabled(this.host);\n        const name = this.options.name(this.host);\n        const value = this.options.value(this.host);\n        // 对于按钮，仅在 type=\"submit\" 时，才提交值。已在 doAction() 方法中把 name、value 注入到 <button> 元素上\n        const isButton = [\n            'mdui-button',\n            'mdui-button-icon',\n            'mdui-chip',\n            'mdui-fab',\n            'mdui-segmented-button',\n        ].includes(this.host.tagName.toLowerCase());\n        if (!disabled &&\n            !isButton &&\n            isString(name) &&\n            name &&\n            !isUndefined(value)) {\n            if (Array.isArray(value)) {\n                value.forEach((val) => {\n                    event.formData.append(name, val.toString());\n                });\n            }\n            else {\n                event.formData.append(name, value.toString());\n            }\n        }\n    }\n    // todo: 当前组件进行验证的顺序，取决于组件的注册顺序，而不会按在 DOM 中的顺序从上到下验证。如何按 DOM 顺序验证？\n    onFormSubmit(event) {\n        const disabled = this.options.disabled(this.host);\n        const reportValidity = this.options.reportValidity;\n        if (this.form &&\n            !this.form.noValidate &&\n            !disabled &&\n            !reportValidity(this.host)) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n        }\n    }\n    onFormReset() {\n        if (this.form) {\n            this.options.setValue(this.host, this.options.defaultValue(this.host));\n            // 取消 invalid 状态。\n            // 此外，还需要在各个组件内，监听值的变更，判断 formResets 中是否存在当前表单控件。若存在则 invalid 设为 false；不存在则设置为 checkValidity() 的值\n            // @ts-ignore\n            this.host.invalid = false;\n            if (formResets.has(this.form)) {\n                formResets.get(this.form).add(this.host);\n            }\n            else {\n                formResets.set(this.form, new Set([this.host]));\n            }\n        }\n    }\n    reportFormValidity() {\n        if (this.form && !this.form.noValidate) {\n            const elements = getFormControls(this.form);\n            for (const element of elements) {\n                if (isFunction(element.reportValidity) && !element.reportValidity()) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n}\n","import { __decorate } from \"tslib\";\nimport { html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nexport const AnchorMixin = (superclass) => {\n    class AnchorMixinClass extends superclass {\n        renderAnchor({ id, className, part, content = html `<slot></slot>`, refDirective, tabIndex, }) {\n            return html `<a\n        ${refDirective}\n        id=${ifDefined(id)}\n        class=\"_a ${className ? className : ''}\"\n        part=${ifDefined(part)}\n        href=${ifDefined(this.href)}\n        download=${ifDefined(this.download)}\n        target=${ifDefined(this.target)}\n        rel=${ifDefined(this.rel)}\n        tabindex=${ifDefined(tabIndex)}\n      >\n        ${content}\n      </a>`;\n        }\n    }\n    __decorate([\n        property({ reflect: true })\n    ], AnchorMixinClass.prototype, \"href\", void 0);\n    __decorate([\n        property({ reflect: true })\n    ], AnchorMixinClass.prototype, \"download\", void 0);\n    __decorate([\n        property({ reflect: true })\n    ], AnchorMixinClass.prototype, \"target\", void 0);\n    __decorate([\n        property({ reflect: true })\n    ], AnchorMixinClass.prototype, \"rel\", void 0);\n    return AnchorMixinClass;\n};\n","import{noChange as t}from\"../lit-html.js\";import{directive as s,Directive as i,PartType as r}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=s(class extends i{constructor(t){if(super(t),t.type!==r.ATTRIBUTE||\"class\"!==t.name||t.strings?.length>2)throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\")}render(t){return\" \"+Object.keys(t).filter((s=>t[s])).join(\" \")+\" \"}update(s,[i]){if(void 0===this.st){this.st=new Set,void 0!==s.strings&&(this.nt=new Set(s.strings.join(\" \").split(/\\s/).filter((t=>\"\"!==t))));for(const t in i)i[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(i)}const r=s.element.classList;for(const t of this.st)t in i||(r.remove(t),this.st.delete(t));for(const t in i){const s=!!i[t];s===this.st.has(t)||this.nt?.has(t)||(s?(r.add(t),this.st.add(t)):(r.remove(t),this.st.delete(t)))}return t}});export{e as classMap};\n//# sourceMappingURL=class-map.js.map\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner:var(--mdui-shape-corner-full);position:relative;display:inline-block;overflow:hidden;text-align:center;border-radius:var(--shape-corner);cursor:pointer;-webkit-tap-highlight-color:transparent;transition:box-shadow var(--mdui-motion-duration-short4) var(--mdui-motion-easing-linear);min-width:3rem;height:2.5rem;color:rgb(var(--mdui-color-primary));font-size:var(--mdui-typescale-label-large-size);font-weight:var(--mdui-typescale-label-large-weight);letter-spacing:var(--mdui-typescale-label-large-tracking);line-height:var(--mdui-typescale-label-large-line-height)}.button{width:100%;padding:0 1rem}:host([full-width]){display:block}:host([variant=elevated]){box-shadow:var(--mdui-elevation-level1);background-color:rgb(var(--mdui-color-surface-container-low));--mdui-comp-ripple-state-layer-color:var(--mdui-color-primary)}:host([variant=filled]){color:rgb(var(--mdui-color-on-primary));background-color:rgb(var(--mdui-color-primary));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-primary)}:host([variant=tonal]){color:rgb(var(--mdui-color-on-secondary-container));background-color:rgb(var(--mdui-color-secondary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-secondary-container\n    )}:host([variant=outlined]){border:.0625rem solid rgb(var(--mdui-color-outline));--mdui-comp-ripple-state-layer-color:var(--mdui-color-primary)}:host([variant=text]){--mdui-comp-ripple-state-layer-color:var(--mdui-color-primary)}:host([variant=outlined][focus-visible]){border-color:rgb(var(--mdui-color-primary))}:host([variant=elevated][hover]){box-shadow:var(--mdui-elevation-level2)}:host([variant=filled][hover]),:host([variant=tonal][hover]){box-shadow:var(--mdui-elevation-level1)}:host([disabled]),:host([loading]){cursor:default;pointer-events:none}:host([disabled]){color:rgba(var(--mdui-color-on-surface),38%);box-shadow:var(--mdui-elevation-level0)}:host([variant=elevated][disabled]),:host([variant=filled][disabled]),:host([variant=tonal][disabled]){background-color:rgba(var(--mdui-color-on-surface),12%)}:host([variant=outlined][disabled]){border-color:rgba(var(--mdui-color-on-surface),12%)}.label{display:inline-flex;padding-right:.5rem;padding-left:.5rem}.end-icon,.icon{display:inline-flex;font-size:1.28571429em}.end-icon mdui-icon,.icon mdui-icon,::slotted([slot=end-icon]),::slotted([slot=icon]){font-size:inherit}mdui-circular-progress{display:inline-flex;width:1.125rem;height:1.125rem}:host([variant=filled]) mdui-circular-progress{stroke:rgb(var(--mdui-color-on-primary))}:host([variant=tonal]) mdui-circular-progress{stroke:rgb(var(--mdui-color-on-secondary-container))}:host([disabled]) mdui-circular-progress{stroke:rgba(var(--mdui-color-on-surface),38%)}`;\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner:var(--mdui-shape-corner-full);position:relative;display:inline-block;overflow:hidden;text-align:center;border-radius:var(--shape-corner);cursor:pointer;-webkit-tap-highlight-color:transparent;font-size:1.5rem;width:2.5rem;min-width:2.5rem;height:2.5rem}:host([variant=standard]){color:rgb(var(--mdui-color-on-surface-variant));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface-variant)}:host([variant=filled]){color:rgb(var(--mdui-color-primary));background-color:rgb(var(--mdui-color-surface-container-highest));--mdui-comp-ripple-state-layer-color:var(--mdui-color-primary)}:host([variant=tonal]){color:rgb(var(--mdui-color-on-surface-variant));background-color:rgb(var(--mdui-color-surface-container-highest));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface-variant)}:host([variant=outlined]){border:.0625rem solid rgb(var(--mdui-color-outline));color:rgb(var(--mdui-color-on-surface-variant));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface-variant)}:host([variant=outlined][pressed]){color:rgb(var(--mdui-color-on-surface));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface)}:host([variant=standard][selected]){color:rgb(var(--mdui-color-primary));--mdui-comp-ripple-state-layer-color:var(--mdui-color-primary)}:host([variant=filled]:not([selectable])),:host([variant=filled][selected]){color:rgb(var(--mdui-color-on-primary));background-color:rgb(var(--mdui-color-primary));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-primary)}:host([variant=tonal]:not([selectable])),:host([variant=tonal][selected]){color:rgb(var(--mdui-color-on-secondary-container));background-color:rgb(var(--mdui-color-secondary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-secondary-container\n    )}:host([variant=outlined][selected]){border:none;color:rgb(var(--mdui-color-inverse-on-surface));background-color:rgb(var(--mdui-color-inverse-surface));--mdui-comp-ripple-state-layer-color:var(--mdui-color-inverse-on-surface)}:host([variant=filled][disabled]),:host([variant=outlined][disabled]),:host([variant=tonal][disabled]){background-color:rgba(var(--mdui-color-on-surface),.12);border-color:rgba(var(--mdui-color-on-surface),.12)}:host([disabled]),:host([loading]){cursor:default;pointer-events:none}:host([disabled]){color:rgba(var(--mdui-color-on-surface),.38)!important}:host([loading]) .button,:host([loading]) mdui-ripple{opacity:0}.button{float:left;width:100%}.icon,.selected-icon mdui-icon,::slotted(*){font-size:inherit}mdui-circular-progress{display:flex;position:absolute;top:calc(50% - 1.5rem / 2);left:calc(50% - 1.5rem / 2);width:1.5rem;height:1.5rem}:host([variant=filled]:not([disabled])) mdui-circular-progress{stroke:rgb(var(--mdui-color-on-primary))}:host([disabled]) mdui-circular-progress{stroke:rgba(var(--mdui-color-on-surface),38%)}`;\n","import{noChange as r,nothing as e}from\"../lit-html.js\";import{directive as i,Directive as t,PartType as n}from\"../directive.js\";import{isSingleExpression as o,setCommittedValue as s}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const l=i(class extends t{constructor(r){if(super(r),r.type!==n.PROPERTY&&r.type!==n.ATTRIBUTE&&r.type!==n.BOOLEAN_ATTRIBUTE)throw Error(\"The `live` directive is not allowed on child or event bindings\");if(!o(r))throw Error(\"`live` bindings can only contain a single expression\")}render(r){return r}update(i,[t]){if(t===r||t===e)return t;const o=i.element,l=i.name;if(i.type===n.PROPERTY){if(t===o[l])return r}else if(i.type===n.BOOLEAN_ATTRIBUTE){if(!!t===o.hasAttribute(l))return r}else if(i.type===n.ATTRIBUTE&&o.getAttribute(l)===t+\"\")return r;return s(i),t}});export{l as live};\n//# sourceMappingURL=live.js.map\n","import { css } from 'lit';\nexport const style = css `\n  :host {\n    display: inline-block;\n    width: 1em;\n    height: 1em;\n    line-height: 1;\n    font-size: 1.5rem;\n  }\n`;\n","import { html } from 'lit';\nimport { unsafeSVG } from 'lit/directives/unsafe-svg.js';\nexport const svgTag = (svgPaths) => html `<svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"100%\"\n    height=\"100%\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n  >\n    ${unsafeSVG(svgPaths)}\n  </svg>`;\n","import { __decorate } from \"tslib\";\nimport { LitElement } from 'lit';\nimport { customElement } from 'lit/decorators/custom-element.js';\nimport { style } from './shared/style.js';\nimport { svgTag } from './shared/svg-tag.js';\nlet IconCheckBoxOutlineBlank = class IconCheckBoxOutlineBlank extends LitElement {\n    render() {\n        return svgTag('<path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/>');\n    }\n};\nIconCheckBoxOutlineBlank.styles = style;\nIconCheckBoxOutlineBlank = __decorate([\n    customElement('mdui-icon-check-box-outline-blank')\n], IconCheckBoxOutlineBlank);\nexport { IconCheckBoxOutlineBlank };\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner:var(--mdui-shape-corner-small);position:relative;display:inline-block;overflow:hidden;border-radius:var(--shape-corner);cursor:pointer;-webkit-tap-highlight-color:transparent;transition:box-shadow var(--mdui-motion-duration-short4) var(--mdui-motion-easing-linear);height:2rem;background-color:rgb(var(--mdui-color-surface));border:.0625rem solid rgb(var(--mdui-color-outline));color:rgb(var(--mdui-color-on-surface-variant));font-size:var(--mdui-typescale-label-large-size);font-weight:var(--mdui-typescale-label-large-weight);letter-spacing:var(--mdui-typescale-label-large-tracking);line-height:var(--mdui-typescale-label-large-line-height);--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface-variant)}.button{padding-right:.4375rem;padding-left:.4375rem}:host([variant=input]) .button{padding-right:.1875rem;padding-left:.1875rem}:host([selected]) .button{padding-right:.5rem;padding-left:.5rem}:host([selected][variant=input]) .button{padding-right:.25rem;padding-left:.25rem}:host([elevated]) .button{padding-right:.5rem;padding-left:.5rem}:host([variant=assist]){color:rgb(var(--mdui-color-on-surface));--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface)}:host([elevated]){border-width:0;background-color:rgb(var(--mdui-color-surface-container-low));box-shadow:var(--mdui-elevation-level1)}:host([selected]){color:rgb(var(--mdui-color-on-secondary-container));background-color:rgb(var(--mdui-color-secondary-container));border-width:0;--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-secondary-container\n    )}:host([disabled]),:host([loading]){cursor:default;pointer-events:none}:host([disabled]){border-color:rgba(var(--mdui-color-on-surface),12%);color:rgba(var(--mdui-color-on-surface),38%);box-shadow:var(--mdui-elevation-level0)}:host([disabled][elevated]),:host([disabled][selected]){background-color:rgba(var(--mdui-color-on-surface),12%)}:host([selected][hover]){box-shadow:var(--mdui-elevation-level1)}:host([elevated][hover]){color:rgb(var(--mdui-color-on-secondary-container));box-shadow:var(--mdui-elevation-level2)}:host([variant=filter][hover]),:host([variant=input][hover]),:host([variant=suggestion][hover]){color:rgb(var(--mdui-color-on-surface-variant))}:host([variant=filter][focus-visible]),:host([variant=input][focus-visible]),:host([variant=suggestion][focus-visible]){border-color:rgb(var(--mdui-color-on-surface-variant))}:host([dragged]),:host([dragged][hover]){box-shadow:var(--mdui-elevation-level4)}.button{overflow:visible}.label{display:inline-flex;padding-right:.5rem;padding-left:.5rem}.end-icon,.icon,.selected-icon{display:inline-flex;font-size:1.28571429em;color:rgb(var(--mdui-color-on-surface-variant))}:host([variant=assist]) .end-icon,:host([variant=assist]) .icon,:host([variant=assist]) .selected-icon{color:rgb(var(--mdui-color-primary))}:host([selected]) .end-icon,:host([selected]) .icon,:host([selected]) .selected-icon{color:rgb(var(--mdui-color-on-secondary-container))}:host([disabled]) .end-icon,:host([disabled]) .icon,:host([disabled]) .selected-icon{opacity:.38;color:rgb(var(--mdui-color-on-surface))}.end-icon .i,.icon .i,.selected-icon .i,::slotted([slot=end-icon]),::slotted([slot=icon]),::slotted([slot=selected-icon]){font-size:inherit}:host([variant=input]) .has-icon .icon,:host([variant=input]) .has-icon .selected-icon,:host([variant=input]) .has-icon mdui-circular-progress{margin-left:.25rem}:host([variant=input]) .has-end-icon .end-icon{margin-right:.25rem}mdui-circular-progress{display:inline-flex;width:1.125rem;height:1.125rem}:host([disabled]) mdui-circular-progress{stroke:rgba(var(--mdui-color-on-surface),38%)}::slotted(mdui-avatar[slot=end-icon]),::slotted(mdui-avatar[slot=icon]),::slotted(mdui-avatar[slot=selected-icon]){width:1.5rem;height:1.5rem}:host([disabled]) ::slotted(mdui-avatar[slot=end-icon]),:host([disabled]) ::slotted(mdui-avatar[slot=icon]),:host([disabled]) ::slotted(mdui-avatar[slot=selected-icon]){opacity:.38}::slotted(mdui-avatar[slot=icon]),::slotted(mdui-avatar[slot=selected-icon]){margin-left:-.25rem;margin-right:-.125rem}::slotted(mdui-avatar[slot=end-icon]){margin-right:-.25rem;margin-left:-.125rem}.delete-icon{display:inline-flex;font-size:1.28571429em;transition:background-color var(--mdui-motion-duration-short4) var(--mdui-motion-easing-linear);border-radius:var(--mdui-shape-corner-full);margin-right:-.25rem;margin-left:-.25rem;padding:.25rem;color:rgb(var(--mdui-color-on-surface-variant))}.delete-icon:hover{background-color:rgba(var(--mdui-color-on-surface-variant),12%)}.has-end-icon .delete-icon{margin-left:.25rem}:host([variant=assiat]) .delete-icon{color:rgb(var(--mdui-color-primary))}:host([variant=input]) .delete-icon{margin-right:.0625rem}:host([disabled]) .delete-icon{color:rgba(var(--mdui-color-on-surface),38%)}.delete-icon .i,::slotted([slot=delete-icon]){font-size:inherit}::slotted(mdui-avatar[slot=delete-icon]){width:1.125rem;height:1.125rem}`;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nfunction n(n,r,t){return n?r(n):t?.(n)}export{n as when};\n//# sourceMappingURL=when.js.map\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * Tag that allows expressions to be used in localized non-HTML template\n * strings.\n *\n * Example: msg(str`Hello ${this.user}!`);\n *\n * The Lit html tag can also be used for this purpose, but HTML will need to be\n * escaped, and there is a small overhead for HTML parsing.\n *\n * Untagged template strings with expressions aren't supported by lit-localize\n * because they don't allow for values to be captured at runtime.\n */\nconst _str = (strings, ...values) => ({\n    strTag: true,\n    strings,\n    values,\n});\nexport const str = _str;\nexport const isStrTagged = (val) => typeof val !== 'string' && 'strTag' in val;\n/**\n * Render the result of a `str` tagged template to a string. Note we don't need\n * to do this for Lit templates, since Lit itself handles rendering.\n */\nexport const joinStringsAndValues = (strings, values, valueOrder) => {\n    let concat = strings[0];\n    for (let i = 1; i < strings.length; i++) {\n        concat += values[valueOrder ? valueOrder[i - 1] : i - 1];\n        concat += strings[i];\n    }\n    return concat;\n};\n//# sourceMappingURL=str-tag.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { isStrTagged, joinStringsAndValues } from './str-tag.js';\n/**\n * Default identity msg implementation. Simply returns the input template with\n * no awareness of translations. If the template is str-tagged, returns it in\n * string form.\n */\nexport const defaultMsg = ((template) => isStrTagged(template)\n    ? joinStringsAndValues(template.strings, template.values)\n    : template);\n//# sourceMappingURL=default-msg.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * Name of the event dispatched to `window` whenever a locale change starts,\n * finishes successfully, or fails. Only relevant to runtime mode.\n *\n * The `detail` of this event is an object with a `status` string that can be:\n * \"loading\", \"ready\", or \"error\", along with the relevant locale code, and\n * error message if applicable.\n *\n * You can listen for this event to know when your application should be\n * re-rendered following a locale change. See also the Localized mixin, which\n * automatically re-renders LitElement classes using this event.\n */\nexport const LOCALE_STATUS_EVENT = 'lit-localize-status';\n//# sourceMappingURL=locale-status-event.js.map","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nexport class Deferred {\n    constructor() {\n        this.settled = false;\n        this.promise = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n    resolve(value) {\n        this.settled = true;\n        this._resolve(value);\n    }\n    reject(error) {\n        this.settled = true;\n        this._reject(error);\n    }\n}\n//# sourceMappingURL=deferred.js.map","/**\n * @license\n * Copyright 2014 Travis Webb\n * SPDX-License-Identifier: MIT\n */\n// This module is derived from the file:\n// https://github.com/tjwebb/fnv-plus/blob/1e2ce68a07cb7dd4c3c85364f3d8d96c95919474/index.js#L309\n//\n// Changes:\n// - Only the _hash64_1a_fast function is included.\n// - Removed loop unrolling.\n// - Converted to TypeScript ES module.\n// - var -> let/const\n//\n// TODO(aomarks) Upstream improvements to https://github.com/tjwebb/fnv-plus/.\nconst hl = [];\nfor (let i = 0; i < 256; i++) {\n    hl[i] = ((i >> 4) & 15).toString(16) + (i & 15).toString(16);\n}\n/**\n * Perform a FNV-1A 64-bit hash of the given string (as UTF-16 code units), and\n * return a hexadecimal digest (left zero padded to 16 characters).\n *\n * @see {@link http://tools.ietf.org/html/draft-eastlake-fnv-06}\n */\nexport function fnv1a64(str) {\n    let t0 = 0, v0 = 0x2325, t1 = 0, v1 = 0x8422, t2 = 0, v2 = 0x9ce4, t3 = 0, v3 = 0xcbf2;\n    for (let i = 0; i < str.length; i++) {\n        v0 ^= str.charCodeAt(i);\n        t0 = v0 * 435;\n        t1 = v1 * 435;\n        t2 = v2 * 435;\n        t3 = v3 * 435;\n        t2 += v0 << 8;\n        t3 += v1 << 8;\n        t1 += t0 >>> 16;\n        v0 = t0 & 65535;\n        t2 += t1 >>> 16;\n        v1 = t1 & 65535;\n        v3 = (t3 + (t2 >>> 16)) & 65535;\n        v2 = t2 & 65535;\n    }\n    return (hl[v3 >> 8] +\n        hl[v3 & 255] +\n        hl[v2 >> 8] +\n        hl[v2 & 255] +\n        hl[v1 >> 8] +\n        hl[v1 & 255] +\n        hl[v0 >> 8] +\n        hl[v0 & 255]);\n}\n//# sourceMappingURL=fnv1a64.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { _installMsgImplementation } from '../lit-localize.js';\nimport { Deferred } from '../internal/deferred.js';\nimport { LOCALE_STATUS_EVENT } from '../internal/locale-status-event.js';\nimport { runtimeMsg } from '../internal/runtime-msg.js';\n/**\n * Dispatch a \"lit-localize-status\" event to `window` with the given detail.\n */\nfunction dispatchStatusEvent(detail) {\n    window.dispatchEvent(new CustomEvent(LOCALE_STATUS_EVENT, { detail }));\n}\nlet activeLocale = '';\nlet loadingLocale;\nlet sourceLocale;\nlet validLocales;\nlet loadLocale;\nlet templates;\nlet loading = new Deferred();\n// The loading promise must be initially resolved, because that's what we should\n// return if the user immediately calls setLocale(sourceLocale).\nloading.resolve();\nlet requestId = 0;\n/**\n * Set configuration parameters for lit-localize when in runtime mode. Returns\n * an object with functions:\n *\n * - `getLocale`: Return the active locale code.\n * - `setLocale`: Set the active locale code.\n *\n * Throws if called more than once.\n */\nexport const configureLocalization = (config) => {\n    _installMsgImplementation(((template, options) => runtimeMsg(templates, template, options)));\n    activeLocale = sourceLocale = config.sourceLocale;\n    validLocales = new Set(config.targetLocales);\n    validLocales.add(config.sourceLocale);\n    loadLocale = config.loadLocale;\n    return { getLocale, setLocale };\n};\n/**\n * Return the active locale code.\n */\nconst getLocale = () => {\n    return activeLocale;\n};\n/**\n * Set the active locale code, and begin loading templates for that locale using\n * the `loadLocale` function that was passed to `configureLocalization`. Returns\n * a promise that resolves when the next locale is ready to be rendered.\n *\n * Note that if a second call to `setLocale` is made while the first requested\n * locale is still loading, then the second call takes precedence, and the\n * promise returned from the first call will resolve when second locale is\n * ready. If you need to know whether a particular locale was loaded, check\n * `getLocale` after the promise resolves.\n *\n * Throws if the given locale is not contained by the configured `sourceLocale`\n * or `targetLocales`.\n */\nconst setLocale = (newLocale) => {\n    if (newLocale === (loadingLocale ?? activeLocale)) {\n        return loading.promise;\n    }\n    if (!validLocales || !loadLocale) {\n        throw new Error('Internal error');\n    }\n    if (!validLocales.has(newLocale)) {\n        throw new Error('Invalid locale code');\n    }\n    requestId++;\n    const thisRequestId = requestId;\n    loadingLocale = newLocale;\n    if (loading.settled) {\n        loading = new Deferred();\n    }\n    dispatchStatusEvent({ status: 'loading', loadingLocale: newLocale });\n    const localePromise = newLocale === sourceLocale\n        ? // We could switch to the source locale synchronously, but we prefer to\n            // queue it on a microtask so that switching locales is consistently\n            // asynchronous.\n            Promise.resolve({ templates: undefined })\n        : loadLocale(newLocale);\n    localePromise.then((mod) => {\n        if (requestId === thisRequestId) {\n            activeLocale = newLocale;\n            loadingLocale = undefined;\n            templates = mod.templates;\n            dispatchStatusEvent({ status: 'ready', readyLocale: newLocale });\n            loading.resolve();\n        }\n        // Else another locale was requested in the meantime. Don't resolve or\n        // reject, because the newer load call is going to use the same promise.\n        // Note the user can call getLocale() after the promise resolves if they\n        // need to check if the locale is still the one they expected to load.\n    }, (err) => {\n        if (requestId === thisRequestId) {\n            dispatchStatusEvent({\n                status: 'error',\n                errorLocale: newLocale,\n                errorMessage: err.toString(),\n            });\n            loading.reject(err);\n        }\n    });\n    return loading.promise;\n};\n//# sourceMappingURL=runtime.js.map","/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport { defaultMsg } from './internal/default-msg.js';\nexport * from './internal/locale-status-event.js';\nexport * from './internal/str-tag.js';\nexport * from './internal/types.js';\n// TODO(aomarks) In a future breaking version, remove these imports so that the\n// bulk of the code isn't included in bundles by default. In particular imagine\n// the component library use-case where msg() calls are made, but there is no\n// need to actually initialize any of the localization runtime.\nexport * from './internal/localized-controller.js';\nexport * from './internal/localized-decorator.js';\nexport * from './init/runtime.js';\nexport * from './init/transform.js';\n/**\n * Make a string or lit-html template localizable.\n *\n * @param template A string, a lit-html template, or a function that returns\n * either a string or lit-html template.\n * @param options Optional configuration object with the following properties:\n *   - id: Optional project-wide unique identifier for this template. If\n *     omitted, an id will be automatically generated from the template strings.\n *   - desc: Optional description\n */\nexport let msg = defaultMsg;\nlet installed = false;\n/**\n * Internal only. Do not use this function.\n *\n * Installs an implementation of the msg function to replace the default\n * identity function. Throws if called more than once.\n *\n * @internal\n */\nexport function _installMsgImplementation(impl) {\n    if (installed) {\n        throw new Error('lit-localize can only be configured once');\n    }\n    msg = impl;\n    installed = true;\n}\n//# sourceMappingURL=lit-localize.js.map","import { configureLocalization, LOCALE_STATUS_EVENT } from '@lit/localize';\nimport { getWindow } from 'ssr-window';\nimport { sourceLocale, targetLocales } from './localeCodes.js';\nexport const uninitializedError = 'You must call `loadLocale` first to set up the localized template.';\nexport let getLocale;\nexport let setLocale;\n/**\n * 初始化 localization\n * @param loadFunc\n */\nexport const initializeLocalize = (loadFunc) => {\n    const window = getWindow();\n    const result = configureLocalization({\n        sourceLocale,\n        targetLocales,\n        loadLocale: loadFunc,\n    });\n    getLocale = result.getLocale;\n    setLocale = result.setLocale;\n    window.addEventListener(LOCALE_STATUS_EVENT, (event) => {\n        window.dispatchEvent(new CustomEvent('mdui-localize-status', {\n            detail: event.detail,\n        }));\n    });\n};\nlet listeningLitLocalizeStatus = false;\nconst localeReadyCallbacksMap = new Map();\n/**\n * 监听 localize ready 事件\n * @param target\n * @param callback\n */\nexport const onLocaleReady = (target, callback) => {\n    if (!listeningLitLocalizeStatus) {\n        listeningLitLocalizeStatus = true;\n        const window = getWindow();\n        window.addEventListener(LOCALE_STATUS_EVENT, (event) => {\n            if (event.detail.status === 'ready') {\n                localeReadyCallbacksMap.forEach((callbacks) => {\n                    callbacks.forEach((cb) => cb());\n                });\n            }\n        });\n    }\n    const callbacks = localeReadyCallbacksMap.get(target) || [];\n    callbacks.push(callback);\n    localeReadyCallbacksMap.set(target, callbacks);\n};\n/**\n * 取消监听 localize ready 事件\n * @param target\n */\nexport const offLocaleReady = (target) => {\n    localeReadyCallbacksMap.delete(target);\n};\n","import { css } from 'lit';\nexport const style = css `:host{--shape-corner-small:var(--mdui-shape-corner-small);--shape-corner-normal:var(--mdui-shape-corner-large);--shape-corner-large:var(--mdui-shape-corner-extra-large);position:relative;display:inline-block;overflow:hidden;text-align:center;border-radius:var(--shape-corner-normal);cursor:pointer;-webkit-tap-highlight-color:transparent;transition-property:box-shadow;transition-timing-function:var(--mdui-motion-easing-emphasized);transition-duration:var(--mdui-motion-duration-medium4);width:3.5rem;height:3.5rem;box-shadow:var(--mdui-elevation-level3);font-size:var(--mdui-typescale-label-large-size);font-weight:var(--mdui-typescale-label-large-weight);letter-spacing:var(--mdui-typescale-label-large-tracking);line-height:var(--mdui-typescale-label-large-line-height)}.button{padding:0 1rem}:host([size=small]) .button{padding:0 .5rem}:host([size=large]) .button{padding:0 1.875rem}:host([lowered]){box-shadow:var(--mdui-elevation-level1)}:host([focus-visible]){box-shadow:var(--mdui-elevation-level3)}:host([lowered][focus-visible]){box-shadow:var(--mdui-elevation-level1)}:host([pressed]){box-shadow:var(--mdui-elevation-level3)}:host([lowered][pressed]){box-shadow:var(--mdui-elevation-level1)}:host([hover]){box-shadow:var(--mdui-elevation-level4)}:host([lowered][hover]){box-shadow:var(--mdui-elevation-level2)}:host([variant=primary]){color:rgb(var(--mdui-color-on-primary-container));background-color:rgb(var(--mdui-color-primary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-primary-container\n    )}:host([variant=surface]){color:rgb(var(--mdui-color-primary));background-color:rgb(var(--mdui-color-surface-container-high));--mdui-comp-ripple-state-layer-color:var(--mdui-color-primary)}:host([variant=surface][lowered]){background-color:rgb(var(--mdui-color-surface-container-low))}:host([variant=secondary]){color:rgb(var(--mdui-color-on-secondary-container));background-color:rgb(var(--mdui-color-secondary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-secondary-container\n    )}:host([variant=tertiary]){color:rgb(var(--mdui-color-on-tertiary-container));background-color:rgb(var(--mdui-color-tertiary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-tertiary-container\n    )}:host([size=small]){border-radius:var(--shape-corner-small);width:2.5rem;height:2.5rem}:host([size=large]){border-radius:var(--shape-corner-large);width:6rem;height:6rem}:host([disabled]),:host([loading]){cursor:default;pointer-events:none}:host([disabled]){color:rgba(var(--mdui-color-on-surface),38%);background-color:rgba(var(--mdui-color-on-surface),12%);box-shadow:var(--mdui-elevation-level0)}:host([extended]){width:auto}.label{display:inline-flex;transition:opacity var(--mdui-motion-duration-short2) var(--mdui-motion-easing-linear) var(--mdui-motion-duration-short2);padding-left:.25rem;padding-right:.25rem}.has-icon .label{margin-left:.5rem}:host([size=small]) .has-icon .label{margin-left:.25rem}:host([size=large]) .has-icon .label{margin-left:1rem}:host(:not([extended])) .label{opacity:0;transition-delay:0s;transition-duration:var(--mdui-motion-duration-short1)}:host([size=large]) .label{font-size:1.5em}.icon{display:inline-flex;font-size:1.71428571em}:host([size=large]) .icon{font-size:2.57142857em}.icon mdui-icon,::slotted([slot=icon]){font-size:inherit}mdui-circular-progress{display:inline-flex;width:1.5rem;height:1.5rem}:host([size=large]) mdui-circular-progress{width:2.25rem;height:2.25rem}:host([disabled]) mdui-circular-progress{stroke:rgba(var(--mdui-color-on-surface),38%)}`;\n","import { css } from 'lit';\nexport const listItemStyle = css `:host{--shape-corner:var(--mdui-shape-corner-none);--shape-corner-rounded:var(--mdui-shape-corner-extra-large);position:relative;display:block;border-radius:var(--shape-corner);--mdui-comp-ripple-state-layer-color:var(--mdui-color-on-surface)}:host([rounded]),:host([rounded]) mdui-ripple{border-radius:var(--shape-corner-rounded)}:host([active]){background-color:rgb(var(--mdui-color-secondary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-secondary-container\n    )}:host([disabled]){pointer-events:none}.container{cursor:pointer;-webkit-user-select:none;user-select:none;text-decoration:none;color:inherit;-webkit-tap-highlight-color:transparent}:host([disabled]) .container{cursor:default;opacity:.38}:host([nonclickable]:not([href])) .container{cursor:auto;-webkit-user-select:auto;user-select:auto}.preset{display:flex;align-items:center;padding:.5rem 1.5rem .5rem 1rem;min-height:3.5rem}:host([alignment=start]) .preset{align-items:flex-start}:host([alignment=end]) .preset{align-items:flex-end}.body{display:flex;flex:1 1 100%;flex-direction:column;justify-content:center;min-width:0}.headline{display:block;color:rgb(var(--mdui-color-on-surface));font-size:var(--mdui-typescale-body-large-size);font-weight:var(--mdui-typescale-body-large-weight);letter-spacing:var(--mdui-typescale-body-large-tracking);line-height:var(--mdui-typescale-body-large-line-height)}:host([active]) .headline{color:rgb(var(--mdui-color-on-secondary-container))}.description{display:none;color:rgb(var(--mdui-color-on-surface-variant));font-size:var(--mdui-typescale-body-medium-size);font-weight:var(--mdui-typescale-body-medium-weight);letter-spacing:var(--mdui-typescale-body-medium-tracking);line-height:var(--mdui-typescale-body-medium-line-height)}:host([disabled]) .description,:host([focused]) .description,:host([hover]) .description,:host([pressed]) .description{color:rgb(var(--mdui-color-on-surface))}.has-description .description{display:block}:host([description-line='1']) .description,:host([headline-line='1']) .headline{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}:host([description-line='2']) .description,:host([description-line='3']) .description,:host([headline-line='2']) .headline,:host([headline-line='3']) .headline{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}:host([description-line='2']) .description,:host([headline-line='2']) .headline{-webkit-line-clamp:2}:host([description-line='3']) .description,:host([headline-line='3']) .headline{-webkit-line-clamp:3}.end-icon,.icon{display:flex;flex:0 0 auto;font-size:var(--mdui-typescale-label-small-size);font-weight:var(--mdui-typescale-label-small-weight);letter-spacing:var(--mdui-typescale-label-small-tracking);line-height:var(--mdui-typescale-label-small-line-height);color:rgb(var(--mdui-color-on-surface-variant))}:host([disabled]) .end-icon,:host([disabled]) .icon,:host([focused]) .end-icon,:host([focused]) .icon,:host([hover]) .end-icon,:host([hover]) .icon,:host([pressed]) .end-icon,:host([pressed]) .icon{color:rgb(var(--mdui-color-on-surface))}:host([active]) .end-icon,:host([active]) .icon{color:rgb(var(--mdui-color-on-secondary-container))}.end-icon mdui-icon,.icon mdui-icon,.is-end-icon ::slotted([slot=end-icon]),.is-icon ::slotted([slot=icon]){font-size:1.5rem}.has-icon .icon{margin-right:1rem}.has-icon ::slotted(mdui-checkbox[slot=icon]),.has-icon ::slotted(mdui-radio[slot=icon]){margin-left:-.5rem}.has-end-icon .end-icon{margin-left:1rem}.has-end-icon ::slotted(mdui-checkbox[slot=end-icon]),.has-end-icon ::slotted(mdui-radio[slot=end-icon]){margin-right:-.5rem}`;\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nfunction*o(o,f){if(void 0!==o){let i=0;for(const t of o)yield f(t,i++)}}export{o as map};\n//# sourceMappingURL=map.js.map\n","import { css } from 'lit';\nexport const segmentedButtonStyle = css `:host{position:relative;display:inline-flex;flex-grow:1;flex-shrink:0;float:left;height:100%;overflow:hidden;cursor:pointer;-webkit-tap-highlight-color:transparent;border:.0625rem solid rgb(var(--mdui-color-outline))}.button{width:100%;padding:0 .75rem}:host([invalid]){color:rgb(var(--mdui-color-error));border-color:rgb(var(--mdui-color-error))}:host([invalid]) .button{background-color:rgb(var(--mdui-color-error-container))}:host([selected]){color:rgb(var(--mdui-color-on-secondary-container));background-color:rgb(var(--mdui-color-secondary-container));--mdui-comp-ripple-state-layer-color:var(\n      --mdui-color-on-secondary-container\n    )}:host([disabled]),:host([group-disabled]){cursor:default;pointer-events:none;color:rgba(var(--mdui-color-on-surface),38%);border-color:rgba(var(--mdui-color-on-surface),12%)}:host([loading]){cursor:default;pointer-events:none}:host(:not(.mdui-segmented-button-first)){margin-left:-.0625rem}:host(.mdui-segmented-button-first){border-radius:var(--shape-corner) 0 0 var(--shape-corner)}:host(.mdui-segmented-button-last){border-radius:0 var(--shape-corner) var(--shape-corner) 0}.end-icon,.icon,.selected-icon{display:inline-flex;font-size:1.28571429em}.end-icon .i,.icon .i,.selected-icon .i,::slotted([slot=end-icon]),::slotted([slot=icon]),::slotted([slot=selected-icon]){font-size:inherit}mdui-circular-progress{width:1.125rem;height:1.125rem}:host([disabled]) mdui-circular-progress{opacity:.38}.label{display:inline-flex}.has-icon .label{padding-left:.5rem}.has-end-icon .label{padding-right:.5rem}`;\n","import isPromise from 'is-promise';\nimport { $ } from '@mdui/jq/$.js';\nimport '@mdui/jq/methods/append.js';\nimport '@mdui/jq/methods/appendTo.js';\nimport '@mdui/jq/methods/on.js';\nimport '@mdui/jq/methods/remove.js';\nimport { returnTrue, toKebabCase } from '@mdui/jq/shared/helper.js';\nimport { dequeue, queue } from '@mdui/shared/helpers/queue.js';\nimport '../components/button.js';\nimport { Dialog } from '../components/dialog.js';\nconst defaultAction = {\n    onClick: returnTrue,\n};\nconst queueName = 'mdui.functions.dialog.';\nlet currentDialog = undefined;\n/**\n * 打开一个 dialog，返回 dialog 实例\n * @param options\n */\nexport const dialog = (options) => {\n    const dialog = new Dialog();\n    const $dialog = $(dialog);\n    const properties = [\n        'headline',\n        'description',\n        'icon',\n        'closeOnEsc',\n        'closeOnOverlayClick',\n        'stackedActions',\n    ];\n    const callbacks = ['onOpen', 'onOpened', 'onClose', 'onClosed', 'onOverlayClick'];\n    Object.entries(options).forEach(([key, value]) => {\n        // @ts-ignore\n        if (properties.includes(key)) {\n            // @ts-ignore\n            dialog[key] = value;\n            // @ts-ignore\n        }\n        else if (callbacks.includes(key)) {\n            const eventName = toKebabCase(key.slice(2));\n            $dialog.on(eventName, () => {\n                value.call(dialog, dialog);\n            });\n        }\n    });\n    if (options.body) {\n        $dialog.append(options.body);\n    }\n    if (options.actions) {\n        options.actions.forEach((action) => {\n            const mergedAction = Object.assign({}, defaultAction, action);\n            $(`<mdui-button\n        slot=\"action\"\n        variant=\"text\"\n      >${mergedAction.text}</mdui-button>`)\n                .appendTo($dialog)\n                .on('click', function () {\n                const clickResult = mergedAction.onClick.call(dialog, dialog);\n                if (isPromise(clickResult)) {\n                    this.loading = true;\n                    clickResult\n                        .then(() => {\n                        dialog.open = false;\n                    })\n                        .finally(() => {\n                        this.loading = false;\n                    });\n                }\n                else if (clickResult !== false) {\n                    dialog.open = false;\n                }\n            });\n        });\n    }\n    $dialog.appendTo('body').on('closed', () => {\n        $dialog.remove();\n        if (options.queue) {\n            currentDialog = undefined;\n            dequeue(queueName + options.queue);\n        }\n    });\n    if (!options.queue) {\n        setTimeout(() => {\n            dialog.open = true;\n        });\n    }\n    else if (currentDialog) {\n        queue(queueName + options.queue, () => {\n            dialog.open = true;\n            currentDialog = dialog;\n        });\n    }\n    else {\n        setTimeout(() => {\n            dialog.open = true;\n        });\n        currentDialog = dialog;\n    }\n    return dialog;\n};\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// This file is automatically generated. Do not modify it.\n/**\n * Utility methods for mathematical operations.\n */\n/**\n * The signum function.\n *\n * @return 1 if num > 0, -1 if num < 0, and 0 if num = 0\n */\nexport function signum(num) {\n    if (num < 0) {\n        return -1;\n    }\n    else if (num === 0) {\n        return 0;\n    }\n    else {\n        return 1;\n    }\n}\n/**\n * The linear interpolation function.\n *\n * @return start if amount = 0 and stop if amount = 1\n */\nexport function lerp(start, stop, amount) {\n    return (1.0 - amount) * start + amount * stop;\n}\n/**\n * Clamps an integer between two integers.\n *\n * @return input when min <= input <= max, and either min or max\n * otherwise.\n */\nexport function clampInt(min, max, input) {\n    if (input < min) {\n        return min;\n    }\n    else if (input > max) {\n        return max;\n    }\n    return input;\n}\n/**\n * Clamps an integer between two floating-point numbers.\n *\n * @return input when min <= input <= max, and either min or max\n * otherwise.\n */\nexport function clampDouble(min, max, input) {\n    if (input < min) {\n        return min;\n    }\n    else if (input > max) {\n        return max;\n    }\n    return input;\n}\n/**\n * Sanitizes a degree measure as an integer.\n *\n * @return a degree measure between 0 (inclusive) and 360\n * (exclusive).\n */\nexport function sanitizeDegreesInt(degrees) {\n    degrees = degrees % 360;\n    if (degrees < 0) {\n        degrees = degrees + 360;\n    }\n    return degrees;\n}\n/**\n * Sanitizes a degree measure as a floating-point number.\n *\n * @return a degree measure between 0.0 (inclusive) and 360.0\n * (exclusive).\n */\nexport function sanitizeDegreesDouble(degrees) {\n    degrees = degrees % 360.0;\n    if (degrees < 0) {\n        degrees = degrees + 360.0;\n    }\n    return degrees;\n}\n/**\n * Sign of direction change needed to travel from one angle to\n * another.\n *\n * For angles that are 180 degrees apart from each other, both\n * directions have the same travel distance, so either direction is\n * shortest. The value 1.0 is returned in this case.\n *\n * @param from The angle travel starts from, in degrees.\n * @param to The angle travel ends at, in degrees.\n * @return -1 if decreasing from leads to the shortest travel\n * distance, 1 if increasing from leads to the shortest travel\n * distance.\n */\nexport function rotationDirection(from, to) {\n    const increasingDifference = sanitizeDegreesDouble(to - from);\n    return increasingDifference <= 180.0 ? 1.0 : -1.0;\n}\n/**\n * Distance of two points on a circle, represented using degrees.\n */\nexport function differenceDegrees(a, b) {\n    return 180.0 - Math.abs(Math.abs(a - b) - 180.0);\n}\n/**\n * Multiplies a 1x3 row vector with a 3x3 matrix.\n */\nexport function matrixMultiply(row, matrix) {\n    const a = row[0] * matrix[0][0] + row[1] * matrix[0][1] + row[2] * matrix[0][2];\n    const b = row[0] * matrix[1][0] + row[1] * matrix[1][1] + row[2] * matrix[1][2];\n    const c = row[0] * matrix[2][0] + row[1] * matrix[2][1] + row[2] * matrix[2][2];\n    return [a, b, c];\n}\n//# sourceMappingURL=math_utils.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// This file is automatically generated. Do not modify it.\nimport * as mathUtils from './math_utils.js';\n/**\n * Color science utilities.\n *\n * Utility methods for color science constants and color space\n * conversions that aren't HCT or CAM16.\n */\nconst SRGB_TO_XYZ = [\n    [0.41233895, 0.35762064, 0.18051042],\n    [0.2126, 0.7152, 0.0722],\n    [0.01932141, 0.11916382, 0.95034478],\n];\nconst XYZ_TO_SRGB = [\n    [\n        3.2413774792388685,\n        -1.5376652402851851,\n        -0.49885366846268053,\n    ],\n    [\n        -0.9691452513005321,\n        1.8758853451067872,\n        0.04156585616912061,\n    ],\n    [\n        0.05562093689691305,\n        -0.20395524564742123,\n        1.0571799111220335,\n    ],\n];\nconst WHITE_POINT_D65 = [95.047, 100.0, 108.883];\n/**\n * Converts a color from RGB components to ARGB format.\n */\nexport function argbFromRgb(red, green, blue) {\n    return (255 << 24 | (red & 255) << 16 | (green & 255) << 8 | blue & 255) >>>\n        0;\n}\n/**\n * Converts a color from linear RGB components to ARGB format.\n */\nexport function argbFromLinrgb(linrgb) {\n    const r = delinearized(linrgb[0]);\n    const g = delinearized(linrgb[1]);\n    const b = delinearized(linrgb[2]);\n    return argbFromRgb(r, g, b);\n}\n/**\n * Returns the alpha component of a color in ARGB format.\n */\nexport function alphaFromArgb(argb) {\n    return argb >> 24 & 255;\n}\n/**\n * Returns the red component of a color in ARGB format.\n */\nexport function redFromArgb(argb) {\n    return argb >> 16 & 255;\n}\n/**\n * Returns the green component of a color in ARGB format.\n */\nexport function greenFromArgb(argb) {\n    return argb >> 8 & 255;\n}\n/**\n * Returns the blue component of a color in ARGB format.\n */\nexport function blueFromArgb(argb) {\n    return argb & 255;\n}\n/**\n * Returns whether a color in ARGB format is opaque.\n */\nexport function isOpaque(argb) {\n    return alphaFromArgb(argb) >= 255;\n}\n/**\n * Converts a color from ARGB to XYZ.\n */\nexport function argbFromXyz(x, y, z) {\n    const matrix = XYZ_TO_SRGB;\n    const linearR = matrix[0][0] * x + matrix[0][1] * y + matrix[0][2] * z;\n    const linearG = matrix[1][0] * x + matrix[1][1] * y + matrix[1][2] * z;\n    const linearB = matrix[2][0] * x + matrix[2][1] * y + matrix[2][2] * z;\n    const r = delinearized(linearR);\n    const g = delinearized(linearG);\n    const b = delinearized(linearB);\n    return argbFromRgb(r, g, b);\n}\n/**\n * Converts a color from XYZ to ARGB.\n */\nexport function xyzFromArgb(argb) {\n    const r = linearized(redFromArgb(argb));\n    const g = linearized(greenFromArgb(argb));\n    const b = linearized(blueFromArgb(argb));\n    return mathUtils.matrixMultiply([r, g, b], SRGB_TO_XYZ);\n}\n/**\n * Converts a color represented in Lab color space into an ARGB\n * integer.\n */\nexport function argbFromLab(l, a, b) {\n    const whitePoint = WHITE_POINT_D65;\n    const fy = (l + 16.0) / 116.0;\n    const fx = a / 500.0 + fy;\n    const fz = fy - b / 200.0;\n    const xNormalized = labInvf(fx);\n    const yNormalized = labInvf(fy);\n    const zNormalized = labInvf(fz);\n    const x = xNormalized * whitePoint[0];\n    const y = yNormalized * whitePoint[1];\n    const z = zNormalized * whitePoint[2];\n    return argbFromXyz(x, y, z);\n}\n/**\n * Converts a color from ARGB representation to L*a*b*\n * representation.\n *\n * @param argb the ARGB representation of a color\n * @return a Lab object representing the color\n */\nexport function labFromArgb(argb) {\n    const linearR = linearized(redFromArgb(argb));\n    const linearG = linearized(greenFromArgb(argb));\n    const linearB = linearized(blueFromArgb(argb));\n    const matrix = SRGB_TO_XYZ;\n    const x = matrix[0][0] * linearR + matrix[0][1] * linearG + matrix[0][2] * linearB;\n    const y = matrix[1][0] * linearR + matrix[1][1] * linearG + matrix[1][2] * linearB;\n    const z = matrix[2][0] * linearR + matrix[2][1] * linearG + matrix[2][2] * linearB;\n    const whitePoint = WHITE_POINT_D65;\n    const xNormalized = x / whitePoint[0];\n    const yNormalized = y / whitePoint[1];\n    const zNormalized = z / whitePoint[2];\n    const fx = labF(xNormalized);\n    const fy = labF(yNormalized);\n    const fz = labF(zNormalized);\n    const l = 116.0 * fy - 16;\n    const a = 500.0 * (fx - fy);\n    const b = 200.0 * (fy - fz);\n    return [l, a, b];\n}\n/**\n * Converts an L* value to an ARGB representation.\n *\n * @param lstar L* in L*a*b*\n * @return ARGB representation of grayscale color with lightness\n * matching L*\n */\nexport function argbFromLstar(lstar) {\n    const y = yFromLstar(lstar);\n    const component = delinearized(y);\n    return argbFromRgb(component, component, component);\n}\n/**\n * Computes the L* value of a color in ARGB representation.\n *\n * @param argb ARGB representation of a color\n * @return L*, from L*a*b*, coordinate of the color\n */\nexport function lstarFromArgb(argb) {\n    const y = xyzFromArgb(argb)[1];\n    return 116.0 * labF(y / 100.0) - 16.0;\n}\n/**\n * Converts an L* value to a Y value.\n *\n * L* in L*a*b* and Y in XYZ measure the same quantity, luminance.\n *\n * L* measures perceptual luminance, a linear scale. Y in XYZ\n * measures relative luminance, a logarithmic scale.\n *\n * @param lstar L* in L*a*b*\n * @return Y in XYZ\n */\nexport function yFromLstar(lstar) {\n    return 100.0 * labInvf((lstar + 16.0) / 116.0);\n}\n/**\n * Converts a Y value to an L* value.\n *\n * L* in L*a*b* and Y in XYZ measure the same quantity, luminance.\n *\n * L* measures perceptual luminance, a linear scale. Y in XYZ\n * measures relative luminance, a logarithmic scale.\n *\n * @param y Y in XYZ\n * @return L* in L*a*b*\n */\nexport function lstarFromY(y) {\n    return labF(y / 100.0) * 116.0 - 16.0;\n}\n/**\n * Linearizes an RGB component.\n *\n * @param rgbComponent 0 <= rgb_component <= 255, represents R/G/B\n * channel\n * @return 0.0 <= output <= 100.0, color channel converted to\n * linear RGB space\n */\nexport function linearized(rgbComponent) {\n    const normalized = rgbComponent / 255.0;\n    if (normalized <= 0.040449936) {\n        return normalized / 12.92 * 100.0;\n    }\n    else {\n        return Math.pow((normalized + 0.055) / 1.055, 2.4) * 100.0;\n    }\n}\n/**\n * Delinearizes an RGB component.\n *\n * @param rgbComponent 0.0 <= rgb_component <= 100.0, represents\n * linear R/G/B channel\n * @return 0 <= output <= 255, color channel converted to regular\n * RGB space\n */\nexport function delinearized(rgbComponent) {\n    const normalized = rgbComponent / 100.0;\n    let delinearized = 0.0;\n    if (normalized <= 0.0031308) {\n        delinearized = normalized * 12.92;\n    }\n    else {\n        delinearized = 1.055 * Math.pow(normalized, 1.0 / 2.4) - 0.055;\n    }\n    return mathUtils.clampInt(0, 255, Math.round(delinearized * 255.0));\n}\n/**\n * Returns the standard white point; white on a sunny day.\n *\n * @return The white point\n */\nexport function whitePointD65() {\n    return WHITE_POINT_D65;\n}\n/**\n * Return RGBA from a given int32 color\n *\n * @param argb ARGB representation of a int32 color.\n * @return RGBA representation of a int32 color.\n */\nexport function rgbaFromArgb(argb) {\n    const r = redFromArgb(argb);\n    const g = greenFromArgb(argb);\n    const b = blueFromArgb(argb);\n    const a = alphaFromArgb(argb);\n    return { r, g, b, a };\n}\n/**\n * Return int32 color from a given RGBA component\n *\n * @param rgba RGBA representation of a int32 color.\n * @returns ARGB representation of a int32 color.\n */\nexport function argbFromRgba({ r, g, b, a }) {\n    const rValue = clampComponent(r);\n    const gValue = clampComponent(g);\n    const bValue = clampComponent(b);\n    const aValue = clampComponent(a);\n    return (aValue << 24) | (rValue << 16) | (gValue << 8) | bValue;\n}\nfunction clampComponent(value) {\n    if (value < 0)\n        return 0;\n    if (value > 255)\n        return 255;\n    return value;\n}\nfunction labF(t) {\n    const e = 216.0 / 24389.0;\n    const kappa = 24389.0 / 27.0;\n    if (t > e) {\n        return Math.pow(t, 1.0 / 3.0);\n    }\n    else {\n        return (kappa * t + 16) / 116;\n    }\n}\nfunction labInvf(ft) {\n    const e = 216.0 / 24389.0;\n    const kappa = 24389.0 / 27.0;\n    const ft3 = ft * ft * ft;\n    if (ft3 > e) {\n        return ft3;\n    }\n    else {\n        return (116 * ft - 16) / kappa;\n    }\n}\n//# sourceMappingURL=color_utils.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as utils from '../utils/color_utils.js';\nimport * as math from '../utils/math_utils.js';\n/**\n * In traditional color spaces, a color can be identified solely by the\n * observer's measurement of the color. Color appearance models such as CAM16\n * also use information about the environment where the color was\n * observed, known as the viewing conditions.\n *\n * For example, white under the traditional assumption of a midday sun white\n * point is accurately measured as a slightly chromatic blue by CAM16. (roughly,\n * hue 203, chroma 3, lightness 100)\n *\n * This class caches intermediate values of the CAM16 conversion process that\n * depend only on viewing conditions, enabling speed ups.\n */\nexport class ViewingConditions {\n    /**\n     * Create ViewingConditions from a simple, physically relevant, set of\n     * parameters.\n     *\n     * @param whitePoint White point, measured in the XYZ color space.\n     *     default = D65, or sunny day afternoon\n     * @param adaptingLuminance The luminance of the adapting field. Informally,\n     *     how bright it is in the room where the color is viewed. Can be\n     *     calculated from lux by multiplying lux by 0.0586. default = 11.72,\n     *     or 200 lux.\n     * @param backgroundLstar The lightness of the area surrounding the color.\n     *     measured by L* in L*a*b*. default = 50.0\n     * @param surround A general description of the lighting surrounding the\n     *     color. 0 is pitch dark, like watching a movie in a theater. 1.0 is a\n     *     dimly light room, like watching TV at home at night. 2.0 means there\n     *     is no difference between the lighting on the color and around it.\n     *     default = 2.0\n     * @param discountingIlluminant Whether the eye accounts for the tint of the\n     *     ambient lighting, such as knowing an apple is still red in green light.\n     *     default = false, the eye does not perform this process on\n     *       self-luminous objects like displays.\n     */\n    static make(whitePoint = utils.whitePointD65(), adaptingLuminance = (200.0 / Math.PI) * utils.yFromLstar(50.0) / 100.0, backgroundLstar = 50.0, surround = 2.0, discountingIlluminant = false) {\n        const xyz = whitePoint;\n        const rW = xyz[0] * 0.401288 + xyz[1] * 0.650173 + xyz[2] * -0.051461;\n        const gW = xyz[0] * -0.250268 + xyz[1] * 1.204414 + xyz[2] * 0.045854;\n        const bW = xyz[0] * -0.002079 + xyz[1] * 0.048952 + xyz[2] * 0.953127;\n        const f = 0.8 + surround / 10.0;\n        const c = f >= 0.9 ? math.lerp(0.59, 0.69, (f - 0.9) * 10.0) :\n            math.lerp(0.525, 0.59, (f - 0.8) * 10.0);\n        let d = discountingIlluminant ?\n            1.0 :\n            f * (1.0 - (1.0 / 3.6) * Math.exp((-adaptingLuminance - 42.0) / 92.0));\n        d = d > 1.0 ? 1.0 : d < 0.0 ? 0.0 : d;\n        const nc = f;\n        const rgbD = [\n            d * (100.0 / rW) + 1.0 - d,\n            d * (100.0 / gW) + 1.0 - d,\n            d * (100.0 / bW) + 1.0 - d,\n        ];\n        const k = 1.0 / (5.0 * adaptingLuminance + 1.0);\n        const k4 = k * k * k * k;\n        const k4F = 1.0 - k4;\n        const fl = k4 * adaptingLuminance +\n            0.1 * k4F * k4F * Math.cbrt(5.0 * adaptingLuminance);\n        const n = utils.yFromLstar(backgroundLstar) / whitePoint[1];\n        const z = 1.48 + Math.sqrt(n);\n        const nbb = 0.725 / Math.pow(n, 0.2);\n        const ncb = nbb;\n        const rgbAFactors = [\n            Math.pow((fl * rgbD[0] * rW) / 100.0, 0.42),\n            Math.pow((fl * rgbD[1] * gW) / 100.0, 0.42),\n            Math.pow((fl * rgbD[2] * bW) / 100.0, 0.42),\n        ];\n        const rgbA = [\n            (400.0 * rgbAFactors[0]) / (rgbAFactors[0] + 27.13),\n            (400.0 * rgbAFactors[1]) / (rgbAFactors[1] + 27.13),\n            (400.0 * rgbAFactors[2]) / (rgbAFactors[2] + 27.13),\n        ];\n        const aw = (2.0 * rgbA[0] + rgbA[1] + 0.05 * rgbA[2]) * nbb;\n        return new ViewingConditions(n, aw, nbb, ncb, c, nc, rgbD, fl, Math.pow(fl, 0.25), z);\n    }\n    /**\n     * Parameters are intermediate values of the CAM16 conversion process. Their\n     * names are shorthand for technical color science terminology, this class\n     * would not benefit from documenting them individually. A brief overview\n     * is available in the CAM16 specification, and a complete overview requires\n     * a color science textbook, such as Fairchild's Color Appearance Models.\n     */\n    constructor(n, aw, nbb, ncb, c, nc, rgbD, fl, fLRoot, z) {\n        this.n = n;\n        this.aw = aw;\n        this.nbb = nbb;\n        this.ncb = ncb;\n        this.c = c;\n        this.nc = nc;\n        this.rgbD = rgbD;\n        this.fl = fl;\n        this.fLRoot = fLRoot;\n        this.z = z;\n    }\n}\n/** sRGB-like viewing conditions.  */\nViewingConditions.DEFAULT = ViewingConditions.make();\n//# sourceMappingURL=viewing_conditions.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as utils from '../utils/color_utils.js';\nimport * as math from '../utils/math_utils.js';\nimport { ViewingConditions } from './viewing_conditions.js';\n/**\n * CAM16, a color appearance model. Colors are not just defined by their hex\n * code, but rather, a hex code and viewing conditions.\n *\n * CAM16 instances also have coordinates in the CAM16-UCS space, called J*, a*,\n * b*, or jstar, astar, bstar in code. CAM16-UCS is included in the CAM16\n * specification, and should be used when measuring distances between colors.\n *\n * In traditional color spaces, a color can be identified solely by the\n * observer's measurement of the color. Color appearance models such as CAM16\n * also use information about the environment where the color was\n * observed, known as the viewing conditions.\n *\n * For example, white under the traditional assumption of a midday sun white\n * point is accurately measured as a slightly chromatic blue by CAM16. (roughly,\n * hue 203, chroma 3, lightness 100)\n */\nexport class Cam16 {\n    /**\n     * All of the CAM16 dimensions can be calculated from 3 of the dimensions, in\n     * the following combinations:\n     *      -  {j or q} and {c, m, or s} and hue\n     *      - jstar, astar, bstar\n     * Prefer using a static method that constructs from 3 of those dimensions.\n     * This constructor is intended for those methods to use to return all\n     * possible dimensions.\n     *\n     * @param hue\n     * @param chroma informally, colorfulness / color intensity. like saturation\n     *     in HSL, except perceptually accurate.\n     * @param j lightness\n     * @param q brightness; ratio of lightness to white point's lightness\n     * @param m colorfulness\n     * @param s saturation; ratio of chroma to white point's chroma\n     * @param jstar CAM16-UCS J coordinate\n     * @param astar CAM16-UCS a coordinate\n     * @param bstar CAM16-UCS b coordinate\n     */\n    constructor(hue, chroma, j, q, m, s, jstar, astar, bstar) {\n        this.hue = hue;\n        this.chroma = chroma;\n        this.j = j;\n        this.q = q;\n        this.m = m;\n        this.s = s;\n        this.jstar = jstar;\n        this.astar = astar;\n        this.bstar = bstar;\n    }\n    /**\n     * CAM16 instances also have coordinates in the CAM16-UCS space, called J*,\n     * a*, b*, or jstar, astar, bstar in code. CAM16-UCS is included in the CAM16\n     * specification, and is used to measure distances between colors.\n     */\n    distance(other) {\n        const dJ = this.jstar - other.jstar;\n        const dA = this.astar - other.astar;\n        const dB = this.bstar - other.bstar;\n        const dEPrime = Math.sqrt(dJ * dJ + dA * dA + dB * dB);\n        const dE = 1.41 * Math.pow(dEPrime, 0.63);\n        return dE;\n    }\n    /**\n     * @param argb ARGB representation of a color.\n     * @return CAM16 color, assuming the color was viewed in default viewing\n     *     conditions.\n     */\n    static fromInt(argb) {\n        return Cam16.fromIntInViewingConditions(argb, ViewingConditions.DEFAULT);\n    }\n    /**\n     * @param argb ARGB representation of a color.\n     * @param viewingConditions Information about the environment where the color\n     *     was observed.\n     * @return CAM16 color.\n     */\n    static fromIntInViewingConditions(argb, viewingConditions) {\n        const red = (argb & 0x00ff0000) >> 16;\n        const green = (argb & 0x0000ff00) >> 8;\n        const blue = (argb & 0x000000ff);\n        const redL = utils.linearized(red);\n        const greenL = utils.linearized(green);\n        const blueL = utils.linearized(blue);\n        const x = 0.41233895 * redL + 0.35762064 * greenL + 0.18051042 * blueL;\n        const y = 0.2126 * redL + 0.7152 * greenL + 0.0722 * blueL;\n        const z = 0.01932141 * redL + 0.11916382 * greenL + 0.95034478 * blueL;\n        const rC = 0.401288 * x + 0.650173 * y - 0.051461 * z;\n        const gC = -0.250268 * x + 1.204414 * y + 0.045854 * z;\n        const bC = -0.002079 * x + 0.048952 * y + 0.953127 * z;\n        const rD = viewingConditions.rgbD[0] * rC;\n        const gD = viewingConditions.rgbD[1] * gC;\n        const bD = viewingConditions.rgbD[2] * bC;\n        const rAF = Math.pow((viewingConditions.fl * Math.abs(rD)) / 100.0, 0.42);\n        const gAF = Math.pow((viewingConditions.fl * Math.abs(gD)) / 100.0, 0.42);\n        const bAF = Math.pow((viewingConditions.fl * Math.abs(bD)) / 100.0, 0.42);\n        const rA = (math.signum(rD) * 400.0 * rAF) / (rAF + 27.13);\n        const gA = (math.signum(gD) * 400.0 * gAF) / (gAF + 27.13);\n        const bA = (math.signum(bD) * 400.0 * bAF) / (bAF + 27.13);\n        const a = (11.0 * rA + -12.0 * gA + bA) / 11.0;\n        const b = (rA + gA - 2.0 * bA) / 9.0;\n        const u = (20.0 * rA + 20.0 * gA + 21.0 * bA) / 20.0;\n        const p2 = (40.0 * rA + 20.0 * gA + bA) / 20.0;\n        const atan2 = Math.atan2(b, a);\n        const atanDegrees = (atan2 * 180.0) / Math.PI;\n        const hue = atanDegrees < 0 ? atanDegrees + 360.0 :\n            atanDegrees >= 360 ? atanDegrees - 360.0 :\n                atanDegrees;\n        const hueRadians = (hue * Math.PI) / 180.0;\n        const ac = p2 * viewingConditions.nbb;\n        const j = 100.0 *\n            Math.pow(ac / viewingConditions.aw, viewingConditions.c * viewingConditions.z);\n        const q = (4.0 / viewingConditions.c) * Math.sqrt(j / 100.0) *\n            (viewingConditions.aw + 4.0) * viewingConditions.fLRoot;\n        const huePrime = hue < 20.14 ? hue + 360 : hue;\n        const eHue = 0.25 * (Math.cos((huePrime * Math.PI) / 180.0 + 2.0) + 3.8);\n        const p1 = (50000.0 / 13.0) * eHue * viewingConditions.nc * viewingConditions.ncb;\n        const t = (p1 * Math.sqrt(a * a + b * b)) / (u + 0.305);\n        const alpha = Math.pow(t, 0.9) *\n            Math.pow(1.64 - Math.pow(0.29, viewingConditions.n), 0.73);\n        const c = alpha * Math.sqrt(j / 100.0);\n        const m = c * viewingConditions.fLRoot;\n        const s = 50.0 *\n            Math.sqrt((alpha * viewingConditions.c) / (viewingConditions.aw + 4.0));\n        const jstar = ((1.0 + 100.0 * 0.007) * j) / (1.0 + 0.007 * j);\n        const mstar = (1.0 / 0.0228) * Math.log(1.0 + 0.0228 * m);\n        const astar = mstar * Math.cos(hueRadians);\n        const bstar = mstar * Math.sin(hueRadians);\n        return new Cam16(hue, c, j, q, m, s, jstar, astar, bstar);\n    }\n    /**\n     * @param j CAM16 lightness\n     * @param c CAM16 chroma\n     * @param h CAM16 hue\n     */\n    static fromJch(j, c, h) {\n        return Cam16.fromJchInViewingConditions(j, c, h, ViewingConditions.DEFAULT);\n    }\n    /**\n     * @param j CAM16 lightness\n     * @param c CAM16 chroma\n     * @param h CAM16 hue\n     * @param viewingConditions Information about the environment where the color\n     *     was observed.\n     */\n    static fromJchInViewingConditions(j, c, h, viewingConditions) {\n        const q = (4.0 / viewingConditions.c) * Math.sqrt(j / 100.0) *\n            (viewingConditions.aw + 4.0) * viewingConditions.fLRoot;\n        const m = c * viewingConditions.fLRoot;\n        const alpha = c / Math.sqrt(j / 100.0);\n        const s = 50.0 *\n            Math.sqrt((alpha * viewingConditions.c) / (viewingConditions.aw + 4.0));\n        const hueRadians = (h * Math.PI) / 180.0;\n        const jstar = ((1.0 + 100.0 * 0.007) * j) / (1.0 + 0.007 * j);\n        const mstar = (1.0 / 0.0228) * Math.log(1.0 + 0.0228 * m);\n        const astar = mstar * Math.cos(hueRadians);\n        const bstar = mstar * Math.sin(hueRadians);\n        return new Cam16(h, c, j, q, m, s, jstar, astar, bstar);\n    }\n    /**\n     * @param jstar CAM16-UCS lightness.\n     * @param astar CAM16-UCS a dimension. Like a* in L*a*b*, it is a Cartesian\n     *     coordinate on the Y axis.\n     * @param bstar CAM16-UCS b dimension. Like a* in L*a*b*, it is a Cartesian\n     *     coordinate on the X axis.\n     */\n    static fromUcs(jstar, astar, bstar) {\n        return Cam16.fromUcsInViewingConditions(jstar, astar, bstar, ViewingConditions.DEFAULT);\n    }\n    /**\n     * @param jstar CAM16-UCS lightness.\n     * @param astar CAM16-UCS a dimension. Like a* in L*a*b*, it is a Cartesian\n     *     coordinate on the Y axis.\n     * @param bstar CAM16-UCS b dimension. Like a* in L*a*b*, it is a Cartesian\n     *     coordinate on the X axis.\n     * @param viewingConditions Information about the environment where the color\n     *     was observed.\n     */\n    static fromUcsInViewingConditions(jstar, astar, bstar, viewingConditions) {\n        const a = astar;\n        const b = bstar;\n        const m = Math.sqrt(a * a + b * b);\n        const M = (Math.exp(m * 0.0228) - 1.0) / 0.0228;\n        const c = M / viewingConditions.fLRoot;\n        let h = Math.atan2(b, a) * (180.0 / Math.PI);\n        if (h < 0.0) {\n            h += 360.0;\n        }\n        const j = jstar / (1 - (jstar - 100) * 0.007);\n        return Cam16.fromJchInViewingConditions(j, c, h, viewingConditions);\n    }\n    /**\n     *  @return ARGB representation of color, assuming the color was viewed in\n     *     default viewing conditions, which are near-identical to the default\n     *     viewing conditions for sRGB.\n     */\n    toInt() {\n        return this.viewed(ViewingConditions.DEFAULT);\n    }\n    /**\n     * @param viewingConditions Information about the environment where the color\n     *     will be viewed.\n     * @return ARGB representation of color\n     */\n    viewed(viewingConditions) {\n        const alpha = this.chroma === 0.0 || this.j === 0.0 ?\n            0.0 :\n            this.chroma / Math.sqrt(this.j / 100.0);\n        const t = Math.pow(alpha / Math.pow(1.64 - Math.pow(0.29, viewingConditions.n), 0.73), 1.0 / 0.9);\n        const hRad = (this.hue * Math.PI) / 180.0;\n        const eHue = 0.25 * (Math.cos(hRad + 2.0) + 3.8);\n        const ac = viewingConditions.aw *\n            Math.pow(this.j / 100.0, 1.0 / viewingConditions.c / viewingConditions.z);\n        const p1 = eHue * (50000.0 / 13.0) * viewingConditions.nc * viewingConditions.ncb;\n        const p2 = ac / viewingConditions.nbb;\n        const hSin = Math.sin(hRad);\n        const hCos = Math.cos(hRad);\n        const gamma = (23.0 * (p2 + 0.305) * t) /\n            (23.0 * p1 + 11.0 * t * hCos + 108.0 * t * hSin);\n        const a = gamma * hCos;\n        const b = gamma * hSin;\n        const rA = (460.0 * p2 + 451.0 * a + 288.0 * b) / 1403.0;\n        const gA = (460.0 * p2 - 891.0 * a - 261.0 * b) / 1403.0;\n        const bA = (460.0 * p2 - 220.0 * a - 6300.0 * b) / 1403.0;\n        const rCBase = Math.max(0, (27.13 * Math.abs(rA)) / (400.0 - Math.abs(rA)));\n        const rC = math.signum(rA) * (100.0 / viewingConditions.fl) *\n            Math.pow(rCBase, 1.0 / 0.42);\n        const gCBase = Math.max(0, (27.13 * Math.abs(gA)) / (400.0 - Math.abs(gA)));\n        const gC = math.signum(gA) * (100.0 / viewingConditions.fl) *\n            Math.pow(gCBase, 1.0 / 0.42);\n        const bCBase = Math.max(0, (27.13 * Math.abs(bA)) / (400.0 - Math.abs(bA)));\n        const bC = math.signum(bA) * (100.0 / viewingConditions.fl) *\n            Math.pow(bCBase, 1.0 / 0.42);\n        const rF = rC / viewingConditions.rgbD[0];\n        const gF = gC / viewingConditions.rgbD[1];\n        const bF = bC / viewingConditions.rgbD[2];\n        const x = 1.86206786 * rF - 1.01125463 * gF + 0.14918677 * bF;\n        const y = 0.38752654 * rF + 0.62144744 * gF - 0.00897398 * bF;\n        const z = -0.01584150 * rF - 0.03412294 * gF + 1.04996444 * bF;\n        const argb = utils.argbFromXyz(x, y, z);\n        return argb;\n    }\n    /// Given color expressed in XYZ and viewed in [viewingConditions], convert to\n    /// CAM16.\n    static fromXyzInViewingConditions(x, y, z, viewingConditions) {\n        // Transform XYZ to 'cone'/'rgb' responses\n        const rC = 0.401288 * x + 0.650173 * y - 0.051461 * z;\n        const gC = -0.250268 * x + 1.204414 * y + 0.045854 * z;\n        const bC = -0.002079 * x + 0.048952 * y + 0.953127 * z;\n        // Discount illuminant\n        const rD = viewingConditions.rgbD[0] * rC;\n        const gD = viewingConditions.rgbD[1] * gC;\n        const bD = viewingConditions.rgbD[2] * bC;\n        // chromatic adaptation\n        const rAF = Math.pow(viewingConditions.fl * Math.abs(rD) / 100.0, 0.42);\n        const gAF = Math.pow(viewingConditions.fl * Math.abs(gD) / 100.0, 0.42);\n        const bAF = Math.pow(viewingConditions.fl * Math.abs(bD) / 100.0, 0.42);\n        const rA = math.signum(rD) * 400.0 * rAF / (rAF + 27.13);\n        const gA = math.signum(gD) * 400.0 * gAF / (gAF + 27.13);\n        const bA = math.signum(bD) * 400.0 * bAF / (bAF + 27.13);\n        // redness-greenness\n        const a = (11.0 * rA + -12.0 * gA + bA) / 11.0;\n        // yellowness-blueness\n        const b = (rA + gA - 2.0 * bA) / 9.0;\n        // auxiliary components\n        const u = (20.0 * rA + 20.0 * gA + 21.0 * bA) / 20.0;\n        const p2 = (40.0 * rA + 20.0 * gA + bA) / 20.0;\n        // hue\n        const atan2 = Math.atan2(b, a);\n        const atanDegrees = atan2 * 180.0 / Math.PI;\n        const hue = atanDegrees < 0 ? atanDegrees + 360.0 :\n            atanDegrees >= 360 ? atanDegrees - 360 :\n                atanDegrees;\n        const hueRadians = hue * Math.PI / 180.0;\n        // achromatic response to color\n        const ac = p2 * viewingConditions.nbb;\n        // CAM16 lightness and brightness\n        const J = 100.0 *\n            Math.pow(ac / viewingConditions.aw, viewingConditions.c * viewingConditions.z);\n        const Q = (4.0 / viewingConditions.c) * Math.sqrt(J / 100.0) *\n            (viewingConditions.aw + 4.0) * (viewingConditions.fLRoot);\n        const huePrime = (hue < 20.14) ? hue + 360 : hue;\n        const eHue = (1.0 / 4.0) * (Math.cos(huePrime * Math.PI / 180.0 + 2.0) + 3.8);\n        const p1 = 50000.0 / 13.0 * eHue * viewingConditions.nc * viewingConditions.ncb;\n        const t = p1 * Math.sqrt(a * a + b * b) / (u + 0.305);\n        const alpha = Math.pow(t, 0.9) *\n            Math.pow(1.64 - Math.pow(0.29, viewingConditions.n), 0.73);\n        // CAM16 chroma, colorfulness, chroma\n        const C = alpha * Math.sqrt(J / 100.0);\n        const M = C * viewingConditions.fLRoot;\n        const s = 50.0 *\n            Math.sqrt((alpha * viewingConditions.c) / (viewingConditions.aw + 4.0));\n        // CAM16-UCS components\n        const jstar = (1.0 + 100.0 * 0.007) * J / (1.0 + 0.007 * J);\n        const mstar = Math.log(1.0 + 0.0228 * M) / 0.0228;\n        const astar = mstar * Math.cos(hueRadians);\n        const bstar = mstar * Math.sin(hueRadians);\n        return new Cam16(hue, C, J, Q, M, s, jstar, astar, bstar);\n    }\n    /// XYZ representation of CAM16 seen in [viewingConditions].\n    xyzInViewingConditions(viewingConditions) {\n        const alpha = (this.chroma === 0.0 || this.j === 0.0) ?\n            0.0 :\n            this.chroma / Math.sqrt(this.j / 100.0);\n        const t = Math.pow(alpha / Math.pow(1.64 - Math.pow(0.29, viewingConditions.n), 0.73), 1.0 / 0.9);\n        const hRad = this.hue * Math.PI / 180.0;\n        const eHue = 0.25 * (Math.cos(hRad + 2.0) + 3.8);\n        const ac = viewingConditions.aw *\n            Math.pow(this.j / 100.0, 1.0 / viewingConditions.c / viewingConditions.z);\n        const p1 = eHue * (50000.0 / 13.0) * viewingConditions.nc * viewingConditions.ncb;\n        const p2 = (ac / viewingConditions.nbb);\n        const hSin = Math.sin(hRad);\n        const hCos = Math.cos(hRad);\n        const gamma = 23.0 * (p2 + 0.305) * t /\n            (23.0 * p1 + 11 * t * hCos + 108.0 * t * hSin);\n        const a = gamma * hCos;\n        const b = gamma * hSin;\n        const rA = (460.0 * p2 + 451.0 * a + 288.0 * b) / 1403.0;\n        const gA = (460.0 * p2 - 891.0 * a - 261.0 * b) / 1403.0;\n        const bA = (460.0 * p2 - 220.0 * a - 6300.0 * b) / 1403.0;\n        const rCBase = Math.max(0, (27.13 * Math.abs(rA)) / (400.0 - Math.abs(rA)));\n        const rC = math.signum(rA) * (100.0 / viewingConditions.fl) *\n            Math.pow(rCBase, 1.0 / 0.42);\n        const gCBase = Math.max(0, (27.13 * Math.abs(gA)) / (400.0 - Math.abs(gA)));\n        const gC = math.signum(gA) * (100.0 / viewingConditions.fl) *\n            Math.pow(gCBase, 1.0 / 0.42);\n        const bCBase = Math.max(0, (27.13 * Math.abs(bA)) / (400.0 - Math.abs(bA)));\n        const bC = math.signum(bA) * (100.0 / viewingConditions.fl) *\n            Math.pow(bCBase, 1.0 / 0.42);\n        const rF = rC / viewingConditions.rgbD[0];\n        const gF = gC / viewingConditions.rgbD[1];\n        const bF = bC / viewingConditions.rgbD[2];\n        const x = 1.86206786 * rF - 1.01125463 * gF + 0.14918677 * bF;\n        const y = 0.38752654 * rF + 0.62144744 * gF - 0.00897398 * bF;\n        const z = -0.01584150 * rF - 0.03412294 * gF + 1.04996444 * bF;\n        return [x, y, z];\n    }\n}\n//# sourceMappingURL=cam16.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// This file is automatically generated. Do not modify it.\nimport * as colorUtils from '../utils/color_utils.js';\nimport * as mathUtils from '../utils/math_utils.js';\nimport { Cam16 } from './cam16.js';\nimport { ViewingConditions } from './viewing_conditions.js';\n// material_color_utilities is designed to have a consistent API across\n// platforms and modular components that can be moved around easily. Using a\n// class as a namespace facilitates this.\n//\n// tslint:disable:class-as-namespace\n/**\n * A class that solves the HCT equation.\n */\nexport class HctSolver {\n    /**\n     * Sanitizes a small enough angle in radians.\n     *\n     * @param angle An angle in radians; must not deviate too much\n     * from 0.\n     * @return A coterminal angle between 0 and 2pi.\n     */\n    static sanitizeRadians(angle) {\n        return (angle + Math.PI * 8) % (Math.PI * 2);\n    }\n    /**\n     * Delinearizes an RGB component, returning a floating-point\n     * number.\n     *\n     * @param rgbComponent 0.0 <= rgb_component <= 100.0, represents\n     * linear R/G/B channel\n     * @return 0.0 <= output <= 255.0, color channel converted to\n     * regular RGB space\n     */\n    static trueDelinearized(rgbComponent) {\n        const normalized = rgbComponent / 100.0;\n        let delinearized = 0.0;\n        if (normalized <= 0.0031308) {\n            delinearized = normalized * 12.92;\n        }\n        else {\n            delinearized = 1.055 * Math.pow(normalized, 1.0 / 2.4) - 0.055;\n        }\n        return delinearized * 255.0;\n    }\n    static chromaticAdaptation(component) {\n        const af = Math.pow(Math.abs(component), 0.42);\n        return mathUtils.signum(component) * 400.0 * af / (af + 27.13);\n    }\n    /**\n     * Returns the hue of a linear RGB color in CAM16.\n     *\n     * @param linrgb The linear RGB coordinates of a color.\n     * @return The hue of the color in CAM16, in radians.\n     */\n    static hueOf(linrgb) {\n        const scaledDiscount = mathUtils.matrixMultiply(linrgb, HctSolver.SCALED_DISCOUNT_FROM_LINRGB);\n        const rA = HctSolver.chromaticAdaptation(scaledDiscount[0]);\n        const gA = HctSolver.chromaticAdaptation(scaledDiscount[1]);\n        const bA = HctSolver.chromaticAdaptation(scaledDiscount[2]);\n        // redness-greenness\n        const a = (11.0 * rA + -12.0 * gA + bA) / 11.0;\n        // yellowness-blueness\n        const b = (rA + gA - 2.0 * bA) / 9.0;\n        return Math.atan2(b, a);\n    }\n    static areInCyclicOrder(a, b, c) {\n        const deltaAB = HctSolver.sanitizeRadians(b - a);\n        const deltaAC = HctSolver.sanitizeRadians(c - a);\n        return deltaAB < deltaAC;\n    }\n    /**\n     * Solves the lerp equation.\n     *\n     * @param source The starting number.\n     * @param mid The number in the middle.\n     * @param target The ending number.\n     * @return A number t such that lerp(source, target, t) = mid.\n     */\n    static intercept(source, mid, target) {\n        return (mid - source) / (target - source);\n    }\n    static lerpPoint(source, t, target) {\n        return [\n            source[0] + (target[0] - source[0]) * t,\n            source[1] + (target[1] - source[1]) * t,\n            source[2] + (target[2] - source[2]) * t,\n        ];\n    }\n    /**\n     * Intersects a segment with a plane.\n     *\n     * @param source The coordinates of point A.\n     * @param coordinate The R-, G-, or B-coordinate of the plane.\n     * @param target The coordinates of point B.\n     * @param axis The axis the plane is perpendicular with. (0: R, 1:\n     * G, 2: B)\n     * @return The intersection point of the segment AB with the plane\n     * R=coordinate, G=coordinate, or B=coordinate\n     */\n    static setCoordinate(source, coordinate, target, axis) {\n        const t = HctSolver.intercept(source[axis], coordinate, target[axis]);\n        return HctSolver.lerpPoint(source, t, target);\n    }\n    static isBounded(x) {\n        return 0.0 <= x && x <= 100.0;\n    }\n    /**\n     * Returns the nth possible vertex of the polygonal intersection.\n     *\n     * @param y The Y value of the plane.\n     * @param n The zero-based index of the point. 0 <= n <= 11.\n     * @return The nth possible vertex of the polygonal intersection\n     * of the y plane and the RGB cube, in linear RGB coordinates, if\n     * it exists. If this possible vertex lies outside of the cube,\n     * [-1.0, -1.0, -1.0] is returned.\n     */\n    static nthVertex(y, n) {\n        const kR = HctSolver.Y_FROM_LINRGB[0];\n        const kG = HctSolver.Y_FROM_LINRGB[1];\n        const kB = HctSolver.Y_FROM_LINRGB[2];\n        const coordA = n % 4 <= 1 ? 0.0 : 100.0;\n        const coordB = n % 2 === 0 ? 0.0 : 100.0;\n        if (n < 4) {\n            const g = coordA;\n            const b = coordB;\n            const r = (y - g * kG - b * kB) / kR;\n            if (HctSolver.isBounded(r)) {\n                return [r, g, b];\n            }\n            else {\n                return [-1.0, -1.0, -1.0];\n            }\n        }\n        else if (n < 8) {\n            const b = coordA;\n            const r = coordB;\n            const g = (y - r * kR - b * kB) / kG;\n            if (HctSolver.isBounded(g)) {\n                return [r, g, b];\n            }\n            else {\n                return [-1.0, -1.0, -1.0];\n            }\n        }\n        else {\n            const r = coordA;\n            const g = coordB;\n            const b = (y - r * kR - g * kG) / kB;\n            if (HctSolver.isBounded(b)) {\n                return [r, g, b];\n            }\n            else {\n                return [-1.0, -1.0, -1.0];\n            }\n        }\n    }\n    /**\n     * Finds the segment containing the desired color.\n     *\n     * @param y The Y value of the color.\n     * @param targetHue The hue of the color.\n     * @return A list of two sets of linear RGB coordinates, each\n     * corresponding to an endpoint of the segment containing the\n     * desired color.\n     */\n    static bisectToSegment(y, targetHue) {\n        let left = [-1.0, -1.0, -1.0];\n        let right = left;\n        let leftHue = 0.0;\n        let rightHue = 0.0;\n        let initialized = false;\n        let uncut = true;\n        for (let n = 0; n < 12; n++) {\n            const mid = HctSolver.nthVertex(y, n);\n            if (mid[0] < 0) {\n                continue;\n            }\n            const midHue = HctSolver.hueOf(mid);\n            if (!initialized) {\n                left = mid;\n                right = mid;\n                leftHue = midHue;\n                rightHue = midHue;\n                initialized = true;\n                continue;\n            }\n            if (uncut || HctSolver.areInCyclicOrder(leftHue, midHue, rightHue)) {\n                uncut = false;\n                if (HctSolver.areInCyclicOrder(leftHue, targetHue, midHue)) {\n                    right = mid;\n                    rightHue = midHue;\n                }\n                else {\n                    left = mid;\n                    leftHue = midHue;\n                }\n            }\n        }\n        return [left, right];\n    }\n    static midpoint(a, b) {\n        return [\n            (a[0] + b[0]) / 2,\n            (a[1] + b[1]) / 2,\n            (a[2] + b[2]) / 2,\n        ];\n    }\n    static criticalPlaneBelow(x) {\n        return Math.floor(x - 0.5);\n    }\n    static criticalPlaneAbove(x) {\n        return Math.ceil(x - 0.5);\n    }\n    /**\n     * Finds a color with the given Y and hue on the boundary of the\n     * cube.\n     *\n     * @param y The Y value of the color.\n     * @param targetHue The hue of the color.\n     * @return The desired color, in linear RGB coordinates.\n     */\n    static bisectToLimit(y, targetHue) {\n        const segment = HctSolver.bisectToSegment(y, targetHue);\n        let left = segment[0];\n        let leftHue = HctSolver.hueOf(left);\n        let right = segment[1];\n        for (let axis = 0; axis < 3; axis++) {\n            if (left[axis] !== right[axis]) {\n                let lPlane = -1;\n                let rPlane = 255;\n                if (left[axis] < right[axis]) {\n                    lPlane = HctSolver.criticalPlaneBelow(HctSolver.trueDelinearized(left[axis]));\n                    rPlane = HctSolver.criticalPlaneAbove(HctSolver.trueDelinearized(right[axis]));\n                }\n                else {\n                    lPlane = HctSolver.criticalPlaneAbove(HctSolver.trueDelinearized(left[axis]));\n                    rPlane = HctSolver.criticalPlaneBelow(HctSolver.trueDelinearized(right[axis]));\n                }\n                for (let i = 0; i < 8; i++) {\n                    if (Math.abs(rPlane - lPlane) <= 1) {\n                        break;\n                    }\n                    else {\n                        const mPlane = Math.floor((lPlane + rPlane) / 2.0);\n                        const midPlaneCoordinate = HctSolver.CRITICAL_PLANES[mPlane];\n                        const mid = HctSolver.setCoordinate(left, midPlaneCoordinate, right, axis);\n                        const midHue = HctSolver.hueOf(mid);\n                        if (HctSolver.areInCyclicOrder(leftHue, targetHue, midHue)) {\n                            right = mid;\n                            rPlane = mPlane;\n                        }\n                        else {\n                            left = mid;\n                            leftHue = midHue;\n                            lPlane = mPlane;\n                        }\n                    }\n                }\n            }\n        }\n        return HctSolver.midpoint(left, right);\n    }\n    static inverseChromaticAdaptation(adapted) {\n        const adaptedAbs = Math.abs(adapted);\n        const base = Math.max(0, 27.13 * adaptedAbs / (400.0 - adaptedAbs));\n        return mathUtils.signum(adapted) * Math.pow(base, 1.0 / 0.42);\n    }\n    /**\n     * Finds a color with the given hue, chroma, and Y.\n     *\n     * @param hueRadians The desired hue in radians.\n     * @param chroma The desired chroma.\n     * @param y The desired Y.\n     * @return The desired color as a hexadecimal integer, if found; 0\n     * otherwise.\n     */\n    static findResultByJ(hueRadians, chroma, y) {\n        // Initial estimate of j.\n        let j = Math.sqrt(y) * 11.0;\n        // ===========================================================\n        // Operations inlined from Cam16 to avoid repeated calculation\n        // ===========================================================\n        const viewingConditions = ViewingConditions.DEFAULT;\n        const tInnerCoeff = 1 / Math.pow(1.64 - Math.pow(0.29, viewingConditions.n), 0.73);\n        const eHue = 0.25 * (Math.cos(hueRadians + 2.0) + 3.8);\n        const p1 = eHue * (50000.0 / 13.0) * viewingConditions.nc * viewingConditions.ncb;\n        const hSin = Math.sin(hueRadians);\n        const hCos = Math.cos(hueRadians);\n        for (let iterationRound = 0; iterationRound < 5; iterationRound++) {\n            // ===========================================================\n            // Operations inlined from Cam16 to avoid repeated calculation\n            // ===========================================================\n            const jNormalized = j / 100.0;\n            const alpha = chroma === 0.0 || j === 0.0 ? 0.0 : chroma / Math.sqrt(jNormalized);\n            const t = Math.pow(alpha * tInnerCoeff, 1.0 / 0.9);\n            const ac = viewingConditions.aw *\n                Math.pow(jNormalized, 1.0 / viewingConditions.c / viewingConditions.z);\n            const p2 = ac / viewingConditions.nbb;\n            const gamma = 23.0 * (p2 + 0.305) * t /\n                (23.0 * p1 + 11 * t * hCos + 108.0 * t * hSin);\n            const a = gamma * hCos;\n            const b = gamma * hSin;\n            const rA = (460.0 * p2 + 451.0 * a + 288.0 * b) / 1403.0;\n            const gA = (460.0 * p2 - 891.0 * a - 261.0 * b) / 1403.0;\n            const bA = (460.0 * p2 - 220.0 * a - 6300.0 * b) / 1403.0;\n            const rCScaled = HctSolver.inverseChromaticAdaptation(rA);\n            const gCScaled = HctSolver.inverseChromaticAdaptation(gA);\n            const bCScaled = HctSolver.inverseChromaticAdaptation(bA);\n            const linrgb = mathUtils.matrixMultiply([rCScaled, gCScaled, bCScaled], HctSolver.LINRGB_FROM_SCALED_DISCOUNT);\n            // ===========================================================\n            // Operations inlined from Cam16 to avoid repeated calculation\n            // ===========================================================\n            if (linrgb[0] < 0 || linrgb[1] < 0 || linrgb[2] < 0) {\n                return 0;\n            }\n            const kR = HctSolver.Y_FROM_LINRGB[0];\n            const kG = HctSolver.Y_FROM_LINRGB[1];\n            const kB = HctSolver.Y_FROM_LINRGB[2];\n            const fnj = kR * linrgb[0] + kG * linrgb[1] + kB * linrgb[2];\n            if (fnj <= 0) {\n                return 0;\n            }\n            if (iterationRound === 4 || Math.abs(fnj - y) < 0.002) {\n                if (linrgb[0] > 100.01 || linrgb[1] > 100.01 || linrgb[2] > 100.01) {\n                    return 0;\n                }\n                return colorUtils.argbFromLinrgb(linrgb);\n            }\n            // Iterates with Newton method,\n            // Using 2 * fn(j) / j as the approximation of fn'(j)\n            j = j - (fnj - y) * j / (2 * fnj);\n        }\n        return 0;\n    }\n    /**\n     * Finds an sRGB color with the given hue, chroma, and L*, if\n     * possible.\n     *\n     * @param hueDegrees The desired hue, in degrees.\n     * @param chroma The desired chroma.\n     * @param lstar The desired L*.\n     * @return A hexadecimal representing the sRGB color. The color\n     * has sufficiently close hue, chroma, and L* to the desired\n     * values, if possible; otherwise, the hue and L* will be\n     * sufficiently close, and chroma will be maximized.\n     */\n    static solveToInt(hueDegrees, chroma, lstar) {\n        if (chroma < 0.0001 || lstar < 0.0001 || lstar > 99.9999) {\n            return colorUtils.argbFromLstar(lstar);\n        }\n        hueDegrees = mathUtils.sanitizeDegreesDouble(hueDegrees);\n        const hueRadians = hueDegrees / 180 * Math.PI;\n        const y = colorUtils.yFromLstar(lstar);\n        const exactAnswer = HctSolver.findResultByJ(hueRadians, chroma, y);\n        if (exactAnswer !== 0) {\n            return exactAnswer;\n        }\n        const linrgb = HctSolver.bisectToLimit(y, hueRadians);\n        return colorUtils.argbFromLinrgb(linrgb);\n    }\n    /**\n     * Finds an sRGB color with the given hue, chroma, and L*, if\n     * possible.\n     *\n     * @param hueDegrees The desired hue, in degrees.\n     * @param chroma The desired chroma.\n     * @param lstar The desired L*.\n     * @return An CAM16 object representing the sRGB color. The color\n     * has sufficiently close hue, chroma, and L* to the desired\n     * values, if possible; otherwise, the hue and L* will be\n     * sufficiently close, and chroma will be maximized.\n     */\n    static solveToCam(hueDegrees, chroma, lstar) {\n        return Cam16.fromInt(HctSolver.solveToInt(hueDegrees, chroma, lstar));\n    }\n}\nHctSolver.SCALED_DISCOUNT_FROM_LINRGB = [\n    [\n        0.001200833568784504,\n        0.002389694492170889,\n        0.0002795742885861124,\n    ],\n    [\n        0.0005891086651375999,\n        0.0029785502573438758,\n        0.0003270666104008398,\n    ],\n    [\n        0.00010146692491640572,\n        0.0005364214359186694,\n        0.0032979401770712076,\n    ],\n];\nHctSolver.LINRGB_FROM_SCALED_DISCOUNT = [\n    [\n        1373.2198709594231,\n        -1100.4251190754821,\n        -7.278681089101213,\n    ],\n    [\n        -271.815969077903,\n        559.6580465940733,\n        -32.46047482791194,\n    ],\n    [\n        1.9622899599665666,\n        -57.173814538844006,\n        308.7233197812385,\n    ],\n];\nHctSolver.Y_FROM_LINRGB = [0.2126, 0.7152, 0.0722];\nHctSolver.CRITICAL_PLANES = [\n    0.015176349177441876, 0.045529047532325624, 0.07588174588720938,\n    0.10623444424209313, 0.13658714259697685, 0.16693984095186062,\n    0.19729253930674434, 0.2276452376616281, 0.2579979360165119,\n    0.28835063437139563, 0.3188300904430532, 0.350925934958123,\n    0.3848314933096426, 0.42057480301049466, 0.458183274052838,\n    0.4976837250274023, 0.5391024159806381, 0.5824650784040898,\n    0.6277969426914107, 0.6751227633498623, 0.7244668422128921,\n    0.775853049866786, 0.829304845476233, 0.8848452951698498,\n    0.942497089126609, 1.0022825574869039, 1.0642236851973577,\n    1.1283421258858297, 1.1946592148522128, 1.2631959812511864,\n    1.3339731595349034, 1.407011200216447, 1.4823302800086415,\n    1.5599503113873272, 1.6398909516233677, 1.7221716113234105,\n    1.8068114625156377, 1.8938294463134073, 1.9832442801866852,\n    2.075074464868551, 2.1693382909216234, 2.2660538449872063,\n    2.36523901573795, 2.4669114995532007, 2.5710888059345764,\n    2.6777882626779785, 2.7870270208169257, 2.898822059350997,\n    3.0131901897720907, 3.1301480604002863, 3.2497121605402226,\n    3.3718988244681087, 3.4967242352587946, 3.624204428461639,\n    3.754355295633311, 3.887192587735158, 4.022731918402185,\n    4.160988767090289, 4.301978482107941, 4.445716283538092,\n    4.592217266055746, 4.741496401646282, 4.893568542229298,\n    5.048448422192488, 5.20615066083972, 5.3666897647573375,\n    5.5300801301023865, 5.696336044816294, 5.865471690767354,\n    6.037501145825082, 6.212438385869475, 6.390297286737924,\n    6.571091626112461, 6.7548350853498045, 6.941541251256611,\n    7.131223617812143, 7.323895587840543, 7.5195704746346665,\n    7.7182615035334345, 7.919981813454504, 8.124744458384042,\n    8.332562408825165, 8.543448553206703, 8.757415699253682,\n    8.974476575321063, 9.194643831691977, 9.417930041841839,\n    9.644347703669503, 9.873909240696694, 10.106627003236781,\n    10.342513269534024, 10.58158024687427, 10.8238400726681,\n    11.069304815507364, 11.317986476196008, 11.569896988756009,\n    11.825048221409341, 12.083451977536606, 12.345119996613247,\n    12.610063955123938, 12.878295467455942, 13.149826086772048,\n    13.42466730586372, 13.702830557985108, 13.984327217668513,\n    14.269168601521828, 14.55736596900856, 14.848930523210871,\n    15.143873411576273, 15.44220572664832, 15.743938506781891,\n    16.04908273684337, 16.35764934889634, 16.66964922287304,\n    16.985093187232053, 17.30399201960269, 17.62635644741625,\n    17.95219714852476, 18.281524751807332, 18.614349837764564,\n    18.95068293910138, 19.290534541298456, 19.633915083172692,\n    19.98083495742689, 20.331304511189067, 20.685334046541502,\n    21.042933821039977, 21.404114048223256, 21.76888489811322,\n    22.137256497705877, 22.50923893145328, 22.884842241736916,\n    23.264076429332462, 23.6469514538663, 24.033477234264016,\n    24.42366364919083, 24.817520537484558, 25.21505769858089,\n    25.61628489293138, 26.021211842414342, 26.429848230738664,\n    26.842203703840827, 27.258287870275353, 27.678110301598522,\n    28.10168053274597, 28.529008062403893, 28.96010235337422,\n    29.39497283293396, 29.83362889318845, 30.276079891419332,\n    30.722335150426627, 31.172403958865512, 31.62629557157785,\n    32.08401920991837, 32.54558406207592, 33.010999283389665,\n    33.4802739966603, 33.953417292456834, 34.430438229418264,\n    34.911345834551085, 35.39614910352207, 35.88485700094671,\n    36.37747846067349, 36.87402238606382, 37.37449765026789,\n    37.87891309649659, 38.38727753828926, 38.89959975977785,\n    39.41588851594697, 39.93615253289054, 40.460400508064545,\n    40.98864111053629, 41.520882981230194, 42.05713473317016,\n    42.597404951718396, 43.141702194811224, 43.6900349931913,\n    44.24241185063697, 44.798841244188324, 45.35933162437017,\n    45.92389141541209, 46.49252901546552, 47.065252796817916,\n    47.64207110610409, 48.22299226451468, 48.808024568002054,\n    49.3971762874833, 49.9904556690408, 50.587870934119984,\n    51.189430279724725, 51.79514187861014, 52.40501387947288,\n    53.0190544071392, 53.637271562750364, 54.259673423945976,\n    54.88626804504493, 55.517063457223934, 56.15206766869424,\n    56.79128866487574, 57.43473440856916, 58.08241284012621,\n    58.734331877617365, 59.39049941699807, 60.05092333227251,\n    60.715611475655585, 61.38457167773311, 62.057811747619894,\n    62.7353394731159, 63.417162620860914, 64.10328893648692,\n    64.79372614476921, 65.48848194977529, 66.18756403501224,\n    66.89098006357258, 67.59873767827808, 68.31084450182222,\n    69.02730813691093, 69.74813616640164, 70.47333615344107,\n    71.20291564160104, 71.93688215501312, 72.67524319850172,\n    73.41800625771542, 74.16517879925733, 74.9167682708136,\n    75.67278210128072, 76.43322770089146, 77.1981124613393,\n    77.96744375590167, 78.74122893956174, 79.51947534912904,\n    80.30219030335869, 81.08938110306934, 81.88105503125999,\n    82.67721935322541, 83.4778813166706, 84.28304815182372,\n    85.09272707154808, 85.90692527145302, 86.72564993000343,\n    87.54890820862819, 88.3767072518277, 89.2090541872801,\n    90.04595612594655, 90.88742016217518, 91.73345337380438,\n    92.58406282226491, 93.43925555268066, 94.29903859396902,\n    95.16341895893969, 96.03240364439274, 96.9059996312159,\n    97.78421388448044, 98.6670533535366, 99.55452497210776,\n];\n//# sourceMappingURL=hct_solver.js.map","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A color system built using CAM16 hue and chroma, and L* from\n * L*a*b*.\n *\n * Using L* creates a link between the color system, contrast, and thus\n * accessibility. Contrast ratio depends on relative luminance, or Y in the XYZ\n * color space. L*, or perceptual luminance can be calculated from Y.\n *\n * Unlike Y, L* is linear to human perception, allowing trivial creation of\n * accurate color tones.\n *\n * Unlike contrast ratio, measuring contrast in L* is linear, and simple to\n * calculate. A difference of 40 in HCT tone guarantees a contrast ratio >= 3.0,\n * and a difference of 50 guarantees a contrast ratio >= 4.5.\n */\nimport * as utils from '../utils/color_utils.js';\nimport { Cam16 } from './cam16.js';\nimport { HctSolver } from './hct_solver.js';\nimport { ViewingConditions } from './viewing_conditions.js';\n/**\n * HCT, hue, chroma, and tone. A color system that provides a perceptually\n * accurate color measurement system that can also accurately render what colors\n * will appear as in different lighting environments.\n */\nexport class Hct {\n    static from(hue, chroma, tone) {\n        return new Hct(HctSolver.solveToInt(hue, chroma, tone));\n    }\n    /**\n     * @param argb ARGB representation of a color.\n     * @return HCT representation of a color in default viewing conditions\n     */\n    static fromInt(argb) {\n        return new Hct(argb);\n    }\n    toInt() {\n        return this.argb;\n    }\n    /**\n     * A number, in degrees, representing ex. red, orange, yellow, etc.\n     * Ranges from 0 <= hue < 360.\n     */\n    get hue() {\n        return this.internalHue;\n    }\n    /**\n     * @param newHue 0 <= newHue < 360; invalid values are corrected.\n     * Chroma may decrease because chroma has a different maximum for any given\n     * hue and tone.\n     */\n    set hue(newHue) {\n        this.setInternalState(HctSolver.solveToInt(newHue, this.internalChroma, this.internalTone));\n    }\n    get chroma() {\n        return this.internalChroma;\n    }\n    /**\n     * @param newChroma 0 <= newChroma < ?\n     * Chroma may decrease because chroma has a different maximum for any given\n     * hue and tone.\n     */\n    set chroma(newChroma) {\n        this.setInternalState(HctSolver.solveToInt(this.internalHue, newChroma, this.internalTone));\n    }\n    /** Lightness. Ranges from 0 to 100. */\n    get tone() {\n        return this.internalTone;\n    }\n    /**\n     * @param newTone 0 <= newTone <= 100; invalid valids are corrected.\n     * Chroma may decrease because chroma has a different maximum for any given\n     * hue and tone.\n     */\n    set tone(newTone) {\n        this.setInternalState(HctSolver.solveToInt(this.internalHue, this.internalChroma, newTone));\n    }\n    constructor(argb) {\n        this.argb = argb;\n        const cam = Cam16.fromInt(argb);\n        this.internalHue = cam.hue;\n        this.internalChroma = cam.chroma;\n        this.internalTone = utils.lstarFromArgb(argb);\n        this.argb = argb;\n    }\n    setInternalState(argb) {\n        const cam = Cam16.fromInt(argb);\n        this.internalHue = cam.hue;\n        this.internalChroma = cam.chroma;\n        this.internalTone = utils.lstarFromArgb(argb);\n        this.argb = argb;\n    }\n    /**\n     * Translates a color into different [ViewingConditions].\n     *\n     * Colors change appearance. They look different with lights on versus off,\n     * the same color, as in hex code, on white looks different when on black.\n     * This is called color relativity, most famously explicated by Josef Albers\n     * in Interaction of Color.\n     *\n     * In color science, color appearance models can account for this and\n     * calculate the appearance of a color in different settings. HCT is based on\n     * CAM16, a color appearance model, and uses it to make these calculations.\n     *\n     * See [ViewingConditions.make] for parameters affecting color appearance.\n     */\n    inViewingConditions(vc) {\n        // 1. Use CAM16 to find XYZ coordinates of color in specified VC.\n        const cam = Cam16.fromInt(this.toInt());\n        const viewedInVc = cam.xyzInViewingConditions(vc);\n        // 2. Create CAM16 of those XYZ coordinates in default VC.\n        const recastInVc = Cam16.fromXyzInViewingConditions(viewedInVc[0], viewedInVc[1], viewedInVc[2], ViewingConditions.make());\n        // 3. Create HCT from:\n        // - CAM16 using default VC with XYZ coordinates in specified VC.\n        // - L* converted from Y in XYZ coordinates in specified VC.\n        const recastHct = Hct.from(recastInVc.hue, recastInVc.chroma, utils.lstarFromY(viewedInVc[1]));\n        return recastHct;\n    }\n}\n//# sourceMappingURL=hct.js.map","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// material_color_utilities is designed to have a consistent API across\n// platforms and modular components that can be moved around easily. Using a\n// class as a namespace facilitates this.\n//\n// tslint:disable:class-as-namespace\nimport * as utils from '../utils/color_utils.js';\nimport * as math from '../utils/math_utils.js';\n/**\n * Utility methods for calculating contrast given two colors, or calculating a\n * color given one color and a contrast ratio.\n *\n * Contrast ratio is calculated using XYZ's Y. When linearized to match human\n * perception, Y becomes HCT's tone and L*a*b*'s' L*. Informally, this is the\n * lightness of a color.\n *\n * Methods refer to tone, T in the the HCT color space.\n * Tone is equivalent to L* in the L*a*b* color space, or L in the LCH color\n * space.\n */\nexport class Contrast {\n    /**\n     * Returns a contrast ratio, which ranges from 1 to 21.\n     *\n     * @param toneA Tone between 0 and 100. Values outside will be clamped.\n     * @param toneB Tone between 0 and 100. Values outside will be clamped.\n     */\n    static ratioOfTones(toneA, toneB) {\n        toneA = math.clampDouble(0.0, 100.0, toneA);\n        toneB = math.clampDouble(0.0, 100.0, toneB);\n        return Contrast.ratioOfYs(utils.yFromLstar(toneA), utils.yFromLstar(toneB));\n    }\n    static ratioOfYs(y1, y2) {\n        const lighter = y1 > y2 ? y1 : y2;\n        const darker = (lighter === y2) ? y1 : y2;\n        return (lighter + 5.0) / (darker + 5.0);\n    }\n    /**\n     * Returns a tone >= tone parameter that ensures ratio parameter.\n     * Return value is between 0 and 100.\n     * Returns -1 if ratio cannot be achieved with tone parameter.\n     *\n     * @param tone Tone return value must contrast with.\n     * Range is 0 to 100. Invalid values will result in -1 being returned.\n     * @param ratio Contrast ratio of return value and tone.\n     * Range is 1 to 21, invalid values have undefined behavior.\n     */\n    static lighter(tone, ratio) {\n        if (tone < 0.0 || tone > 100.0) {\n            return -1.0;\n        }\n        const darkY = utils.yFromLstar(tone);\n        const lightY = ratio * (darkY + 5.0) - 5.0;\n        const realContrast = Contrast.ratioOfYs(lightY, darkY);\n        const delta = Math.abs(realContrast - ratio);\n        if (realContrast < ratio && delta > 0.04) {\n            return -1;\n        }\n        // Ensure gamut mapping, which requires a 'range' on tone, will still result\n        // the correct ratio by darkening slightly.\n        const returnValue = utils.lstarFromY(lightY) + 0.4;\n        if (returnValue < 0 || returnValue > 100) {\n            return -1;\n        }\n        return returnValue;\n    }\n    /**\n     * Returns a tone <= tone parameter that ensures ratio parameter.\n     * Return value is between 0 and 100.\n     * Returns -1 if ratio cannot be achieved with tone parameter.\n     *\n     * @param tone Tone return value must contrast with.\n     * Range is 0 to 100. Invalid values will result in -1 being returned.\n     * @param ratio Contrast ratio of return value and tone.\n     * Range is 1 to 21, invalid values have undefined behavior.\n     */\n    static darker(tone, ratio) {\n        if (tone < 0.0 || tone > 100.0) {\n            return -1.0;\n        }\n        const lightY = utils.yFromLstar(tone);\n        const darkY = ((lightY + 5.0) / ratio) - 5.0;\n        const realContrast = Contrast.ratioOfYs(lightY, darkY);\n        const delta = Math.abs(realContrast - ratio);\n        if (realContrast < ratio && delta > 0.04) {\n            return -1;\n        }\n        // Ensure gamut mapping, which requires a 'range' on tone, will still result\n        // the correct ratio by darkening slightly.\n        const returnValue = utils.lstarFromY(darkY) - 0.4;\n        if (returnValue < 0 || returnValue > 100) {\n            return -1;\n        }\n        return returnValue;\n    }\n    /**\n     * Returns a tone >= tone parameter that ensures ratio parameter.\n     * Return value is between 0 and 100.\n     * Returns 100 if ratio cannot be achieved with tone parameter.\n     *\n     * This method is unsafe because the returned value is guaranteed to be in\n     * bounds for tone, i.e. between 0 and 100. However, that value may not reach\n     * the ratio with tone. For example, there is no color lighter than T100.\n     *\n     * @param tone Tone return value must contrast with.\n     * Range is 0 to 100. Invalid values will result in 100 being returned.\n     * @param ratio Desired contrast ratio of return value and tone parameter.\n     * Range is 1 to 21, invalid values have undefined behavior.\n     */\n    static lighterUnsafe(tone, ratio) {\n        const lighterSafe = Contrast.lighter(tone, ratio);\n        return (lighterSafe < 0.0) ? 100.0 : lighterSafe;\n    }\n    /**\n     * Returns a tone >= tone parameter that ensures ratio parameter.\n     * Return value is between 0 and 100.\n     * Returns 100 if ratio cannot be achieved with tone parameter.\n     *\n     * This method is unsafe because the returned value is guaranteed to be in\n     * bounds for tone, i.e. between 0 and 100. However, that value may not reach\n     * the [ratio with [tone]. For example, there is no color darker than T0.\n     *\n     * @param tone Tone return value must contrast with.\n     * Range is 0 to 100. Invalid values will result in 0 being returned.\n     * @param ratio Desired contrast ratio of return value and tone parameter.\n     * Range is 1 to 21, invalid values have undefined behavior.\n     */\n    static darkerUnsafe(tone, ratio) {\n        const darkerSafe = Contrast.darker(tone, ratio);\n        return (darkerSafe < 0.0) ? 0.0 : darkerSafe;\n    }\n}\n//# sourceMappingURL=contrast.js.map","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Hct } from '../hct/hct.js';\n// material_color_utilities is designed to have a consistent API across\n// platforms and modular components that can be moved around easily. Using a\n// class as a namespace facilitates this.\n//\n// tslint:disable:class-as-namespace\n/**\n * Check and/or fix universally disliked colors.\n * Color science studies of color preference indicate universal distaste for\n * dark yellow-greens, and also show this is correlated to distate for\n * biological waste and rotting food.\n *\n * See Palmer and Schloss, 2010 or Schloss and Palmer's Chapter 21 in Handbook\n * of Color Psychology (2015).\n */\nexport class DislikeAnalyzer {\n    /**\n     * Returns true if a color is disliked.\n     *\n     * @param hct A color to be judged.\n     * @return Whether the color is disliked.\n     *\n     * Disliked is defined as a dark yellow-green that is not neutral.\n     */\n    static isDisliked(hct) {\n        const huePasses = Math.round(hct.hue) >= 90.0 && Math.round(hct.hue) <= 111.0;\n        const chromaPasses = Math.round(hct.chroma) > 16.0;\n        const tonePasses = Math.round(hct.tone) < 65.0;\n        return huePasses && chromaPasses && tonePasses;\n    }\n    /**\n     * If a color is disliked, lighten it to make it likable.\n     *\n     * @param hct A color to be judged.\n     * @return A new color if the original color is disliked, or the original\n     *   color if it is acceptable.\n     */\n    static fixIfDisliked(hct) {\n        if (DislikeAnalyzer.isDisliked(hct)) {\n            return Hct.from(hct.hue, hct.chroma, 70.0);\n        }\n        return hct;\n    }\n}\n//# sourceMappingURL=dislike_analyzer.js.map","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Contrast } from '../contrast/contrast.js';\nimport * as math from '../utils/math_utils.js';\n/**\n * A color that adjusts itself based on UI state provided by DynamicScheme.\n *\n * Colors without backgrounds do not change tone when contrast changes. Colors\n * with backgrounds become closer to their background as contrast lowers, and\n * further when contrast increases.\n *\n * Prefer static constructors. They require either a hexcode, a palette and\n * tone, or a hue and chroma. Optionally, they can provide a background\n * DynamicColor.\n */\nexport class DynamicColor {\n    /**\n     * Create a DynamicColor defined by a TonalPalette and HCT tone.\n     *\n     * @param args Functions with DynamicScheme as input. Must provide a palette\n     * and tone. May provide a background DynamicColor and ToneDeltaConstraint.\n     */\n    static fromPalette(args) {\n        return new DynamicColor(args.name ?? '', args.palette, args.tone, args.isBackground ?? false, args.background, args.secondBackground, args.contrastCurve, args.toneDeltaPair);\n    }\n    /**\n     * The base constructor for DynamicColor.\n     *\n     * _Strongly_ prefer using one of the convenience constructors. This class is\n     * arguably too flexible to ensure it can support any scenario. Functional\n     * arguments allow  overriding without risks that come with subclasses.\n     *\n     * For example, the default behavior of adjust tone at max contrast\n     * to be at a 7.0 ratio with its background is principled and\n     * matches accessibility guidance. That does not mean it's the desired\n     * approach for _every_ design system, and every color pairing,\n     * always, in every case.\n     *\n     * @param name The name of the dynamic color. Defaults to empty.\n     * @param palette Function that provides a TonalPalette given\n     * DynamicScheme. A TonalPalette is defined by a hue and chroma, so this\n     * replaces the need to specify hue/chroma. By providing a tonal palette, when\n     * contrast adjustments are made, intended chroma can be preserved.\n     * @param tone Function that provides a tone, given a DynamicScheme.\n     * @param isBackground Whether this dynamic color is a background, with\n     * some other color as the foreground. Defaults to false.\n     * @param background The background of the dynamic color (as a function of a\n     *     `DynamicScheme`), if it exists.\n     * @param secondBackground A second background of the dynamic color (as a\n     *     function of a `DynamicScheme`), if it\n     * exists.\n     * @param contrastCurve A `ContrastCurve` object specifying how its contrast\n     * against its background should behave in various contrast levels options.\n     * @param toneDeltaPair A `ToneDeltaPair` object specifying a tone delta\n     * constraint between two colors. One of them must be the color being\n     * constructed.\n     */\n    constructor(name, palette, tone, isBackground, background, secondBackground, contrastCurve, toneDeltaPair) {\n        this.name = name;\n        this.palette = palette;\n        this.tone = tone;\n        this.isBackground = isBackground;\n        this.background = background;\n        this.secondBackground = secondBackground;\n        this.contrastCurve = contrastCurve;\n        this.toneDeltaPair = toneDeltaPair;\n        this.hctCache = new Map();\n        if ((!background) && secondBackground) {\n            throw new Error(`Color ${name} has secondBackground` +\n                `defined, but background is not defined.`);\n        }\n        if ((!background) && contrastCurve) {\n            throw new Error(`Color ${name} has contrastCurve` +\n                `defined, but background is not defined.`);\n        }\n        if (background && !contrastCurve) {\n            throw new Error(`Color ${name} has background` +\n                `defined, but contrastCurve is not defined.`);\n        }\n    }\n    /**\n     * Return a ARGB integer (i.e. a hex code).\n     *\n     * @param scheme Defines the conditions of the user interface, for example,\n     * whether or not it is dark mode or light mode, and what the desired\n     * contrast level is.\n     */\n    getArgb(scheme) {\n        return this.getHct(scheme).toInt();\n    }\n    /**\n     * Return a color, expressed in the HCT color space, that this\n     * DynamicColor is under the conditions in scheme.\n     *\n     * @param scheme Defines the conditions of the user interface, for example,\n     * whether or not it is dark mode or light mode, and what the desired\n     * contrast level is.\n     */\n    getHct(scheme) {\n        const cachedAnswer = this.hctCache.get(scheme);\n        if (cachedAnswer != null) {\n            return cachedAnswer;\n        }\n        const tone = this.getTone(scheme);\n        const answer = this.palette(scheme).getHct(tone);\n        if (this.hctCache.size > 4) {\n            this.hctCache.clear();\n        }\n        this.hctCache.set(scheme, answer);\n        return answer;\n    }\n    /**\n     * Return a tone, T in the HCT color space, that this DynamicColor is under\n     * the conditions in scheme.\n     *\n     * @param scheme Defines the conditions of the user interface, for example,\n     * whether or not it is dark mode or light mode, and what the desired\n     * contrast level is.\n     */\n    getTone(scheme) {\n        const decreasingContrast = scheme.contrastLevel < 0;\n        // Case 1: dual foreground, pair of colors with delta constraint.\n        if (this.toneDeltaPair) {\n            const toneDeltaPair = this.toneDeltaPair(scheme);\n            const roleA = toneDeltaPair.roleA;\n            const roleB = toneDeltaPair.roleB;\n            const delta = toneDeltaPair.delta;\n            const polarity = toneDeltaPair.polarity;\n            const stayTogether = toneDeltaPair.stayTogether;\n            const bg = this.background(scheme);\n            const bgTone = bg.getTone(scheme);\n            const aIsNearer = (polarity === 'nearer' ||\n                (polarity === 'lighter' && !scheme.isDark) ||\n                (polarity === 'darker' && scheme.isDark));\n            const nearer = aIsNearer ? roleA : roleB;\n            const farther = aIsNearer ? roleB : roleA;\n            const amNearer = this.name === nearer.name;\n            const expansionDir = scheme.isDark ? 1 : -1;\n            // 1st round: solve to min, each\n            const nContrast = nearer.contrastCurve.getContrast(scheme.contrastLevel);\n            const fContrast = farther.contrastCurve.getContrast(scheme.contrastLevel);\n            // If a color is good enough, it is not adjusted.\n            // Initial and adjusted tones for `nearer`\n            const nInitialTone = nearer.tone(scheme);\n            let nTone = Contrast.ratioOfTones(bgTone, nInitialTone) >= nContrast ?\n                nInitialTone :\n                DynamicColor.foregroundTone(bgTone, nContrast);\n            // Initial and adjusted tones for `farther`\n            const fInitialTone = farther.tone(scheme);\n            let fTone = Contrast.ratioOfTones(bgTone, fInitialTone) >= fContrast ?\n                fInitialTone :\n                DynamicColor.foregroundTone(bgTone, fContrast);\n            if (decreasingContrast) {\n                // If decreasing contrast, adjust color to the \"bare minimum\"\n                // that satisfies contrast.\n                nTone = DynamicColor.foregroundTone(bgTone, nContrast);\n                fTone = DynamicColor.foregroundTone(bgTone, fContrast);\n            }\n            if ((fTone - nTone) * expansionDir >= delta) {\n                // Good! Tones satisfy the constraint; no change needed.\n            }\n            else {\n                // 2nd round: expand farther to match delta.\n                fTone = math.clampDouble(0, 100, nTone + delta * expansionDir);\n                if ((fTone - nTone) * expansionDir >= delta) {\n                    // Good! Tones now satisfy the constraint; no change needed.\n                }\n                else {\n                    // 3rd round: contract nearer to match delta.\n                    nTone = math.clampDouble(0, 100, fTone - delta * expansionDir);\n                }\n            }\n            // Avoids the 50-59 awkward zone.\n            if (50 <= nTone && nTone < 60) {\n                // If `nearer` is in the awkward zone, move it away, together with\n                // `farther`.\n                if (expansionDir > 0) {\n                    nTone = 60;\n                    fTone = Math.max(fTone, nTone + delta * expansionDir);\n                }\n                else {\n                    nTone = 49;\n                    fTone = Math.min(fTone, nTone + delta * expansionDir);\n                }\n            }\n            else if (50 <= fTone && fTone < 60) {\n                if (stayTogether) {\n                    // Fixes both, to avoid two colors on opposite sides of the \"awkward\n                    // zone\".\n                    if (expansionDir > 0) {\n                        nTone = 60;\n                        fTone = Math.max(fTone, nTone + delta * expansionDir);\n                    }\n                    else {\n                        nTone = 49;\n                        fTone = Math.min(fTone, nTone + delta * expansionDir);\n                    }\n                }\n                else {\n                    // Not required to stay together; fixes just one.\n                    if (expansionDir > 0) {\n                        fTone = 60;\n                    }\n                    else {\n                        fTone = 49;\n                    }\n                }\n            }\n            // Returns `nTone` if this color is `nearer`, otherwise `fTone`.\n            return amNearer ? nTone : fTone;\n        }\n        else {\n            // Case 2: No contrast pair; just solve for itself.\n            let answer = this.tone(scheme);\n            if (this.background == null) {\n                return answer; // No adjustment for colors with no background.\n            }\n            const bgTone = this.background(scheme).getTone(scheme);\n            const desiredRatio = this.contrastCurve.getContrast(scheme.contrastLevel);\n            if (Contrast.ratioOfTones(bgTone, answer) >= desiredRatio) {\n                // Don't \"improve\" what's good enough.\n            }\n            else {\n                // Rough improvement.\n                answer = DynamicColor.foregroundTone(bgTone, desiredRatio);\n            }\n            if (decreasingContrast) {\n                answer = DynamicColor.foregroundTone(bgTone, desiredRatio);\n            }\n            if (this.isBackground && 50 <= answer && answer < 60) {\n                // Must adjust\n                if (Contrast.ratioOfTones(49, bgTone) >= desiredRatio) {\n                    answer = 49;\n                }\n                else {\n                    answer = 60;\n                }\n            }\n            if (this.secondBackground) {\n                // Case 3: Adjust for dual backgrounds.\n                const [bg1, bg2] = [this.background, this.secondBackground];\n                const [bgTone1, bgTone2] = [bg1(scheme).getTone(scheme), bg2(scheme).getTone(scheme)];\n                const [upper, lower] = [Math.max(bgTone1, bgTone2), Math.min(bgTone1, bgTone2)];\n                if (Contrast.ratioOfTones(upper, answer) >= desiredRatio &&\n                    Contrast.ratioOfTones(lower, answer) >= desiredRatio) {\n                    return answer;\n                }\n                // The darkest light tone that satisfies the desired ratio,\n                // or -1 if such ratio cannot be reached.\n                const lightOption = Contrast.lighter(upper, desiredRatio);\n                // The lightest dark tone that satisfies the desired ratio,\n                // or -1 if such ratio cannot be reached.\n                const darkOption = Contrast.darker(lower, desiredRatio);\n                // Tones suitable for the foreground.\n                const availables = [];\n                if (lightOption !== -1)\n                    availables.push(lightOption);\n                if (darkOption !== -1)\n                    availables.push(darkOption);\n                const prefersLight = DynamicColor.tonePrefersLightForeground(bgTone1) ||\n                    DynamicColor.tonePrefersLightForeground(bgTone2);\n                if (prefersLight) {\n                    return (lightOption < 0) ? 100 : lightOption;\n                }\n                if (availables.length === 1) {\n                    return availables[0];\n                }\n                return (darkOption < 0) ? 0 : darkOption;\n            }\n            return answer;\n        }\n    }\n    /**\n     * Given a background tone, find a foreground tone, while ensuring they reach\n     * a contrast ratio that is as close to [ratio] as possible.\n     *\n     * @param bgTone Tone in HCT. Range is 0 to 100, undefined behavior when it\n     *     falls outside that range.\n     * @param ratio The contrast ratio desired between bgTone and the return\n     *     value.\n     */\n    static foregroundTone(bgTone, ratio) {\n        const lighterTone = Contrast.lighterUnsafe(bgTone, ratio);\n        const darkerTone = Contrast.darkerUnsafe(bgTone, ratio);\n        const lighterRatio = Contrast.ratioOfTones(lighterTone, bgTone);\n        const darkerRatio = Contrast.ratioOfTones(darkerTone, bgTone);\n        const preferLighter = DynamicColor.tonePrefersLightForeground(bgTone);\n        if (preferLighter) {\n            // This handles an edge case where the initial contrast ratio is high\n            // (ex. 13.0), and the ratio passed to the function is that high\n            // ratio, and both the lighter and darker ratio fails to pass that\n            // ratio.\n            //\n            // This was observed with Tonal Spot's On Primary Container turning\n            // black momentarily between high and max contrast in light mode. PC's\n            // standard tone was T90, OPC's was T10, it was light mode, and the\n            // contrast value was 0.6568521221032331.\n            const negligibleDifference = Math.abs(lighterRatio - darkerRatio) < 0.1 &&\n                lighterRatio < ratio && darkerRatio < ratio;\n            return lighterRatio >= ratio || lighterRatio >= darkerRatio ||\n                negligibleDifference ?\n                lighterTone :\n                darkerTone;\n        }\n        else {\n            return darkerRatio >= ratio || darkerRatio >= lighterRatio ? darkerTone :\n                lighterTone;\n        }\n    }\n    /**\n     * Returns whether [tone] prefers a light foreground.\n     *\n     * People prefer white foregrounds on ~T60-70. Observed over time, and also\n     * by Andrew Somers during research for APCA.\n     *\n     * T60 used as to create the smallest discontinuity possible when skipping\n     * down to T49 in order to ensure light foregrounds.\n     * Since `tertiaryContainer` in dark monochrome scheme requires a tone of\n     * 60, it should not be adjusted. Therefore, 60 is excluded here.\n     */\n    static tonePrefersLightForeground(tone) {\n        return Math.round(tone) < 60.0;\n    }\n    /**\n     * Returns whether [tone] can reach a contrast ratio of 4.5 with a lighter\n     * color.\n     */\n    static toneAllowsLightForeground(tone) {\n        return Math.round(tone) <= 49.0;\n    }\n    /**\n     * Adjust a tone such that white has 4.5 contrast, if the tone is\n     * reasonably close to supporting it.\n     */\n    static enableLightForeground(tone) {\n        if (DynamicColor.tonePrefersLightForeground(tone) &&\n            !DynamicColor.toneAllowsLightForeground(tone)) {\n            return 49.0;\n        }\n        return tone;\n    }\n}\n//# sourceMappingURL=dynamic_color.js.map","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Set of themes supported by Dynamic Color.\n * Instantiate the corresponding subclass, ex. SchemeTonalSpot, to create\n * colors corresponding to the theme.\n */\nexport var Variant;\n(function (Variant) {\n    Variant[Variant[\"MONOCHROME\"] = 0] = \"MONOCHROME\";\n    Variant[Variant[\"NEUTRAL\"] = 1] = \"NEUTRAL\";\n    Variant[Variant[\"TONAL_SPOT\"] = 2] = \"TONAL_SPOT\";\n    Variant[Variant[\"VIBRANT\"] = 3] = \"VIBRANT\";\n    Variant[Variant[\"EXPRESSIVE\"] = 4] = \"EXPRESSIVE\";\n    Variant[Variant[\"FIDELITY\"] = 5] = \"FIDELITY\";\n    Variant[Variant[\"CONTENT\"] = 6] = \"CONTENT\";\n    Variant[Variant[\"RAINBOW\"] = 7] = \"RAINBOW\";\n    Variant[Variant[\"FRUIT_SALAD\"] = 8] = \"FRUIT_SALAD\";\n})(Variant || (Variant = {}));\n//# sourceMappingURL=variant.js.map","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as math from '../utils/math_utils.js';\n/**\n * A class containing the contrast curve for a dynamic color on its background.\n *\n * The four values correspond to contrast requirements for contrast levels\n * -1.0, 0.0, 0.5, and 1.0, respectively.\n */\nexport class ContrastCurve {\n    /**\n     * Creates a `ContrastCurve` object.\n     *\n     * @param low Contrast requirement for contrast level -1.0\n     * @param normal Contrast requirement for contrast level 0.0\n     * @param medium Contrast requirement for contrast level 0.5\n     * @param high Contrast requirement for contrast level 1.0\n     */\n    constructor(low, normal, medium, high) {\n        this.low = low;\n        this.normal = normal;\n        this.medium = medium;\n        this.high = high;\n    }\n    /**\n     * Returns the contrast ratio at a given contrast level.\n     *\n     * @param contrastLevel The contrast level. 0.0 is the default (normal);\n     * -1.0 is the lowest; 1.0 is the highest.\n     * @return The contrast ratio, a number between 1.0 and 21.0.\n     */\n    getContrast(contrastLevel) {\n        if (contrastLevel <= -1.0) {\n            return this.low;\n        }\n        else if (contrastLevel < 0.0) {\n            return math.lerp(this.low, this.normal, (contrastLevel - (-1)) / 1);\n        }\n        else if (contrastLevel < 0.5) {\n            return math.lerp(this.normal, this.medium, (contrastLevel - 0) / 0.5);\n        }\n        else if (contrastLevel < 1.0) {\n            return math.lerp(this.medium, this.high, (contrastLevel - 0.5) / 0.5);\n        }\n        else {\n            return this.high;\n        }\n    }\n}\n//# sourceMappingURL=contrast_curve.js.map","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Documents a constraint between two DynamicColors, in which their tones must\n * have a certain distance from each other.\n *\n * Prefer a DynamicColor with a background, this is for special cases when\n * designers want tonal distance, literally contrast, between two colors that\n * don't have a background / foreground relationship or a contrast guarantee.\n */\nexport class ToneDeltaPair {\n    /**\n     * Documents a constraint in tone distance between two DynamicColors.\n     *\n     * The polarity is an adjective that describes \"A\", compared to \"B\".\n     *\n     * For instance, ToneDeltaPair(A, B, 15, 'darker', stayTogether) states that\n     * A's tone should be at least 15 darker than B's.\n     *\n     * 'nearer' and 'farther' describes closeness to the surface roles. For\n     * instance, ToneDeltaPair(A, B, 10, 'nearer', stayTogether) states that A\n     * should be 10 lighter than B in light mode, and 10 darker than B in dark\n     * mode.\n     *\n     * @param roleA The first role in a pair.\n     * @param roleB The second role in a pair.\n     * @param delta Required difference between tones. Absolute value, negative\n     * values have undefined behavior.\n     * @param polarity The relative relation between tones of roleA and roleB,\n     * as described above.\n     * @param stayTogether Whether these two roles should stay on the same side of\n     * the \"awkward zone\" (T50-59). This is necessary for certain cases where\n     * one role has two backgrounds.\n     */\n    constructor(roleA, roleB, delta, polarity, stayTogether) {\n        this.roleA = roleA;\n        this.roleB = roleB;\n        this.delta = delta;\n        this.polarity = polarity;\n        this.stayTogether = stayTogether;\n    }\n}\n//# sourceMappingURL=tone_delta_pair.js.map","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DislikeAnalyzer } from '../dislike/dislike_analyzer.js';\nimport { Hct } from '../hct/hct.js';\nimport { ViewingConditions } from '../hct/viewing_conditions.js';\nimport { Variant } from '../scheme/variant.js';\nimport { ContrastCurve } from './contrast_curve.js';\nimport { DynamicColor } from './dynamic_color.js';\nimport { ToneDeltaPair } from './tone_delta_pair.js';\nfunction isFidelity(scheme) {\n    return scheme.variant === Variant.FIDELITY ||\n        scheme.variant === Variant.CONTENT;\n}\nfunction isMonochrome(scheme) {\n    return scheme.variant === Variant.MONOCHROME;\n}\nfunction findDesiredChromaByTone(hue, chroma, tone, byDecreasingTone) {\n    let answer = tone;\n    let closestToChroma = Hct.from(hue, chroma, tone);\n    if (closestToChroma.chroma < chroma) {\n        let chromaPeak = closestToChroma.chroma;\n        while (closestToChroma.chroma < chroma) {\n            answer += byDecreasingTone ? -1.0 : 1.0;\n            const potentialSolution = Hct.from(hue, chroma, answer);\n            if (chromaPeak > potentialSolution.chroma) {\n                break;\n            }\n            if (Math.abs(potentialSolution.chroma - chroma) < 0.4) {\n                break;\n            }\n            const potentialDelta = Math.abs(potentialSolution.chroma - chroma);\n            const currentDelta = Math.abs(closestToChroma.chroma - chroma);\n            if (potentialDelta < currentDelta) {\n                closestToChroma = potentialSolution;\n            }\n            chromaPeak = Math.max(chromaPeak, potentialSolution.chroma);\n        }\n    }\n    return answer;\n}\nfunction viewingConditionsForAlbers(scheme) {\n    return ViewingConditions.make(\n    /*whitePoint=*/ undefined, \n    /*adaptingLuminance=*/ undefined, \n    /*backgroundLstar=*/ scheme.isDark ? 30 : 80, \n    /*surround=*/ undefined, \n    /*discountingIlluminant=*/ undefined);\n}\nfunction performAlbers(prealbers, scheme) {\n    const albersd = prealbers.inViewingConditions(viewingConditionsForAlbers(scheme));\n    if (DynamicColor.tonePrefersLightForeground(prealbers.tone) &&\n        !DynamicColor.toneAllowsLightForeground(albersd.tone)) {\n        return DynamicColor.enableLightForeground(prealbers.tone);\n    }\n    else {\n        return DynamicColor.enableLightForeground(albersd.tone);\n    }\n}\n/**\n * DynamicColors for the colors in the Material Design system.\n */\n// Material Color Utilities namespaces the various utilities it provides.\n// tslint:disable-next-line:class-as-namespace\nexport class MaterialDynamicColors {\n    static highestSurface(s) {\n        return s.isDark ? MaterialDynamicColors.surfaceBright :\n            MaterialDynamicColors.surfaceDim;\n    }\n}\nMaterialDynamicColors.contentAccentToneDelta = 15.0;\nMaterialDynamicColors.primaryPaletteKeyColor = DynamicColor.fromPalette({\n    name: 'primary_palette_key_color',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => s.primaryPalette.keyColor.tone,\n});\nMaterialDynamicColors.secondaryPaletteKeyColor = DynamicColor.fromPalette({\n    name: 'secondary_palette_key_color',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => s.secondaryPalette.keyColor.tone,\n});\nMaterialDynamicColors.tertiaryPaletteKeyColor = DynamicColor.fromPalette({\n    name: 'tertiary_palette_key_color',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => s.tertiaryPalette.keyColor.tone,\n});\nMaterialDynamicColors.neutralPaletteKeyColor = DynamicColor.fromPalette({\n    name: 'neutral_palette_key_color',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.neutralPalette.keyColor.tone,\n});\nMaterialDynamicColors.neutralVariantPaletteKeyColor = DynamicColor.fromPalette({\n    name: 'neutral_variant_palette_key_color',\n    palette: (s) => s.neutralVariantPalette,\n    tone: (s) => s.neutralVariantPalette.keyColor.tone,\n});\nMaterialDynamicColors.background = DynamicColor.fromPalette({\n    name: 'background',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 6 : 98,\n    isBackground: true,\n});\nMaterialDynamicColors.onBackground = DynamicColor.fromPalette({\n    name: 'on_background',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 90 : 10,\n    background: (s) => MaterialDynamicColors.background,\n    contrastCurve: new ContrastCurve(3, 3, 4.5, 7),\n});\nMaterialDynamicColors.surface = DynamicColor.fromPalette({\n    name: 'surface',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 6 : 98,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceDim = DynamicColor.fromPalette({\n    name: 'surface_dim',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 6 : 87,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceBright = DynamicColor.fromPalette({\n    name: 'surface_bright',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 24 : 98,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceContainerLowest = DynamicColor.fromPalette({\n    name: 'surface_container_lowest',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 4 : 100,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceContainerLow = DynamicColor.fromPalette({\n    name: 'surface_container_low',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 10 : 96,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceContainer = DynamicColor.fromPalette({\n    name: 'surface_container',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 12 : 94,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceContainerHigh = DynamicColor.fromPalette({\n    name: 'surface_container_high',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 17 : 92,\n    isBackground: true,\n});\nMaterialDynamicColors.surfaceContainerHighest = DynamicColor.fromPalette({\n    name: 'surface_container_highest',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 22 : 90,\n    isBackground: true,\n});\nMaterialDynamicColors.onSurface = DynamicColor.fromPalette({\n    name: 'on_surface',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 90 : 10,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.surfaceVariant = DynamicColor.fromPalette({\n    name: 'surface_variant',\n    palette: (s) => s.neutralVariantPalette,\n    tone: (s) => s.isDark ? 30 : 90,\n    isBackground: true,\n});\nMaterialDynamicColors.onSurfaceVariant = DynamicColor.fromPalette({\n    name: 'on_surface_variant',\n    palette: (s) => s.neutralVariantPalette,\n    tone: (s) => s.isDark ? 80 : 30,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n});\nMaterialDynamicColors.inverseSurface = DynamicColor.fromPalette({\n    name: 'inverse_surface',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 90 : 20,\n});\nMaterialDynamicColors.inverseOnSurface = DynamicColor.fromPalette({\n    name: 'inverse_on_surface',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => s.isDark ? 20 : 95,\n    background: (s) => MaterialDynamicColors.inverseSurface,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.outline = DynamicColor.fromPalette({\n    name: 'outline',\n    palette: (s) => s.neutralVariantPalette,\n    tone: (s) => s.isDark ? 60 : 50,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1.5, 3, 4.5, 7),\n});\nMaterialDynamicColors.outlineVariant = DynamicColor.fromPalette({\n    name: 'outline_variant',\n    palette: (s) => s.neutralVariantPalette,\n    tone: (s) => s.isDark ? 30 : 80,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n});\nMaterialDynamicColors.shadow = DynamicColor.fromPalette({\n    name: 'shadow',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => 0,\n});\nMaterialDynamicColors.scrim = DynamicColor.fromPalette({\n    name: 'scrim',\n    palette: (s) => s.neutralPalette,\n    tone: (s) => 0,\n});\nMaterialDynamicColors.surfaceTint = DynamicColor.fromPalette({\n    name: 'surface_tint',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => s.isDark ? 80 : 40,\n    isBackground: true,\n});\nMaterialDynamicColors.primary = DynamicColor.fromPalette({\n    name: 'primary',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 100 : 0;\n        }\n        return s.isDark ? 80 : 40;\n    },\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.primaryContainer, MaterialDynamicColors.primary, 15, 'nearer', false),\n});\nMaterialDynamicColors.onPrimary = DynamicColor.fromPalette({\n    name: 'on_primary',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 10 : 90;\n        }\n        return s.isDark ? 20 : 100;\n    },\n    background: (s) => MaterialDynamicColors.primary,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.primaryContainer = DynamicColor.fromPalette({\n    name: 'primary_container',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => {\n        if (isFidelity(s)) {\n            return performAlbers(s.sourceColorHct, s);\n        }\n        if (isMonochrome(s)) {\n            return s.isDark ? 85 : 25;\n        }\n        return s.isDark ? 30 : 90;\n    },\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.primaryContainer, MaterialDynamicColors.primary, 15, 'nearer', false),\n});\nMaterialDynamicColors.onPrimaryContainer = DynamicColor.fromPalette({\n    name: 'on_primary_container',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => {\n        if (isFidelity(s)) {\n            return DynamicColor.foregroundTone(MaterialDynamicColors.primaryContainer.tone(s), 4.5);\n        }\n        if (isMonochrome(s)) {\n            return s.isDark ? 0 : 100;\n        }\n        return s.isDark ? 90 : 10;\n    },\n    background: (s) => MaterialDynamicColors.primaryContainer,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.inversePrimary = DynamicColor.fromPalette({\n    name: 'inverse_primary',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => s.isDark ? 40 : 80,\n    background: (s) => MaterialDynamicColors.inverseSurface,\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n});\nMaterialDynamicColors.secondary = DynamicColor.fromPalette({\n    name: 'secondary',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => s.isDark ? 80 : 40,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.secondaryContainer, MaterialDynamicColors.secondary, 15, 'nearer', false),\n});\nMaterialDynamicColors.onSecondary = DynamicColor.fromPalette({\n    name: 'on_secondary',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 10 : 100;\n        }\n        else {\n            return s.isDark ? 20 : 100;\n        }\n    },\n    background: (s) => MaterialDynamicColors.secondary,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.secondaryContainer = DynamicColor.fromPalette({\n    name: 'secondary_container',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => {\n        const initialTone = s.isDark ? 30 : 90;\n        if (isMonochrome(s)) {\n            return s.isDark ? 30 : 85;\n        }\n        if (!isFidelity(s)) {\n            return initialTone;\n        }\n        let answer = findDesiredChromaByTone(s.secondaryPalette.hue, s.secondaryPalette.chroma, initialTone, s.isDark ? false : true);\n        answer = performAlbers(s.secondaryPalette.getHct(answer), s);\n        return answer;\n    },\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.secondaryContainer, MaterialDynamicColors.secondary, 15, 'nearer', false),\n});\nMaterialDynamicColors.onSecondaryContainer = DynamicColor.fromPalette({\n    name: 'on_secondary_container',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => {\n        if (!isFidelity(s)) {\n            return s.isDark ? 90 : 10;\n        }\n        return DynamicColor.foregroundTone(MaterialDynamicColors.secondaryContainer.tone(s), 4.5);\n    },\n    background: (s) => MaterialDynamicColors.secondaryContainer,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.tertiary = DynamicColor.fromPalette({\n    name: 'tertiary',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 90 : 25;\n        }\n        return s.isDark ? 80 : 40;\n    },\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.tertiaryContainer, MaterialDynamicColors.tertiary, 15, 'nearer', false),\n});\nMaterialDynamicColors.onTertiary = DynamicColor.fromPalette({\n    name: 'on_tertiary',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 10 : 90;\n        }\n        return s.isDark ? 20 : 100;\n    },\n    background: (s) => MaterialDynamicColors.tertiary,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.tertiaryContainer = DynamicColor.fromPalette({\n    name: 'tertiary_container',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 60 : 49;\n        }\n        if (!isFidelity(s)) {\n            return s.isDark ? 30 : 90;\n        }\n        const albersTone = performAlbers(s.tertiaryPalette.getHct(s.sourceColorHct.tone), s);\n        const proposedHct = s.tertiaryPalette.getHct(albersTone);\n        return DislikeAnalyzer.fixIfDisliked(proposedHct).tone;\n    },\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.tertiaryContainer, MaterialDynamicColors.tertiary, 15, 'nearer', false),\n});\nMaterialDynamicColors.onTertiaryContainer = DynamicColor.fromPalette({\n    name: 'on_tertiary_container',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => {\n        if (isMonochrome(s)) {\n            return s.isDark ? 0 : 100;\n        }\n        if (!isFidelity(s)) {\n            return s.isDark ? 90 : 10;\n        }\n        return DynamicColor.foregroundTone(MaterialDynamicColors.tertiaryContainer.tone(s), 4.5);\n    },\n    background: (s) => MaterialDynamicColors.tertiaryContainer,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.error = DynamicColor.fromPalette({\n    name: 'error',\n    palette: (s) => s.errorPalette,\n    tone: (s) => s.isDark ? 80 : 40,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.errorContainer, MaterialDynamicColors.error, 15, 'nearer', false),\n});\nMaterialDynamicColors.onError = DynamicColor.fromPalette({\n    name: 'on_error',\n    palette: (s) => s.errorPalette,\n    tone: (s) => s.isDark ? 20 : 100,\n    background: (s) => MaterialDynamicColors.error,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.errorContainer = DynamicColor.fromPalette({\n    name: 'error_container',\n    palette: (s) => s.errorPalette,\n    tone: (s) => s.isDark ? 30 : 90,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.errorContainer, MaterialDynamicColors.error, 15, 'nearer', false),\n});\nMaterialDynamicColors.onErrorContainer = DynamicColor.fromPalette({\n    name: 'on_error_container',\n    palette: (s) => s.errorPalette,\n    tone: (s) => s.isDark ? 90 : 10,\n    background: (s) => MaterialDynamicColors.errorContainer,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.primaryFixed = DynamicColor.fromPalette({\n    name: 'primary_fixed',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => isMonochrome(s) ? 40.0 : 90.0,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.primaryFixed, MaterialDynamicColors.primaryFixedDim, 10, 'lighter', true),\n});\nMaterialDynamicColors.primaryFixedDim = DynamicColor.fromPalette({\n    name: 'primary_fixed_dim',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => isMonochrome(s) ? 30.0 : 80.0,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.primaryFixed, MaterialDynamicColors.primaryFixedDim, 10, 'lighter', true),\n});\nMaterialDynamicColors.onPrimaryFixed = DynamicColor.fromPalette({\n    name: 'on_primary_fixed',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => isMonochrome(s) ? 100.0 : 10.0,\n    background: (s) => MaterialDynamicColors.primaryFixedDim,\n    secondBackground: (s) => MaterialDynamicColors.primaryFixed,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.onPrimaryFixedVariant = DynamicColor.fromPalette({\n    name: 'on_primary_fixed_variant',\n    palette: (s) => s.primaryPalette,\n    tone: (s) => isMonochrome(s) ? 90.0 : 30.0,\n    background: (s) => MaterialDynamicColors.primaryFixedDim,\n    secondBackground: (s) => MaterialDynamicColors.primaryFixed,\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n});\nMaterialDynamicColors.secondaryFixed = DynamicColor.fromPalette({\n    name: 'secondary_fixed',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => isMonochrome(s) ? 80.0 : 90.0,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.secondaryFixed, MaterialDynamicColors.secondaryFixedDim, 10, 'lighter', true),\n});\nMaterialDynamicColors.secondaryFixedDim = DynamicColor.fromPalette({\n    name: 'secondary_fixed_dim',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => isMonochrome(s) ? 70.0 : 80.0,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.secondaryFixed, MaterialDynamicColors.secondaryFixedDim, 10, 'lighter', true),\n});\nMaterialDynamicColors.onSecondaryFixed = DynamicColor.fromPalette({\n    name: 'on_secondary_fixed',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => 10.0,\n    background: (s) => MaterialDynamicColors.secondaryFixedDim,\n    secondBackground: (s) => MaterialDynamicColors.secondaryFixed,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.onSecondaryFixedVariant = DynamicColor.fromPalette({\n    name: 'on_secondary_fixed_variant',\n    palette: (s) => s.secondaryPalette,\n    tone: (s) => isMonochrome(s) ? 25.0 : 30.0,\n    background: (s) => MaterialDynamicColors.secondaryFixedDim,\n    secondBackground: (s) => MaterialDynamicColors.secondaryFixed,\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n});\nMaterialDynamicColors.tertiaryFixed = DynamicColor.fromPalette({\n    name: 'tertiary_fixed',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => isMonochrome(s) ? 40.0 : 90.0,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.tertiaryFixed, MaterialDynamicColors.tertiaryFixedDim, 10, 'lighter', true),\n});\nMaterialDynamicColors.tertiaryFixedDim = DynamicColor.fromPalette({\n    name: 'tertiary_fixed_dim',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => isMonochrome(s) ? 30.0 : 80.0,\n    isBackground: true,\n    background: (s) => MaterialDynamicColors.highestSurface(s),\n    contrastCurve: new ContrastCurve(1, 1, 3, 7),\n    toneDeltaPair: (s) => new ToneDeltaPair(MaterialDynamicColors.tertiaryFixed, MaterialDynamicColors.tertiaryFixedDim, 10, 'lighter', true),\n});\nMaterialDynamicColors.onTertiaryFixed = DynamicColor.fromPalette({\n    name: 'on_tertiary_fixed',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => isMonochrome(s) ? 100.0 : 10.0,\n    background: (s) => MaterialDynamicColors.tertiaryFixedDim,\n    secondBackground: (s) => MaterialDynamicColors.tertiaryFixed,\n    contrastCurve: new ContrastCurve(4.5, 7, 11, 21),\n});\nMaterialDynamicColors.onTertiaryFixedVariant = DynamicColor.fromPalette({\n    name: 'on_tertiary_fixed_variant',\n    palette: (s) => s.tertiaryPalette,\n    tone: (s) => isMonochrome(s) ? 90.0 : 30.0,\n    background: (s) => MaterialDynamicColors.tertiaryFixedDim,\n    secondBackground: (s) => MaterialDynamicColors.tertiaryFixed,\n    contrastCurve: new ContrastCurve(3, 4.5, 7, 11),\n});\n//# sourceMappingURL=material_dynamic_colors.js.map","\"use strict\";\nconst warnings = {};\nconst v8_0_0 = \"8.0.0\";\nfunction deprecation(version, message, ignoreDepth = 3) {\n  if (warnings[message]) {\n    return;\n  }\n  let stack = new Error().stack;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (console.groupCollapsed) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        `${message}\nDeprecated since v${version}`\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", `${message}\nDeprecated since v${version}`);\n      console.warn(stack);\n    }\n  }\n  warnings[message] = true;\n}\n\nexport { deprecation, v8_0_0 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","\"use strict\";\nfunction addProgramDefines(src, isES300, isFragment) {\n  if (isES300)\n    return src;\n  if (isFragment) {\n    src = src.replace(\"out vec4 finalColor;\", \"\");\n    return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n  }\n  return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n\nexport { addProgramDefines };\n//# sourceMappingURL=addProgramDefines.mjs.map\n","\"use strict\";\nfunction ensurePrecision(src, options, isFragment) {\n  const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n  if (src.substring(0, 9) !== \"precision\") {\n    let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n    if (precision === \"highp\" && maxSupportedPrecision !== \"highp\") {\n      precision = \"mediump\";\n    }\n    return `precision ${precision} float;\n${src}`;\n  } else if (maxSupportedPrecision !== \"highp\" && src.substring(0, 15) === \"precision highp\") {\n    return src.replace(\"precision highp\", \"precision mediump\");\n  }\n  return src;\n}\n\nexport { ensurePrecision };\n//# sourceMappingURL=ensurePrecision.mjs.map\n","\"use strict\";\nfunction insertVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return `#version 300 es\n${src}`;\n}\n\nexport { insertVersion };\n//# sourceMappingURL=insertVersion.mjs.map\n","\"use strict\";\nconst fragmentNameCache = {};\nconst VertexNameCache = {};\nfunction setProgramName(src, { name = `pixi-program` }, isFragment = true) {\n  name = name.replace(/\\s+/g, \"-\");\n  name += isFragment ? \"-fragment\" : \"-vertex\";\n  const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n  if (nameCache[name]) {\n    nameCache[name]++;\n    name += `-${nameCache[name]}`;\n  } else {\n    nameCache[name] = 1;\n  }\n  if (src.indexOf(\"#define SHADER_NAME\") !== -1)\n    return src;\n  const shaderName = `#define SHADER_NAME ${name}`;\n  return `${shaderName}\n${src}`;\n}\n\nexport { setProgramName };\n//# sourceMappingURL=setProgramName.mjs.map\n","\"use strict\";\nfunction stripVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return src.replace(\"#version 300 es\", \"\");\n}\n\nexport { stripVersion };\n//# sourceMappingURL=stripVersion.mjs.map\n","\"use strict\";\nconst fragTemplate = [\n  \"precision mediump float;\",\n  \"void main(void){\",\n  \"float test = 0.1;\",\n  \"%forloop%\",\n  \"gl_FragColor = vec4(0.0);\",\n  \"}\"\n].join(\"\\n\");\nfunction generateIfTestSrc(maxIfs) {\n  let src = \"\";\n  for (let i = 0; i < maxIfs; ++i) {\n    if (i > 0) {\n      src += \"\\nelse \";\n    }\n    if (i < maxIfs - 1) {\n      src += `if(test == ${i}.0){}`;\n    }\n  }\n  return src;\n}\nfunction checkMaxIfStatementsInShader(maxIfs, gl) {\n  if (maxIfs === 0) {\n    throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");\n  }\n  const shader = gl.createShader(gl.FRAGMENT_SHADER);\n  while (true) {\n    const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n    gl.shaderSource(shader, fragmentSrc);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      maxIfs = maxIfs / 2 | 0;\n    } else {\n      break;\n    }\n  }\n  return maxIfs;\n}\n\nexport { checkMaxIfStatementsInShader };\n//# sourceMappingURL=checkMaxIfStatementsInShader.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\n\n\"use strict\";\nconst contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: true\n};\nconst _CanvasTextMetrics = class _CanvasTextMetrics {\n  /**\n   * Checking that we can use modern canvas 2D API.\n   *\n   * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n   * @see TextMetrics.experimentalLetterSpacing\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n   * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n   */\n  static get experimentalLetterSpacingSupported() {\n    let result = _CanvasTextMetrics._experimentalLetterSpacingSupported;\n    if (result !== void 0) {\n      const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n      result = _CanvasTextMetrics._experimentalLetterSpacingSupported = \"letterSpacing\" in proto || \"textLetterSpacing\" in proto;\n    }\n    return result;\n  }\n  /**\n   * @param text - the text that was measured\n   * @param style - the style that was measured\n   * @param width - the measured width of the text\n   * @param height - the measured height of the text\n   * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n   * @param lineWidths - an array of the line widths for each line matched to `lines`\n   * @param lineHeight - the measured line height for this style\n   * @param maxLineWidth - the maximum line width for all measured lines\n   * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n   */\n  constructor(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines;\n    this.lineWidths = lineWidths;\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n  }\n  /**\n   * Measures the supplied string of text and returns a Rectangle.\n   * @param text - The text to measure.\n   * @param style - The text style to use for measuring\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @param wordWrap\n   * @returns Measured width and height of the text.\n   */\n  static measureText(text = \" \", style, canvas = _CanvasTextMetrics._canvas, wordWrap = style.wordWrap) {\n    const textKey = `${text}:${style.styleKey}`;\n    if (_CanvasTextMetrics._measurementCache[textKey])\n      return _CanvasTextMetrics._measurementCache[textKey];\n    const font = fontStringFromTextStyle(style);\n    const fontProperties = _CanvasTextMetrics.measureFont(font);\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n    const context = _CanvasTextMetrics.__context;\n    context.font = font;\n    const outputText = wordWrap ? _CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = _CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n    const strokeWidth = style._stroke?.width || 0;\n    let width = maxLineWidth + strokeWidth;\n    if (style.dropShadow) {\n      width += style.dropShadow.distance;\n    }\n    const lineHeight = style.lineHeight || fontProperties.fontSize;\n    let height = Math.max(lineHeight, fontProperties.fontSize + strokeWidth) + (lines.length - 1) * (lineHeight + style.leading);\n    if (style.dropShadow) {\n      height += style.dropShadow.distance;\n    }\n    const measurements = new _CanvasTextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n    return measurements;\n  }\n  static _measureText(text, letterSpacing, context) {\n    let useExperimentalLetterSpacing = false;\n    if (_CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (_CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    let width = context.measureText(text).width;\n    if (width > 0) {\n      if (useExperimentalLetterSpacing) {\n        width -= letterSpacing;\n      } else {\n        width += (_CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n      }\n    }\n    return width;\n  }\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   * @param text - String to apply word wrapping to\n   * @param style - the style to use when wrapping\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @returns New string with new lines applied where required\n   */\n  static _wordWrap(text, style, canvas = _CanvasTextMetrics._canvas) {\n    const context = canvas.getContext(\"2d\", contextSettings);\n    let width = 0;\n    let line = \"\";\n    let lines = \"\";\n    const cache = /* @__PURE__ */ Object.create(null);\n    const { letterSpacing, whiteSpace } = style;\n    const collapseSpaces = _CanvasTextMetrics._collapseSpaces(whiteSpace);\n    const collapseNewlines = _CanvasTextMetrics._collapseNewlines(whiteSpace);\n    let canPrependSpaces = !collapseSpaces;\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n    const tokens = _CanvasTextMetrics._tokenize(text);\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n      if (_CanvasTextMetrics._isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += _CanvasTextMetrics._addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = \"\";\n          width = 0;\n          continue;\n        }\n        token = \" \";\n      }\n      if (collapseSpaces) {\n        const currIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n      const tokenWidth = _CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n      if (tokenWidth > wordWrapWidth) {\n        if (line !== \"\") {\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (_CanvasTextMetrics.canBreakWords(token, style.breakWords)) {\n          const characters = _CanvasTextMetrics.wordWrapSplit(token);\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n            let lastChar = char;\n            let k = 1;\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              if (!_CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                char += nextChar;\n              } else {\n                break;\n              }\n              lastChar = nextChar;\n              k++;\n            }\n            j += k - 1;\n            const characterWidth = _CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n            if (characterWidth + width > wordWrapWidth) {\n              lines += _CanvasTextMetrics._addLine(line);\n              canPrependSpaces = false;\n              line = \"\";\n              width = 0;\n            }\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          if (line.length > 0) {\n            lines += _CanvasTextMetrics._addLine(line);\n            line = \"\";\n            width = 0;\n          }\n          const isLastToken = i === tokens.length - 1;\n          lines += _CanvasTextMetrics._addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = \"\";\n          width = 0;\n        }\n      } else {\n        if (tokenWidth + width > wordWrapWidth) {\n          canPrependSpaces = false;\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (line.length > 0 || !_CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          line += token;\n          width += tokenWidth;\n        }\n      }\n    }\n    lines += _CanvasTextMetrics._addLine(line, false);\n    return lines;\n  }\n  /**\n   * Convienience function for logging each line added during the wordWrap method.\n   * @param line    - The line of text to add\n   * @param newLine - Add new line character to end\n   * @returns A formatted line\n   */\n  static _addLine(line, newLine = true) {\n    line = _CanvasTextMetrics._trimRight(line);\n    line = newLine ? `${line}\n` : line;\n    return line;\n  }\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   * @param key            - The key\n   * @param letterSpacing  - The letter spacing\n   * @param cache          - The cache\n   * @param context        - The canvas context\n   * @returns The from cache.\n   */\n  static _getFromCache(key, letterSpacing, cache, context) {\n    let width = cache[key];\n    if (typeof width !== \"number\") {\n      width = _CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n      cache[key] = width;\n    }\n    return width;\n  }\n  /**\n   * Determines whether we should collapse breaking spaces.\n   * @param whiteSpace - The TextStyle property whiteSpace\n   * @returns Should collapse\n   */\n  static _collapseSpaces(whiteSpace) {\n    return whiteSpace === \"normal\" || whiteSpace === \"pre-line\";\n  }\n  /**\n   * Determines whether we should collapse newLine chars.\n   * @param whiteSpace - The white space\n   * @returns should collapse\n   */\n  static _collapseNewlines(whiteSpace) {\n    return whiteSpace === \"normal\";\n  }\n  /**\n   * Trims breaking whitespaces from string.\n   * @param text - The text\n   * @returns Trimmed string\n   */\n  static _trimRight(text) {\n    if (typeof text !== \"string\") {\n      return \"\";\n    }\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n      if (!_CanvasTextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n      text = text.slice(0, -1);\n    }\n    return text;\n  }\n  /**\n   * Determines if char is a newline.\n   * @param char - The character\n   * @returns True if newline, False otherwise.\n   */\n  static _isNewline(char) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n  }\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * It allows one to determine whether char should be a breaking whitespace\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param char - The character\n   * @param [_nextChar] - The next character\n   * @returns True if whitespace, False otherwise.\n   */\n  static isBreakingSpace(char, _nextChar) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n  }\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   * @param text - The text\n   * @returns A tokenized array\n   */\n  static _tokenize(text) {\n    const tokens = [];\n    let token = \"\";\n    if (typeof text !== \"string\") {\n      return tokens;\n    }\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const nextChar = text[i + 1];\n      if (_CanvasTextMetrics.isBreakingSpace(char, nextChar) || _CanvasTextMetrics._isNewline(char)) {\n        if (token !== \"\") {\n          tokens.push(token);\n          token = \"\";\n        }\n        tokens.push(char);\n        continue;\n      }\n      token += char;\n    }\n    if (token !== \"\") {\n      tokens.push(token);\n    }\n    return tokens;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   * @param _token - The token\n   * @param breakWords - The style attr break words\n   * @returns Whether to break word or not\n   */\n  static canBreakWords(_token, breakWords) {\n    return breakWords;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to determine whether a pair of characters\n   * should be broken by newlines\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param _char - The character\n   * @param _nextChar - The next character\n   * @param _token - The token/word the characters are from\n   * @param _index - The index in the token of the char\n   * @param _breakWords - The style attr break words\n   * @returns whether to break word or not\n   */\n  static canBreakChars(_char, _nextChar, _token, _index, _breakWords) {\n    return true;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It is called when a token (usually a word) has to be split into separate pieces\n   * in order to determine the point to break a word.\n   * It must return an array of characters.\n   * @param token - The token to split\n   * @returns The characters of the token\n   * @see CanvasTextMetrics.graphemeSegmenter\n   */\n  static wordWrapSplit(token) {\n    return _CanvasTextMetrics.graphemeSegmenter(token);\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * @param font - String representing the style of the font\n   * @returns Font properties object\n   */\n  static measureFont(font) {\n    if (_CanvasTextMetrics._fonts[font]) {\n      return _CanvasTextMetrics._fonts[font];\n    }\n    const context = _CanvasTextMetrics._context;\n    context.font = font;\n    const metrics = context.measureText(_CanvasTextMetrics.METRICS_STRING + _CanvasTextMetrics.BASELINE_SYMBOL);\n    const properties = {\n      ascent: metrics.actualBoundingBoxAscent,\n      descent: metrics.actualBoundingBoxDescent,\n      fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n    };\n    _CanvasTextMetrics._fonts[font] = properties;\n    return properties;\n  }\n  /**\n   * Clear font metrics in metrics cache.\n   * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n   */\n  static clearMetrics(font = \"\") {\n    if (font) {\n      delete _CanvasTextMetrics._fonts[font];\n    } else {\n      _CanvasTextMetrics._fonts = {};\n    }\n  }\n  /**\n   * Cached canvas element for measuring text\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _canvas() {\n    if (!_CanvasTextMetrics.__canvas) {\n      let canvas;\n      try {\n        const c = new OffscreenCanvas(0, 0);\n        const context = c.getContext(\"2d\", contextSettings);\n        if (context?.measureText) {\n          _CanvasTextMetrics.__canvas = c;\n          return c;\n        }\n        canvas = DOMAdapter.get().createCanvas();\n      } catch (ex) {\n        canvas = DOMAdapter.get().createCanvas();\n      }\n      canvas.width = canvas.height = 10;\n      _CanvasTextMetrics.__canvas = canvas;\n    }\n    return _CanvasTextMetrics.__canvas;\n  }\n  /**\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _context() {\n    if (!_CanvasTextMetrics.__context) {\n      _CanvasTextMetrics.__context = _CanvasTextMetrics._canvas.getContext(\"2d\", contextSettings);\n    }\n    return _CanvasTextMetrics.__context;\n  }\n};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n */\n_CanvasTextMetrics.METRICS_STRING = \"|\\xC9q\\xC5\";\n/** Baseline symbol for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_SYMBOL = \"M\";\n/** Baseline multiplier for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/** Height multiplier for setting height of canvas to calculate font metrics. */\n_CanvasTextMetrics.HEIGHT_MULTIPLIER = 2;\n/**\n * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n */\n_CanvasTextMetrics.graphemeSegmenter = (() => {\n  if (typeof Intl?.Segmenter === \"function\") {\n    const segmenter = new Intl.Segmenter();\n    return (s) => [...segmenter.segment(s)].map((x) => x.segment);\n  }\n  return (s) => [...s];\n})();\n/**\n * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n * lead to more accurate letter-spacing results because it does not try to manually draw\n * each character. However, this Chrome API is experimental and may not serve all cases yet.\n * @see TextMetrics.experimentalLetterSpacingSupported\n */\n_CanvasTextMetrics.experimentalLetterSpacing = false;\n/** Cache of {@see TextMetrics.FontMetrics} objects. */\n_CanvasTextMetrics._fonts = {};\n/** Cache of new line chars. */\n_CanvasTextMetrics._newlines = [\n  10,\n  // line feed\n  13\n  // carriage return\n];\n/** Cache of breaking spaces. */\n_CanvasTextMetrics._breakingSpaces = [\n  9,\n  // character tabulation\n  32,\n  // space\n  8192,\n  // en quad\n  8193,\n  // em quad\n  8194,\n  // en space\n  8195,\n  // em space\n  8196,\n  // three-per-em space\n  8197,\n  // four-per-em space\n  8198,\n  // six-per-em space\n  8200,\n  // punctuation space\n  8201,\n  // thin space\n  8202,\n  // hair space\n  8287,\n  // medium mathematical space\n  12288\n  // ideographic space\n];\n_CanvasTextMetrics._measurementCache = {};\nlet CanvasTextMetrics = _CanvasTextMetrics;\n\nexport { CanvasTextMetrics };\n//# sourceMappingURL=CanvasTextMetrics.mjs.map\n","import { Color } from '../../color/Color.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nconst _DynamicBitmapFont = class _DynamicBitmapFont extends AbstractBitmapFont {\n  /**\n   * @param options - The options for the dynamic bitmap font.\n   */\n  constructor(options) {\n    super();\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    this.resolution = 1;\n    /** The pages of the font. */\n    this.pages = [];\n    this._padding = 0;\n    this._measureCache = /* @__PURE__ */ Object.create(null);\n    this._currentChars = [];\n    this._currentX = 0;\n    this._currentY = 0;\n    this._currentPageIndex = -1;\n    this._skipKerning = false;\n    const dynamicOptions = { ..._DynamicBitmapFont.defaultOptions, ...options };\n    this._textureSize = dynamicOptions.textureSize;\n    this._mipmap = dynamicOptions.mipmap;\n    const style = dynamicOptions.style.clone();\n    if (dynamicOptions.overrideFill) {\n      style._fill.color = 16777215;\n      style._fill.alpha = 1;\n      style._fill.texture = Texture.WHITE;\n      style._fill.fill = null;\n    }\n    this.applyFillAsTint = dynamicOptions.overrideFill;\n    const requestedFontSize = style.fontSize;\n    style.fontSize = this.baseMeasurementFontSize;\n    const font = fontStringFromTextStyle(style);\n    if (dynamicOptions.overrideSize) {\n      if (style._stroke) {\n        style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n      }\n    } else {\n      style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n    }\n    this._style = style;\n    this._skipKerning = dynamicOptions.skipKerning ?? false;\n    this.resolution = dynamicOptions.resolution ?? 1;\n    this._padding = dynamicOptions.padding ?? 4;\n    this.fontMetrics = CanvasTextMetrics.measureFont(font);\n    this.lineHeight = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n  }\n  ensureCharacters(chars) {\n    const charList = resolveCharacters(chars).filter((char) => !this._currentChars.includes(char)).filter((char, index, self) => self.indexOf(char) === index);\n    if (!charList.length)\n      return;\n    this._currentChars = [...this._currentChars, ...charList];\n    let pageData;\n    if (this._currentPageIndex === -1) {\n      pageData = this._nextPage();\n    } else {\n      pageData = this.pages[this._currentPageIndex];\n    }\n    let { canvas, context } = pageData.canvasAndContext;\n    let textureSource = pageData.texture.source;\n    const style = this._style;\n    let currentX = this._currentX;\n    let currentY = this._currentY;\n    const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n    const padding = this._padding * fontScale;\n    const widthScale = style.fontStyle === \"italic\" ? 2 : 1;\n    let maxCharHeight = 0;\n    let skipTexture = false;\n    for (let i = 0; i < charList.length; i++) {\n      const char = charList[i];\n      const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n      metrics.lineHeight = metrics.height;\n      const width = widthScale * metrics.width * fontScale;\n      const height = metrics.height * fontScale;\n      const paddedWidth = width + padding * 2;\n      const paddedHeight = height + padding * 2;\n      skipTexture = false;\n      if (char !== \"\\n\" && char !== \"\\r\" && char !== \"\t\" && char !== \" \") {\n        skipTexture = true;\n        maxCharHeight = Math.ceil(Math.max(paddedHeight, maxCharHeight));\n      }\n      if (currentX + paddedWidth > this._textureSize) {\n        currentY += maxCharHeight;\n        maxCharHeight = paddedHeight;\n        currentX = 0;\n        if (currentY + maxCharHeight > this._textureSize) {\n          textureSource.update();\n          const pageData2 = this._nextPage();\n          canvas = pageData2.canvasAndContext.canvas;\n          context = pageData2.canvasAndContext.context;\n          textureSource = pageData2.texture.source;\n          currentY = 0;\n        }\n      }\n      const xAdvance = width / fontScale - (style.dropShadow?.distance ?? 0) - (style._stroke?.width ?? 0);\n      this.chars[char] = {\n        id: char.codePointAt(0),\n        xOffset: -this._padding,\n        yOffset: -this._padding,\n        xAdvance,\n        kerning: {}\n      };\n      if (skipTexture) {\n        this._drawGlyph(\n          context,\n          metrics,\n          currentX + padding,\n          currentY + padding,\n          fontScale,\n          style\n        );\n        const px = textureSource.width * fontScale;\n        const py = textureSource.height * fontScale;\n        const frame = new Rectangle(\n          currentX / px * textureSource.width,\n          currentY / py * textureSource.height,\n          paddedWidth / px * textureSource.width,\n          paddedHeight / py * textureSource.height\n        );\n        this.chars[char].texture = new Texture({\n          source: textureSource,\n          frame\n        });\n        currentX += Math.ceil(paddedWidth);\n      }\n    }\n    textureSource.update();\n    this._currentX = currentX;\n    this._currentY = currentY;\n    this._skipKerning && this._applyKerning(charList, context);\n  }\n  /**\n   * @deprecated since 8.0.0\n   * The map of base page textures (i.e., sheets of glyphs).\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  _applyKerning(newChars, context) {\n    const measureCache = this._measureCache;\n    for (let i = 0; i < newChars.length; i++) {\n      const first = newChars[i];\n      for (let j = 0; j < this._currentChars.length; j++) {\n        const second = this._currentChars[j];\n        let c1 = measureCache[first];\n        if (!c1)\n          c1 = measureCache[first] = context.measureText(first).width;\n        let c2 = measureCache[second];\n        if (!c2)\n          c2 = measureCache[second] = context.measureText(second).width;\n        let total = context.measureText(first + second).width;\n        let amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[first].kerning[second] = amount;\n        }\n        total = context.measureText(first + second).width;\n        amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[second].kerning[first] = amount;\n        }\n      }\n    }\n  }\n  _nextPage() {\n    this._currentPageIndex++;\n    const textureResolution = this.resolution;\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n      this._textureSize,\n      this._textureSize,\n      textureResolution\n    );\n    this._setupContext(canvasAndContext.context, this._style, textureResolution);\n    const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n    const texture = new Texture({\n      source: new ImageSource({\n        resource: canvasAndContext.canvas,\n        resolution,\n        alphaMode: \"premultiply-alpha-on-upload\",\n        autoGenerateMipmaps: this._mipmap\n      })\n    });\n    const pageData = {\n      canvasAndContext,\n      texture\n    };\n    this.pages[this._currentPageIndex] = pageData;\n    return pageData;\n  }\n  // canvas style!\n  _setupContext(context, style, resolution) {\n    style.fontSize = this.baseRenderedFontSize;\n    context.scale(resolution, resolution);\n    context.font = fontStringFromTextStyle(style);\n    style.fontSize = this.baseMeasurementFontSize;\n    context.textBaseline = style.textBaseline;\n    const stroke = style._stroke;\n    const strokeThickness = stroke?.width ?? 0;\n    if (stroke) {\n      context.lineWidth = strokeThickness;\n      context.lineJoin = stroke.join;\n      context.miterLimit = stroke.miterLimit;\n      context.strokeStyle = getCanvasFillStyle(stroke, context);\n    }\n    if (style._fill) {\n      context.fillStyle = getCanvasFillStyle(style._fill, context);\n    }\n    if (style.dropShadow) {\n      const shadowOptions = style.dropShadow;\n      const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n      const dropShadowBlur = shadowOptions.blur * resolution;\n      const dropShadowDistance = shadowOptions.distance * resolution;\n      context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n      context.shadowBlur = dropShadowBlur;\n      context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n      context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n    } else {\n      context.shadowColor = \"black\";\n      context.shadowBlur = 0;\n      context.shadowOffsetX = 0;\n      context.shadowOffsetY = 0;\n    }\n  }\n  _drawGlyph(context, metrics, x, y, fontScale, style) {\n    const char = metrics.text;\n    const fontProperties = metrics.fontProperties;\n    const stroke = style._stroke;\n    const strokeThickness = (stroke?.width ?? 0) * fontScale;\n    const tx = x + strokeThickness / 2;\n    const ty = y - strokeThickness / 2;\n    const descent = fontProperties.descent * fontScale;\n    const lineHeight = metrics.lineHeight * fontScale;\n    if (style.stroke && strokeThickness) {\n      context.strokeText(char, tx, ty + lineHeight - descent);\n    }\n    if (style._fill) {\n      context.fillText(char, tx, ty + lineHeight - descent);\n    }\n  }\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { canvasAndContext, texture } = this.pages[i];\n      canvasAndContext.canvas.width = canvasAndContext.canvas.width;\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n};\n_DynamicBitmapFont.defaultOptions = {\n  textureSize: 512,\n  style: new TextStyle(),\n  mipmap: true\n};\nlet DynamicBitmapFont = _DynamicBitmapFont;\n\nexport { DynamicBitmapFont };\n//# sourceMappingURL=DynamicBitmapFont.mjs.map\n","\"use strict\";\nfunction getBitmapTextLayout(chars, style, font) {\n  const layoutData = {\n    width: 0,\n    height: 0,\n    offsetY: 0,\n    scale: style.fontSize / font.baseMeasurementFontSize,\n    lines: [{\n      width: 0,\n      charPositions: [],\n      spaceWidth: 0,\n      spacesIndex: [],\n      chars: []\n    }]\n  };\n  layoutData.offsetY = font.baseLineOffset;\n  let currentLine = layoutData.lines[0];\n  let previousChar = null;\n  let firstWord = true;\n  const currentWord = {\n    spaceWord: false,\n    width: 0,\n    start: 0,\n    index: 0,\n    // use index to not modify the array as we use it a lot!\n    positions: [],\n    chars: []\n  };\n  const nextWord = (word) => {\n    const start = currentLine.width;\n    for (let j = 0; j < currentWord.index; j++) {\n      const position = word.positions[j];\n      currentLine.chars.push(word.chars[j]);\n      currentLine.charPositions.push(position + start);\n    }\n    currentLine.width += word.width;\n    firstWord = false;\n    currentWord.width = 0;\n    currentWord.index = 0;\n    currentWord.chars.length = 0;\n  };\n  const nextLine = () => {\n    let index = currentLine.chars.length - 1;\n    let lastChar = currentLine.chars[index];\n    while (lastChar === \" \") {\n      currentLine.width -= font.chars[lastChar].xAdvance;\n      lastChar = currentLine.chars[--index];\n    }\n    layoutData.width = Math.max(layoutData.width, currentLine.width);\n    currentLine = {\n      width: 0,\n      charPositions: [],\n      chars: [],\n      spaceWidth: 0,\n      spacesIndex: []\n    };\n    firstWord = true;\n    layoutData.lines.push(currentLine);\n    layoutData.height += font.lineHeight;\n  };\n  const scale = font.baseMeasurementFontSize / style.fontSize;\n  const adjustedLetterSpacing = style.letterSpacing * scale;\n  const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n  for (let i = 0; i < chars.length + 1; i++) {\n    let char;\n    const isEnd = i === chars.length;\n    if (!isEnd) {\n      char = chars[i];\n    }\n    const charData = font.chars[char] || font.chars[\" \"];\n    const isSpace = /(?:\\s)/.test(char);\n    const isWordBreak = isSpace || char === \"\\r\" || char === \"\\n\" || isEnd;\n    if (isWordBreak) {\n      const addWordToNextLine = !firstWord && style.wordWrap && currentLine.width + currentWord.width - adjustedLetterSpacing > adjustedWordWrapWidth;\n      if (addWordToNextLine) {\n        nextLine();\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      } else {\n        currentWord.start = currentLine.width;\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      }\n      if (char === \"\\r\" || char === \"\\n\") {\n        if (currentLine.width !== 0) {\n          nextLine();\n        }\n      } else if (!isEnd) {\n        const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n        currentLine.width += spaceWidth;\n        currentLine.spaceWidth = spaceWidth;\n        currentLine.spacesIndex.push(currentLine.charPositions.length);\n        currentLine.chars.push(char);\n      }\n    } else {\n      const kerning = charData.kerning[previousChar] || 0;\n      const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n      currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n      currentWord.chars.push(char);\n      currentWord.width += nextCharWidth;\n    }\n    previousChar = char;\n  }\n  nextLine();\n  if (style.align === \"center\") {\n    alignCenter(layoutData);\n  } else if (style.align === \"right\") {\n    alignRight(layoutData);\n  } else if (style.align === \"justify\") {\n    alignJustify(layoutData);\n  }\n  return layoutData;\n}\nfunction alignCenter(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width / 2 - line.width / 2;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignRight(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width - line.width;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignJustify(measurementData) {\n  const width = measurementData.width;\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    let indy = 0;\n    let spaceIndex = line.spacesIndex[indy++];\n    let offset = 0;\n    const totalSpaces = line.spacesIndex.length;\n    const newSpaceWidth = (width - line.width) / totalSpaces;\n    const spaceWidth = newSpaceWidth;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      if (j === spaceIndex) {\n        spaceIndex = line.spacesIndex[indy++];\n        offset += spaceWidth;\n      }\n      line.charPositions[j] += offset;\n    }\n  }\n}\n\nexport { getBitmapTextLayout };\n//# sourceMappingURL=getBitmapTextLayout.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Loader {\n  constructor() {\n    this._parsers = [];\n    this._parsersValidated = false;\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    this.parsers = new Proxy(this._parsers, {\n      set: (target, key, value) => {\n        this._parsersValidated = false;\n        target[key] = value;\n        return true;\n      }\n    });\n    /** Cache loading promises that ae currently active */\n    this.promiseCache = {};\n  }\n  /** function used for testing */\n  reset() {\n    this._parsersValidated = false;\n    this.promiseCache = {};\n  }\n  /**\n   * Used internally to generate a promise for the asset to be loaded.\n   * @param url - The URL to be loaded\n   * @param data - any custom additional information relevant to the asset being loaded\n   * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n   */\n  _getLoadPromiseAndParser(url, data) {\n    const result = {\n      promise: null,\n      parser: null\n    };\n    result.promise = (async () => {\n      let asset = null;\n      let parser = null;\n      if (data.loadParser) {\n        parser = this._parserHash[data.loadParser];\n        if (!parser) {\n          warn(`[Assets] specified load parser \"${data.loadParser}\" not found while loading ${url}`);\n        }\n      }\n      if (!parser) {\n        for (let i = 0; i < this.parsers.length; i++) {\n          const parserX = this.parsers[i];\n          if (parserX.load && parserX.test?.(url, data, this)) {\n            parser = parserX;\n            break;\n          }\n        }\n        if (!parser) {\n          warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n          return null;\n        }\n      }\n      asset = await parser.load(url, data, this);\n      result.parser = parser;\n      for (let i = 0; i < this.parsers.length; i++) {\n        const parser2 = this.parsers[i];\n        if (parser2.parse) {\n          if (parser2.parse && await parser2.testParse?.(asset, data, this)) {\n            asset = await parser2.parse(asset, data, this) || asset;\n            result.parser = parser2;\n          }\n        }\n      }\n      return asset;\n    })();\n    return result;\n  }\n  async load(assetsToLoadIn, onProgress) {\n    if (!this._parsersValidated) {\n      this._validateParsers();\n    }\n    let count = 0;\n    const assets = {};\n    const singleAsset = isSingleItem(assetsToLoadIn);\n    const assetsToLoad = convertToList(assetsToLoadIn, (item) => ({\n      alias: [item],\n      src: item\n    }));\n    const total = assetsToLoad.length;\n    const promises = assetsToLoad.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      if (!assets[asset.src]) {\n        try {\n          if (!this.promiseCache[url]) {\n            this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n          }\n          assets[asset.src] = await this.promiseCache[url].promise;\n          if (onProgress)\n            onProgress(++count / total);\n        } catch (e) {\n          delete this.promiseCache[url];\n          delete assets[asset.src];\n          throw new Error(`[Loader.load] Failed to load ${url}.\n${e}`);\n        }\n      }\n    });\n    await Promise.all(promises);\n    return singleAsset ? assets[assetsToLoad[0].src] : assets;\n  }\n  /**\n   * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n   * The parser that created the asset, will be the one that unloads it.\n   * @example\n   * // Single asset:\n   * const asset = await Loader.load('cool.png');\n   *\n   * await Loader.unload('cool.png');\n   *\n   * console.log(asset.destroyed); // true\n   * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n   */\n  async unload(assetsToUnloadIn) {\n    const assetsToUnload = convertToList(assetsToUnloadIn, (item) => ({\n      alias: [item],\n      src: item\n    }));\n    const promises = assetsToUnload.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      const loadPromise = this.promiseCache[url];\n      if (loadPromise) {\n        const loadedAsset = await loadPromise.promise;\n        delete this.promiseCache[url];\n        await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n      }\n    });\n    await Promise.all(promises);\n  }\n  /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n  _validateParsers() {\n    this._parsersValidated = true;\n    this._parserHash = this._parsers.filter((parser) => parser.name).reduce((hash, parser) => {\n      if (!parser.name) {\n        warn(`[Assets] loadParser should have a name`);\n      } else if (hash[parser.name]) {\n        warn(`[Assets] loadParser name conflict \"${parser.name}\"`);\n      }\n      return { ...hash, [parser.name]: parser };\n    }, {});\n  }\n}\n\nexport { Loader };\n//# sourceMappingURL=Loader.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\")\\n          return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      const imageBitmap = await createImageBitmap(imageBlob);\\n      return imageBitmap;\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n","\r\nvar SevenZip = (function() {\r\n  var _scriptDir = import.meta.url;\r\n  \r\n  return (\r\nfunction(SevenZip) {\r\n  SevenZip = SevenZip || {};\r\n\r\nvar Module=typeof SevenZip!==\"undefined\"?SevenZip:{};var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise(function(resolve,reject){readyPromiseResolve=resolve;readyPromiseReject=reject});Module.noInitialRun=true;var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram=\"./this.program\";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=typeof window===\"object\";var ENVIRONMENT_IS_WORKER=typeof importScripts===\"function\";var ENVIRONMENT_IS_NODE=typeof process===\"object\"&&typeof process.versions===\"object\"&&typeof process.versions.node===\"string\";var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require(\"path\").dirname(scriptDirectory)+\"/\"}else{scriptDirectory=__dirname+\"/\"}read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require(\"fs\");if(!nodePath)nodePath=require(\"path\");filename=nodePath[\"normalize\"](filename);return nodeFS[\"readFileSync\"](filename,binary?null:\"utf8\")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};readAsync=function readAsync(filename,onload,onerror){if(!nodeFS)nodeFS=require(\"fs\");if(!nodePath)nodePath=require(\"path\");filename=nodePath[\"normalize\"](filename);nodeFS[\"readFile\"](filename,function(err,data){if(err)onerror(err);else onload(data.buffer)})};if(process[\"argv\"].length>1){thisProgram=process[\"argv\"][1].replace(/\\\\/g,\"/\")}arguments_=process[\"argv\"].slice(2);process[\"on\"](\"uncaughtException\",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process[\"on\"](\"unhandledRejection\",abort);quit_=function(status,toThrow){if(keepRuntimeAlive()){process[\"exitCode\"]=status;throw toThrow}process[\"exit\"](status)};Module[\"inspect\"]=function(){return\"[Emscripten Module object]\"}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!==\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=function(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function(url){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];function warnOnce(text){if(!warnOnce.shown)warnOnce.shown={};if(!warnOnce.shown[text]){warnOnce.shown[text]=1;err(text)}}function convertJsFunctionToWasm(func,sig){if(typeof WebAssembly.Function===\"function\"){var typeNames={\"i\":\"i32\",\"j\":\"i64\",\"f\":\"f32\",\"d\":\"f64\"};var type={parameters:[],results:sig[0]==\"v\"?[]:[typeNames[sig[0]]]};for(var i=1;i<sig.length;++i){type.parameters.push(typeNames[sig[i]])}return new WebAssembly.Function(type,func)}var typeSection=[1,0,1,96];var sigRet=sig.slice(0,1);var sigParam=sig.slice(1);var typeCodes={\"i\":127,\"j\":126,\"f\":125,\"d\":124};typeSection.push(sigParam.length);for(var i=0;i<sigParam.length;++i){typeSection.push(typeCodes[sigParam[i]])}if(sigRet==\"v\"){typeSection.push(0)}else{typeSection=typeSection.concat([1,typeCodes[sigRet]])}typeSection[1]=typeSection.length-2;var bytes=new Uint8Array([0,97,115,109,1,0,0,0].concat(typeSection,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0]));var module=new WebAssembly.Module(bytes);var instance=new WebAssembly.Instance(module,{\"e\":{\"f\":func}});var wrappedFunc=instance.exports[\"f\"];return wrappedFunc}var freeTableIndexes=[];var functionsInTableMap;function getEmptyTableSlot(){if(freeTableIndexes.length){return freeTableIndexes.pop()}try{wasmTable.grow(1)}catch(err){if(!(err instanceof RangeError)){throw err}throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\"}return wasmTable.length-1}function addFunctionWasm(func,sig){if(!functionsInTableMap){functionsInTableMap=new WeakMap;for(var i=0;i<wasmTable.length;i++){var item=wasmTable.get(i);if(item){functionsInTableMap.set(item,i)}}}if(functionsInTableMap.has(func)){return functionsInTableMap.get(func)}var ret=getEmptyTableSlot();try{wasmTable.set(ret,func)}catch(err){if(!(err instanceof TypeError)){throw err}var wrapped=convertJsFunctionToWasm(func,sig);wasmTable.set(ret,wrapped)}functionsInTableMap.set(func,ret);return ret}var tempRet0=0;var setTempRet0=function(value){tempRet0=value};var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!==\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(\"Assertion failed: \"+text)}}function getCFunc(ident){var func=Module[\"_\"+ident];assert(func,\"Cannot call unknown function \"+ident+\", make sure it is exported\");return func}function ccall(ident,returnType,argTypes,args,opts){var toC={\"string\":function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},\"array\":function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\")return UTF8ToString(ret);if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret}var ALLOC_STACK=1;var UTF8Decoder=typeof TextDecoder!==\"undefined\"?new TextDecoder(\"utf8\"):undefined;function UTF8ArrayToString(heap,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heap[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heap.subarray&&UTF8Decoder){return UTF8Decoder.decode(heap.subarray(idx,endPtr))}else{var str=\"\";while(idx<endPtr){var u0=heap[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heap[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heap[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heap[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\"}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127)++len;else if(u<=2047)len+=2;else if(u<=65535)len+=3;else len+=4}return len}var UTF16Decoder=typeof TextDecoder!==\"undefined\"?new TextDecoder(\"utf-16le\"):undefined;function allocateUTF8(str){var size=lengthBytesUTF8(str)+1;var ret=_malloc(size);if(ret)stringToUTF8Array(str,HEAP8,ret,size);return ret}function allocateUTF8OnStack(str){var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8Array(str,HEAP8,ret,size);return ret}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}if(!dontAddNull)HEAP8[buffer>>0]=0}function alignUp(x,multiple){if(x%multiple>0){x+=multiple-x%multiple}return x}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module[\"HEAP8\"]=HEAP8=new Int8Array(buf);Module[\"HEAP16\"]=HEAP16=new Int16Array(buf);Module[\"HEAP32\"]=HEAP32=new Int32Array(buf);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(buf);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(buf);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(buf);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(buf);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module[\"INITIAL_MEMORY\"]||16777216;var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;var runtimeExited=false;var runtimeKeepaliveCounter=0;function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0}function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(!Module[\"noFSInit\"]&&!FS.init.initialized)FS.init();FS.ignorePermissions=false;TTY.init();callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){runtimeExited=true}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module[\"preloadedImages\"]={};Module[\"preloadedAudios\"]={};function abort(what){{if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}}what+=\"\";err(what);ABORT=true;EXITSTATUS=1;what=\"abort(\"+what+\"). Build with -s ASSERTIONS=1 for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith(\"file://\")}var wasmBinaryFile;if(Module[\"locateFile\"]){wasmBinaryFile=\"7zz.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}}else{wasmBinaryFile=new URL(\"7zz.wasm\",import.meta.url).toString()}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}else{throw\"both async and sync fetching of the wasm failed\"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch===\"function\"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+wasmBinaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={\"env\":asmLibraryArg,\"wasi_snapshot_preview1\":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module[\"asm\"]=exports;wasmMemory=Module[\"asm\"][\"memory\"];updateGlobalBufferAndViews(wasmMemory.buffer);wasmTable=Module[\"asm\"][\"__indirect_function_table\"];addOnInit(Module[\"asm\"][\"__wasm_call_ctors\"]);removeRunDependency(\"wasm-instantiate\")}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(function(instance){return instance}).then(receiver,function(reason){err(\"failed to asynchronously prepare wasm: \"+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming===\"function\"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&typeof fetch===\"function\"){return fetch(wasmBinaryFile,{credentials:\"same-origin\"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiationResult,function(reason){err(\"wasm streaming compile failed: \"+reason);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(receiveInstantiationResult)})})}else{return instantiateArrayBuffer(receiveInstantiationResult)}}if(Module[\"instantiateWasm\"]){try{var exports=Module[\"instantiateWasm\"](info,receiveInstance);return exports}catch(e){err(\"Module.instantiateWasm callback failed with error: \"+e);return false}}instantiateAsync().catch(readyPromiseReject);return{}}var tempDouble;var tempI64;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback==\"function\"){callback(Module);continue}var func=callback.func;if(typeof func===\"number\"){if(callback.arg===undefined){wasmTable.get(func)()}else{wasmTable.get(func)(callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}function demangle(func){return func}function demangleAll(text){var regex=/\\b_Z[\\w\\d_]+/g;return text.replace(regex,function(x){var y=demangle(x);return x===y?x:y+\" [\"+x+\"]\"})}function handleException(e){if(e instanceof ExitStatus||e==\"unwind\"){return EXITSTATUS}var toLog=e;err(\"exception thrown: \"+toLog);quit_(1,e)}function jsStackTrace(){var error=new Error;if(!error.stack){try{throw new Error}catch(e){error=e}if(!error.stack){return\"(no stack trace available)\"}}return error.stack.toString()}function ___cxa_allocate_exception(size){return _malloc(size+16)+16}function _atexit(func,arg){}function ___cxa_atexit(a0,a1){return _atexit(a0,a1)}function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-16;this.set_type=function(type){HEAP32[this.ptr+4>>2]=type};this.get_type=function(){return HEAP32[this.ptr+4>>2]};this.set_destructor=function(destructor){HEAP32[this.ptr+8>>2]=destructor};this.get_destructor=function(){return HEAP32[this.ptr+8>>2]};this.set_refcount=function(refcount){HEAP32[this.ptr>>2]=refcount};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0};this.init=function(type,destructor){this.set_type(type);this.set_destructor(destructor);this.set_refcount(0);this.set_caught(false);this.set_rethrown(false)};this.add_ref=function(){var value=HEAP32[this.ptr>>2];HEAP32[this.ptr>>2]=value+1};this.release_ref=function(){var prev=HEAP32[this.ptr>>2];HEAP32[this.ptr>>2]=prev-1;return prev===1}}var exceptionLast=0;var uncaughtExceptionCount=0;function ___cxa_throw(ptr,type,destructor){var info=new ExceptionInfo(ptr);info.init(type,destructor);exceptionLast=ptr;uncaughtExceptionCount++;throw ptr}function _gmtime_r(time,tmPtr){var date=new Date(HEAP32[time>>2]*1e3);HEAP32[tmPtr>>2]=date.getUTCSeconds();HEAP32[tmPtr+4>>2]=date.getUTCMinutes();HEAP32[tmPtr+8>>2]=date.getUTCHours();HEAP32[tmPtr+12>>2]=date.getUTCDate();HEAP32[tmPtr+16>>2]=date.getUTCMonth();HEAP32[tmPtr+20>>2]=date.getUTCFullYear()-1900;HEAP32[tmPtr+24>>2]=date.getUTCDay();HEAP32[tmPtr+36>>2]=0;HEAP32[tmPtr+32>>2]=0;var start=Date.UTC(date.getUTCFullYear(),0,1,0,0,0,0);var yday=(date.getTime()-start)/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday;if(!_gmtime_r.GMTString)_gmtime_r.GMTString=allocateUTF8(\"GMT\");HEAP32[tmPtr+40>>2]=_gmtime_r.GMTString;return tmPtr}function ___gmtime_r(a0,a1){return _gmtime_r(a0,a1)}function _tzset_impl(){var currentYear=(new Date).getFullYear();var winter=new Date(currentYear,0,1);var summer=new Date(currentYear,6,1);var winterOffset=winter.getTimezoneOffset();var summerOffset=summer.getTimezoneOffset();var stdTimezoneOffset=Math.max(winterOffset,summerOffset);HEAP32[__get_timezone()>>2]=stdTimezoneOffset*60;HEAP32[__get_daylight()>>2]=Number(winterOffset!=summerOffset);function extractZone(date){var match=date.toTimeString().match(/\\(([A-Za-z ]+)\\)$/);return match?match[1]:\"GMT\"}var winterName=extractZone(winter);var summerName=extractZone(summer);var winterNamePtr=allocateUTF8(winterName);var summerNamePtr=allocateUTF8(summerName);if(summerOffset<winterOffset){HEAP32[__get_tzname()>>2]=winterNamePtr;HEAP32[__get_tzname()+4>>2]=summerNamePtr}else{HEAP32[__get_tzname()>>2]=summerNamePtr;HEAP32[__get_tzname()+4>>2]=winterNamePtr}}function _tzset(){if(_tzset.called)return;_tzset.called=true;_tzset_impl()}function _localtime_r(time,tmPtr){_tzset();var date=new Date(HEAP32[time>>2]*1e3);HEAP32[tmPtr>>2]=date.getSeconds();HEAP32[tmPtr+4>>2]=date.getMinutes();HEAP32[tmPtr+8>>2]=date.getHours();HEAP32[tmPtr+12>>2]=date.getDate();HEAP32[tmPtr+16>>2]=date.getMonth();HEAP32[tmPtr+20>>2]=date.getFullYear()-1900;HEAP32[tmPtr+24>>2]=date.getDay();var start=new Date(date.getFullYear(),0,1);var yday=(date.getTime()-start.getTime())/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday;HEAP32[tmPtr+36>>2]=-(date.getTimezoneOffset()*60);var summerOffset=new Date(date.getFullYear(),6,1).getTimezoneOffset();var winterOffset=start.getTimezoneOffset();var dst=(summerOffset!=winterOffset&&date.getTimezoneOffset()==Math.min(winterOffset,summerOffset))|0;HEAP32[tmPtr+32>>2]=dst;var zonePtr=HEAP32[__get_tzname()+(dst?4:0)>>2];HEAP32[tmPtr+40>>2]=zonePtr;return tmPtr}function ___localtime_r(a0,a1){return _localtime_r(a0,a1)}var PATH={splitPath:function(filename){var splitPathRe=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last===\".\"){parts.splice(i,1)}else if(last===\"..\"){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift(\"..\")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)===\"/\",trailingSlash=path.substr(-1)===\"/\";path=PATH.normalizeArray(path.split(\"/\").filter(function(p){return!!p}),!isAbsolute).join(\"/\");if(!path&&!isAbsolute){path=\".\"}if(path&&trailingSlash){path+=\"/\"}return(isAbsolute?\"/\":\"\")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return\".\"}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path===\"/\")return\"/\";path=PATH.normalize(path);path=path.replace(/\\/$/,\"\");var lastSlash=path.lastIndexOf(\"/\");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join(\"/\"))},join2:function(l,r){return PATH.normalize(l+\"/\"+r)}};function getRandomDevice(){if(typeof crypto===\"object\"&&typeof crypto[\"getRandomValues\"]===\"function\"){var randomBuffer=new Uint8Array(1);return function(){crypto.getRandomValues(randomBuffer);return randomBuffer[0]}}else if(ENVIRONMENT_IS_NODE){try{var crypto_module=require(\"crypto\");return function(){return crypto_module[\"randomBytes\"](1)[0]}}catch(e){}}return function(){abort(\"randomDevice\")}}var PATH_FS={resolve:function(){var resolvedPath=\"\",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!==\"string\"){throw new TypeError(\"Arguments to path.resolve must be strings\")}else if(!path){return\"\"}resolvedPath=path+\"/\"+resolvedPath;resolvedAbsolute=path.charAt(0)===\"/\"}resolvedPath=PATH.normalizeArray(resolvedPath.split(\"/\").filter(function(p){return!!p}),!resolvedAbsolute).join(\"/\");return(resolvedAbsolute?\"/\":\"\")+resolvedPath||\".\"},relative:function(from,to){from=PATH_FS.resolve(from).substr(1);to=PATH_FS.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!==\"\")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!==\"\")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split(\"/\"));var toParts=trim(to.split(\"/\"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push(\"..\")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join(\"/\")}};var TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(43)}stream.tty=tty;stream.seekable=false},close:function(stream){stream.tty.ops.flush(stream.tty)},flush:function(stream){stream.tty.ops.flush(stream.tty)},read:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(60)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(60)}try{for(var i=0;i<length;i++){stream.tty.ops.put_char(stream.tty,buffer[offset+i])}}catch(e){throw new FS.ErrnoError(29)}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if(ENVIRONMENT_IS_NODE){var BUFSIZE=256;var buf=Buffer.alloc(BUFSIZE);var bytesRead=0;try{bytesRead=nodeFS.readSync(process.stdin.fd,buf,0,BUFSIZE,null)}catch(e){if(e.toString().includes(\"EOF\"))bytesRead=0;else throw e}if(bytesRead>0){result=buf.slice(0,bytesRead).toString(\"utf-8\")}else{result=null}}else if(typeof window!=\"undefined\"&&typeof window.prompt==\"function\"){result=window.prompt(\"Input: \");if(result!==null){result+=\"\\n\"}}else if(typeof readline==\"function\"){result=readline();if(result!==null){result+=\"\\n\"}}if(!result){return null}tty.input=intArrayFromString(result,true)}return tty.input.shift()},put_char:function(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}}},default_tty1_ops:{put_char:function(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};function zeroMemory(address,size){HEAPU8.fill(0,address,address+size)}function mmapAlloc(size){abort()}var MEMFS={ops_table:null,mount:function(mount){return MEMFS.createNode(null,\"/\",16384|511,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(63)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node;parent.timestamp=node.timestamp}return node},getFileDataAsTypedArray:function(node){if(!node.contents)return new Uint8Array(0);if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage:function(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)>>>0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0)},resizeFileStorage:function(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0}else{var oldContents=node.contents;node.contents=new Uint8Array(newSize);if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize}},node_ops:{getattr:function(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr:function(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup:function(parent,name){throw FS.genericErrors[44]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(55)}}}delete old_node.parent.contents[old_node.name];old_node.parent.timestamp=Date.now();old_node.name=new_name;new_dir.contents[new_name]=old_node;new_dir.timestamp=old_node.parent.timestamp;old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name];parent.timestamp=Date.now()},rmdir:function(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(55)}delete parent.contents[name];parent.timestamp=Date.now()},readdir:function(node){var entries=[\".\",\"..\"];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink:function(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(28)}return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write:function(stream,buffer,offset,length,position,canOwn){if(buffer.buffer===HEAP8.buffer){canOwn=false}if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=buffer.slice(offset,offset+length);node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray){node.contents.set(buffer.subarray(offset,offset+length),position)}else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(28)}return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,address,length,position,prot,flags){if(address!==0){throw new FS.ErrnoError(28)}if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&contents.buffer===buffer){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<contents.length){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}HEAP8.set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(mmapFlags&2){return 0}var bytesWritten=MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};function asyncLoad(url,onload,onerror,noRunDep){var dep=!noRunDep?getUniqueRunDependency(\"al \"+url):\"\";readAsync(url,function(arrayBuffer){assert(arrayBuffer,'Loading data file \"'+url+'\" failed (no arrayBuffer).');onload(new Uint8Array(arrayBuffer));if(dep)removeRunDependency(dep)},function(event){if(onerror){onerror()}else{throw'Loading data file \"'+url+'\" failed.'}});if(dep)addRunDependency(dep)}var ERRNO_CODES={};var NODEFS={isWindows:false,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/);var flags=process[\"binding\"](\"constants\");if(flags[\"fs\"]){flags=flags[\"fs\"]}NODEFS.flagsForNodeMap={1024:flags[\"O_APPEND\"],64:flags[\"O_CREAT\"],128:flags[\"O_EXCL\"],256:flags[\"O_NOCTTY\"],0:flags[\"O_RDONLY\"],2:flags[\"O_RDWR\"],4096:flags[\"O_SYNC\"],512:flags[\"O_TRUNC\"],1:flags[\"O_WRONLY\"]}},convertNodeCode:function(e){var code=e.code;return ERRNO_CODES[code]},mount:function(mount){return NODEFS.createNode(null,\"/\",NODEFS.getMode(mount.opts.root),0)},createNode:function(parent,name,mode,dev){if(!FS.isDir(mode)&&!FS.isFile(mode)&&!FS.isLink(mode)){throw new FS.ErrnoError(28)}var node=FS.createNode(parent,name,mode);node.node_ops=NODEFS.node_ops;node.stream_ops=NODEFS.stream_ops;return node},getMode:function(path){var stat;try{stat=fs.lstatSync(path);if(NODEFS.isWindows){stat.mode=stat.mode|(stat.mode&292)>>2}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}return stat.mode},realPath:function(node){var parts=[];while(node.parent!==node){parts.push(node.name);node=node.parent}parts.push(node.mount.opts.root);parts.reverse();return PATH.join.apply(null,parts)},flagsForNode:function(flags){flags&=~2097152;flags&=~2048;flags&=~32768;flags&=~524288;var newFlags=0;for(var k in NODEFS.flagsForNodeMap){if(flags&k){newFlags|=NODEFS.flagsForNodeMap[k];flags^=k}}if(!flags){return newFlags}else{throw new FS.ErrnoError(28)}},node_ops:{getattr:function(node){var path=NODEFS.realPath(node);var stat;try{stat=fs.lstatSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}if(NODEFS.isWindows&&!stat.blksize){stat.blksize=4096}if(NODEFS.isWindows&&!stat.blocks){stat.blocks=(stat.size+stat.blksize-1)/stat.blksize|0}return{dev:stat.dev,ino:stat.ino,mode:stat.mode,nlink:stat.nlink,uid:stat.uid,gid:stat.gid,rdev:stat.rdev,size:stat.size,atime:stat.atime,mtime:stat.mtime,ctime:stat.ctime,blksize:stat.blksize,blocks:stat.blocks}},setattr:function(node,attr){var path=NODEFS.realPath(node);try{if(attr.mode!==undefined){fs.chmodSync(path,attr.mode);node.mode=attr.mode}if(attr.timestamp!==undefined){var date=new Date(attr.timestamp);fs.utimesSync(path,date,date)}if(attr.size!==undefined){fs.truncateSync(path,attr.size)}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},lookup:function(parent,name){var path=PATH.join2(NODEFS.realPath(parent),name);var mode=NODEFS.getMode(path);return NODEFS.createNode(parent,name,mode)},mknod:function(parent,name,mode,dev){var node=NODEFS.createNode(parent,name,mode,dev);var path=NODEFS.realPath(node);try{if(FS.isDir(node.mode)){fs.mkdirSync(path,node.mode)}else{fs.writeFileSync(path,\"\",{mode:node.mode})}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}return node},rename:function(oldNode,newDir,newName){var oldPath=NODEFS.realPath(oldNode);var newPath=PATH.join2(NODEFS.realPath(newDir),newName);try{fs.renameSync(oldPath,newPath)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}oldNode.name=newName},unlink:function(parent,name){var path=PATH.join2(NODEFS.realPath(parent),name);try{fs.unlinkSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},rmdir:function(parent,name){var path=PATH.join2(NODEFS.realPath(parent),name);try{fs.rmdirSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},readdir:function(node){var path=NODEFS.realPath(node);try{return fs.readdirSync(path)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},symlink:function(parent,newName,oldPath){var newPath=PATH.join2(NODEFS.realPath(parent),newName);try{fs.symlinkSync(oldPath,newPath)}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},readlink:function(node){var path=NODEFS.realPath(node);try{path=fs.readlinkSync(path);path=NODEJS_PATH.relative(NODEJS_PATH.resolve(node.mount.opts.root),path);return path}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}}},stream_ops:{open:function(stream){var path=NODEFS.realPath(stream.node);try{if(FS.isFile(stream.node.mode)){stream.nfd=fs.openSync(path,NODEFS.flagsForNode(stream.flags))}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},close:function(stream){try{if(FS.isFile(stream.node.mode)&&stream.nfd){fs.closeSync(stream.nfd)}}catch(e){if(!e.code)throw e;throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},read:function(stream,buffer,offset,length,position){if(length===0)return 0;try{return fs.readSync(stream.nfd,Buffer.from(buffer.buffer),offset,length,position)}catch(e){throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},write:function(stream,buffer,offset,length,position){try{return fs.writeSync(stream.nfd,Buffer.from(buffer.buffer),offset,length,position)}catch(e){throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){try{var stat=fs.fstatSync(stream.nfd);position+=stat.size}catch(e){throw new FS.ErrnoError(NODEFS.convertNodeCode(e))}}}if(position<0){throw new FS.ErrnoError(28)}return position},mmap:function(stream,address,length,position,prot,flags){if(address!==0){throw new FS.ErrnoError(28)}if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr=mmapAlloc(length);NODEFS.stream_ops.read(stream,HEAP8,ptr,length,position);return{ptr:ptr,allocated:true}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(mmapFlags&2){return 0}var bytesWritten=NODEFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(mount){assert(ENVIRONMENT_IS_WORKER);if(!WORKERFS.reader)WORKERFS.reader=new FileReaderSync;var root=WORKERFS.createNode(null,\"/\",WORKERFS.DIR_MODE,0);var createdParents={};function ensureParent(path){var parts=path.split(\"/\");var parent=root;for(var i=0;i<parts.length-1;i++){var curr=parts.slice(0,i+1).join(\"/\");if(!createdParents[curr]){createdParents[curr]=WORKERFS.createNode(parent,parts[i],WORKERFS.DIR_MODE,0)}parent=createdParents[curr]}return parent}function base(path){var parts=path.split(\"/\");return parts[parts.length-1]}Array.prototype.forEach.call(mount.opts[\"files\"]||[],function(file){WORKERFS.createNode(ensureParent(file.name),base(file.name),WORKERFS.FILE_MODE,0,file,file.lastModifiedDate)});(mount.opts[\"blobs\"]||[]).forEach(function(obj){WORKERFS.createNode(ensureParent(obj[\"name\"]),base(obj[\"name\"]),WORKERFS.FILE_MODE,0,obj[\"data\"])});(mount.opts[\"packages\"]||[]).forEach(function(pack){pack[\"metadata\"].files.forEach(function(file){var name=file.filename.substr(1);WORKERFS.createNode(ensureParent(name),base(name),WORKERFS.FILE_MODE,0,pack[\"blob\"].slice(file.start,file.end))})});return root},createNode:function(parent,name,mode,dev,contents,mtime){var node=FS.createNode(parent,name,mode);node.mode=mode;node.node_ops=WORKERFS.node_ops;node.stream_ops=WORKERFS.stream_ops;node.timestamp=(mtime||new Date).getTime();assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE);if(mode===WORKERFS.FILE_MODE){node.size=contents.size;node.contents=contents}else{node.size=4096;node.contents={}}if(parent){parent.contents[name]=node}return node},node_ops:{getattr:function(node){return{dev:1,ino:node.id,mode:node.mode,nlink:1,uid:0,gid:0,rdev:undefined,size:node.size,atime:new Date(node.timestamp),mtime:new Date(node.timestamp),ctime:new Date(node.timestamp),blksize:4096,blocks:Math.ceil(node.size/4096)}},setattr:function(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}},lookup:function(parent,name){throw new FS.ErrnoError(44)},mknod:function(parent,name,mode,dev){throw new FS.ErrnoError(63)},rename:function(oldNode,newDir,newName){throw new FS.ErrnoError(63)},unlink:function(parent,name){throw new FS.ErrnoError(63)},rmdir:function(parent,name){throw new FS.ErrnoError(63)},readdir:function(node){var entries=[\".\",\"..\"];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink:function(parent,newName,oldPath){throw new FS.ErrnoError(63)},readlink:function(node){throw new FS.ErrnoError(63)}},stream_ops:{read:function(stream,buffer,offset,length,position){if(position>=stream.node.size)return 0;var chunk=stream.node.contents.slice(position,position+length);var ab=WORKERFS.reader.readAsArrayBuffer(chunk);buffer.set(new Uint8Array(ab),offset);return chunk.size},write:function(stream,buffer,offset,length,position){throw new FS.ErrnoError(29)},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.size}}if(position<0){throw new FS.ErrnoError(28)}return position}}};var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:\"/\",initialized:false,ignorePermissions:true,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(path,opts){path=PATH_FS.resolve(FS.cwd(),path);opts=opts||{};if(!path)return{path:\"\",node:null};var defaults={follow_mount:true,recurse_count:0};for(var key in defaults){if(opts[key]===undefined){opts[key]=defaults[key]}}if(opts.recurse_count>8){throw new FS.ErrnoError(32)}var parts=PATH.normalizeArray(path.split(\"/\").filter(function(p){return!!p}),false);var current=FS.root;var current_path=\"/\";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count});current=lookup.node;if(count++>40){throw new FS.ErrnoError(32)}}}}return{path:current_path,node:current}},getPath:function(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!==\"/\"?mount+\"/\"+path:mount+path}path=path?node.name+\"/\"+path:node.name;node=node.parent}},hashName:function(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:function(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode:function(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode:function(parent,name){var errCode=FS.mayLookup(parent);if(errCode){throw new FS.ErrnoError(errCode,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode:function(parent,name,mode,rdev){var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode:function(node){FS.hashRemoveNode(node)},isRoot:function(node){return node===node.parent},isMountpoint:function(node){return!!node.mounted},isFile:function(mode){return(mode&61440)===32768},isDir:function(mode){return(mode&61440)===16384},isLink:function(mode){return(mode&61440)===40960},isChrdev:function(mode){return(mode&61440)===8192},isBlkdev:function(mode){return(mode&61440)===24576},isFIFO:function(mode){return(mode&61440)===4096},isSocket:function(mode){return(mode&49152)===49152},flagModes:{\"r\":0,\"r+\":2,\"w\":577,\"w+\":578,\"a\":1089,\"a+\":1090},modeStringToFlags:function(str){var flags=FS.flagModes[str];if(typeof flags===\"undefined\"){throw new Error(\"Unknown file open mode: \"+str)}return flags},flagsToPermissionString:function(flag){var perms=[\"r\",\"w\",\"rw\"][flag&3];if(flag&512){perms+=\"w\"}return perms},nodePermissions:function(node,perms){if(FS.ignorePermissions){return 0}if(perms.includes(\"r\")&&!(node.mode&292)){return 2}else if(perms.includes(\"w\")&&!(node.mode&146)){return 2}else if(perms.includes(\"x\")&&!(node.mode&73)){return 2}return 0},mayLookup:function(dir){var errCode=FS.nodePermissions(dir,\"x\");if(errCode)return errCode;if(!dir.node_ops.lookup)return 2;return 0},mayCreate:function(dir,name){try{var node=FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,\"wx\")},mayDelete:function(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,\"wx\");if(errCode){return errCode}if(isdir){if(!FS.isDir(node.mode)){return 54}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return 10}}else{if(FS.isDir(node.mode)){return 31}}return 0},mayOpen:function(node,flags){if(!node){return 44}if(FS.isLink(node.mode)){return 32}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!==\"r\"||flags&512){return 31}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd:function(fd_start,fd_end){fd_start=fd_start||0;fd_end=fd_end||FS.MAX_OPEN_FDS;for(var fd=fd_start;fd<=fd_end;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(33)},getStream:function(fd){return FS.streams[fd]},createStream:function(stream,fd_start,fd_end){if(!FS.FSStream){FS.FSStream=function(){};FS.FSStream.prototype={object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}}var newStream=new FS.FSStream;for(var p in stream){newStream[p]=stream[p]}stream=newStream;var fd=FS.nextfd(fd_start,fd_end);stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream:function(fd){FS.streams[fd]=null},chrdev_stream_ops:{open:function(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek:function(){throw new FS.ErrnoError(70)}},major:function(dev){return dev>>8},minor:function(dev){return dev&255},makedev:function(ma,mi){return ma<<8|mi},registerDevice:function(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:function(dev){return FS.devices[dev]},getMounts:function(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs:function(populate,callback){if(typeof populate===\"function\"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){err(\"warning: \"+FS.syncFSRequests+\" FS.syncfs operations in flight at once, probably just doing extra work\")}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(errCode){FS.syncFSRequests--;return callback(errCode)}function done(errCode){if(errCode){if(!done.errored){done.errored=true;return doCallback(errCode)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(function(mount){if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount:function(type,opts,mountpoint){var root=mountpoint===\"/\";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(10)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount:function(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(28)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(function(hash){var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.includes(current.mount)){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup:function(parent,name){return parent.node_ops.lookup(parent,name)},mknod:function(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name===\".\"||name===\"..\"){throw new FS.ErrnoError(28)}var errCode=FS.mayCreate(parent,name);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(63)}return parent.node_ops.mknod(parent,name,mode,dev)},create:function(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir:function(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree:function(path,mode){var dirs=path.split(\"/\");var d=\"\";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+=\"/\"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev:function(path,mode,dev){if(typeof dev===\"undefined\"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink:function(oldpath,newpath){if(!PATH_FS.resolve(oldpath)){throw new FS.ErrnoError(44)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var newname=PATH.basename(newpath);var errCode=FS.mayCreate(parent,newname);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(63)}return parent.node_ops.symlink(parent,newname,oldpath)},rename:function(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node;if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(75)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(28)}relative=PATH_FS.relative(new_path,old_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(55)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode){throw new FS.ErrnoError(errCode)}errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(errCode){throw new FS.ErrnoError(errCode)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(63)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(10)}if(new_dir!==old_dir){errCode=FS.nodePermissions(old_dir,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}}try{if(FS.trackingDelegate[\"willMovePath\"]){FS.trackingDelegate[\"willMovePath\"](old_path,new_path)}}catch(e){err(\"FS.trackingDelegate['willMovePath']('\"+old_path+\"', '\"+new_path+\"') threw an exception: \"+e.message)}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}try{if(FS.trackingDelegate[\"onMovePath\"])FS.trackingDelegate[\"onMovePath\"](old_path,new_path)}catch(e){err(\"FS.trackingDelegate['onMovePath']('\"+old_path+\"', '\"+new_path+\"') threw an exception: \"+e.message)}},rmdir:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,true);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}try{if(FS.trackingDelegate[\"willDeletePath\"]){FS.trackingDelegate[\"willDeletePath\"](path)}}catch(e){err(\"FS.trackingDelegate['willDeletePath']('\"+path+\"') threw an exception: \"+e.message)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node);try{if(FS.trackingDelegate[\"onDeletePath\"])FS.trackingDelegate[\"onDeletePath\"](path)}catch(e){err(\"FS.trackingDelegate['onDeletePath']('\"+path+\"') threw an exception: \"+e.message)}},readdir:function(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(54)}return node.node_ops.readdir(node)},unlink:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,false);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}try{if(FS.trackingDelegate[\"willDeletePath\"]){FS.trackingDelegate[\"willDeletePath\"](path)}}catch(e){err(\"FS.trackingDelegate['willDeletePath']('\"+path+\"') threw an exception: \"+e.message)}parent.node_ops.unlink(parent,name);FS.destroyNode(node);try{if(FS.trackingDelegate[\"onDeletePath\"])FS.trackingDelegate[\"onDeletePath\"](path)}catch(e){err(\"FS.trackingDelegate['onDeletePath']('\"+path+\"') threw an exception: \"+e.message)}},readlink:function(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(44)}if(!link.node_ops.readlink){throw new FS.ErrnoError(28)}return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:function(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(44)}if(!node.node_ops.getattr){throw new FS.ErrnoError(63)}return node.node_ops.getattr(node)},lstat:function(path){return FS.stat(path,true)},chmod:function(path,mode,dontFollow){var node;if(typeof path===\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod:function(path,mode){FS.chmod(path,mode,true)},fchmod:function(fd,mode){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}FS.chmod(stream.node,mode)},chown:function(path,uid,gid,dontFollow){var node;if(typeof path===\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:function(path,uid,gid){FS.chown(path,uid,gid,true)},fchown:function(fd,uid,gid){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}FS.chown(stream.node,uid,gid)},truncate:function(path,len){if(len<0){throw new FS.ErrnoError(28)}var node;if(typeof path===\"string\"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(31)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(28)}var errCode=FS.nodePermissions(node,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:function(fd,len){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(28)}FS.truncate(stream.node,len)},utime:function(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:function(path,flags,mode,fd_start,fd_end){if(path===\"\"){throw new FS.ErrnoError(44)}flags=typeof flags===\"string\"?FS.modeStringToFlags(flags):flags;mode=typeof mode===\"undefined\"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path===\"object\"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(20)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(44)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}if(!created){var errCode=FS.mayOpen(node,flags);if(errCode){throw new FS.ErrnoError(errCode)}}if(flags&512){FS.truncate(node,0)}flags&=~(128|512|131072);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false},fd_start,fd_end);if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module[\"logReadFiles\"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1;err(\"FS.trackingDelegate error on read file: \"+path)}}try{if(FS.trackingDelegate[\"onOpenFile\"]){var trackingFlags=0;if((flags&2097155)!==1){trackingFlags|=FS.tracking.openFlags.READ}if((flags&2097155)!==0){trackingFlags|=FS.tracking.openFlags.WRITE}FS.trackingDelegate[\"onOpenFile\"](path,trackingFlags)}}catch(e){err(\"FS.trackingDelegate['onOpenFile']('\"+path+\"', flags) threw an exception: \"+e.message)}return stream},close:function(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:function(stream){return stream.fd===null},llseek:function(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(70)}if(whence!=0&&whence!=1&&whence!=2){throw new FS.ErrnoError(28)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read:function(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.read){throw new FS.ErrnoError(28)}var seeking=typeof position!==\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write:function(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.write){throw new FS.ErrnoError(28)}if(stream.seekable&&stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!==\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;try{if(stream.path&&FS.trackingDelegate[\"onWriteToFile\"])FS.trackingDelegate[\"onWriteToFile\"](stream.path)}catch(e){err(\"FS.trackingDelegate['onWriteToFile']('\"+stream.path+\"') threw an exception: \"+e.message)}return bytesWritten},allocate:function(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(offset<0||length<=0){throw new FS.ErrnoError(28)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(43)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(138)}stream.stream_ops.allocate(stream,offset,length)},mmap:function(stream,address,length,position,prot,flags){if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2){throw new FS.ErrnoError(2)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(2)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(43)}return stream.stream_ops.mmap(stream,address,length,position,prot,flags)},msync:function(stream,buffer,offset,length,mmapFlags){if(!stream||!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:function(stream){return 0},ioctl:function(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(59)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:function(path,opts){opts=opts||{};opts.flags=opts.flags||0;opts.encoding=opts.encoding||\"binary\";if(opts.encoding!==\"utf8\"&&opts.encoding!==\"binary\"){throw new Error('Invalid encoding type \"'+opts.encoding+'\"')}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding===\"utf8\"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding===\"binary\"){ret=buf}FS.close(stream);return ret},writeFile:function(path,data,opts){opts=opts||{};opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if(typeof data===\"string\"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error(\"Unsupported data type\")}FS.close(stream)},cwd:function(){return FS.currentPath},chdir:function(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(44)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(54)}var errCode=FS.nodePermissions(lookup.node,\"x\");if(errCode){throw new FS.ErrnoError(errCode)}FS.currentPath=lookup.path},createDefaultDirectories:function(){FS.mkdir(\"/tmp\");FS.mkdir(\"/home\");FS.mkdir(\"/home/web_user\")},createDefaultDevices:function(){FS.mkdir(\"/dev\");FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(stream,buffer,offset,length,pos){return length}});FS.mkdev(\"/dev/null\",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev(\"/dev/tty\",FS.makedev(5,0));FS.mkdev(\"/dev/tty1\",FS.makedev(6,0));var random_device=getRandomDevice();FS.createDevice(\"/dev\",\"random\",random_device);FS.createDevice(\"/dev\",\"urandom\",random_device);FS.mkdir(\"/dev/shm\");FS.mkdir(\"/dev/shm/tmp\")},createSpecialDirectories:function(){FS.mkdir(\"/proc\");var proc_self=FS.mkdir(\"/proc/self\");FS.mkdir(\"/proc/self/fd\");FS.mount({mount:function(){var node=FS.createNode(proc_self,\"fd\",16384|511,73);node.node_ops={lookup:function(parent,name){var fd=+name;var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);var ret={parent:null,mount:{mountpoint:\"fake\"},node_ops:{readlink:function(){return stream.path}}};ret.parent=ret;return ret}};return node}},{},\"/proc/self/fd\")},createStandardStreams:function(){if(Module[\"stdin\"]){FS.createDevice(\"/dev\",\"stdin\",Module[\"stdin\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdin\")}if(Module[\"stdout\"]){FS.createDevice(\"/dev\",\"stdout\",null,Module[\"stdout\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdout\")}if(Module[\"stderr\"]){FS.createDevice(\"/dev\",\"stderr\",null,Module[\"stderr\"])}else{FS.symlink(\"/dev/tty1\",\"/dev/stderr\")}var stdin=FS.open(\"/dev/stdin\",0);var stdout=FS.open(\"/dev/stdout\",1);var stderr=FS.open(\"/dev/stderr\",1)},ensureErrnoError:function(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.node=node;this.setErrno=function(errno){this.errno=errno};this.setErrno(errno);this.message=\"FS error\"};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[44].forEach(function(code){FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack=\"<generic error, no stack>\"})},staticInit:function(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},\"/\");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={\"MEMFS\":MEMFS,\"NODEFS\":NODEFS,\"WORKERFS\":WORKERFS}},init:function(input,output,error){FS.init.initialized=true;FS.ensureErrnoError();Module[\"stdin\"]=input||Module[\"stdin\"];Module[\"stdout\"]=output||Module[\"stdout\"];Module[\"stderr\"]=error||Module[\"stderr\"];FS.createStandardStreams()},quit:function(){FS.init.initialized=false;var fflush=Module[\"_fflush\"];if(fflush)fflush(0);for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},getMode:function(canRead,canWrite){var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode},findObject:function(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(ret.exists){return ret.object}else{return null}},analyzePath:function(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path===\"/\"}catch(e){ret.error=e.errno}return ret},createPath:function(parent,path,canRead,canWrite){parent=typeof parent===\"string\"?parent:FS.getPath(parent);var parts=path.split(\"/\").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile:function(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent===\"string\"?parent:FS.getPath(parent),name);var mode=FS.getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:function(parent,name,data,canRead,canWrite,canOwn){var path=name?PATH.join2(typeof parent===\"string\"?parent:FS.getPath(parent),name):parent;var mode=FS.getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data===\"string\"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice:function(parent,name,input,output){var path=PATH.join2(typeof parent===\"string\"?parent:FS.getPath(parent),name);var mode=FS.getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open:function(stream){stream.seekable=false},close:function(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read:function(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},forceLoadFile:function(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;if(typeof XMLHttpRequest!==\"undefined\"){throw new Error(\"Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.\")}else if(read_){try{obj.contents=intArrayFromString(read_(obj.url),true);obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}}else{throw new Error(\"Cannot load without read() or XMLHttpRequest.\")}},createLazyFile:function(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open(\"HEAD\",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);var datalength=Number(xhr.getResponseHeader(\"Content-length\"));var header;var hasByteServing=(header=xhr.getResponseHeader(\"Accept-Ranges\"))&&header===\"bytes\";var usesGzip=(header=xhr.getResponseHeader(\"Content-Encoding\"))&&header===\"gzip\";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=function(from,to){if(from>to)throw new Error(\"invalid range (\"+from+\", \"+to+\") or no bytes requested!\");if(to>datalength-1)throw new Error(\"only \"+datalength+\" bytes available! programmer error!\");var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);if(datalength!==chunkSize)xhr.setRequestHeader(\"Range\",\"bytes=\"+from+\"-\"+to);if(typeof Uint8Array!=\"undefined\")xhr.responseType=\"arraybuffer\";if(xhr.overrideMimeType){xhr.overrideMimeType(\"text/plain; charset=x-user-defined\")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}else{return intArrayFromString(xhr.responseText||\"\",true)}};var lazyArray=this;lazyArray.setDataGetter(function(chunkNum){var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]===\"undefined\"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]===\"undefined\")throw new Error(\"doXHR failed!\");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;out(\"LazyFiles on gzip forces download of the whole file when length is accessed\")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!==\"undefined\"){if(!ENVIRONMENT_IS_WORKER)throw\"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc\";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(function(key){var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){FS.forceLoadFile(node);return fn.apply(null,arguments)}});stream_ops.read=function stream_ops_read(stream,buffer,offset,length,position){FS.forceLoadFile(node);var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size};node.stream_ops=stream_ops;return node},createPreloadedFile:function(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish){Browser.init();var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency(\"cp \"+fullname);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}var handled=false;Module[\"preloadPlugins\"].forEach(function(plugin){if(handled)return;if(plugin[\"canHandle\"](fullname)){plugin[\"handle\"](byteArray,fullname,finish,function(){if(onerror)onerror();removeRunDependency(dep)});handled=true}});if(!handled)finish(byteArray)}addRunDependency(dep);if(typeof url==\"string\"){asyncLoad(url,function(byteArray){processData(byteArray)},onerror)}else{processData(url)}},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return\"EM_FS_\"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:\"FILE_DATA\",saveFilesToDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=function openRequest_onupgradeneeded(){out(\"creating db\");var db=openRequest.result;db.createObjectStore(FS.DB_STORE_NAME)};openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;var transaction=db.transaction([FS.DB_STORE_NAME],\"readwrite\");var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var putRequest=files.put(FS.analyzePath(path).object.contents,path);putRequest.onsuccess=function putRequest_onsuccess(){ok++;if(ok+fail==total)finish()};putRequest.onerror=function putRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror},loadFilesFromDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=onerror;openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;try{var transaction=db.transaction([FS.DB_STORE_NAME],\"readonly\")}catch(e){onerror(e);return}var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var getRequest=files.get(path);getRequest.onsuccess=function getRequest_onsuccess(){if(FS.analyzePath(path).exists){FS.unlink(path)}FS.createDataFile(PATH.dirname(path),PATH.basename(path),getRequest.result,true,true,true);ok++;if(ok+fail==total)finish()};getRequest.onerror=function getRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror}};var SYSCALLS={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(dirfd,path,allowEmpty){if(path[0]===\"/\"){return path}var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=FS.getStream(dirfd);if(!dirstream)throw new FS.ErrnoError(8);dir=dirstream.path}if(path.length==0){if(!allowEmpty){throw new FS.ErrnoError(44)}return dir}return PATH.join2(dir,path)},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-54}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=0;HEAP32[buf+8>>2]=stat.ino;HEAP32[buf+12>>2]=stat.mode;HEAP32[buf+16>>2]=stat.nlink;HEAP32[buf+20>>2]=stat.uid;HEAP32[buf+24>>2]=stat.gid;HEAP32[buf+28>>2]=stat.rdev;HEAP32[buf+32>>2]=0;tempI64=[stat.size>>>0,(tempDouble=stat.size,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+40>>2]=tempI64[0],HEAP32[buf+44>>2]=tempI64[1];HEAP32[buf+48>>2]=4096;HEAP32[buf+52>>2]=stat.blocks;HEAP32[buf+56>>2]=stat.atime.getTime()/1e3|0;HEAP32[buf+60>>2]=0;HEAP32[buf+64>>2]=stat.mtime.getTime()/1e3|0;HEAP32[buf+68>>2]=0;HEAP32[buf+72>>2]=stat.ctime.getTime()/1e3|0;HEAP32[buf+76>>2]=0;tempI64=[stat.ino>>>0,(tempDouble=stat.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+80>>2]=tempI64[0],HEAP32[buf+84>>2]=tempI64[1];return 0},doMsync:function(addr,stream,len,flags,offset){var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},doMkdir:function(path,mode){path=PATH.normalize(path);if(path[path.length-1]===\"/\")path=path.substr(0,path.length-1);FS.mkdir(path,mode,0);return 0},doMknod:function(path,mode,dev){switch(mode&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}FS.mknod(path,mode,dev);return 0},doReadlink:function(path,buf,bufsize){if(bufsize<=0)return-28;var ret=FS.readlink(path);var len=Math.min(bufsize,lengthBytesUTF8(ret));var endChar=HEAP8[buf+len];stringToUTF8(ret,buf,bufsize+1);HEAP8[buf+len]=endChar;return len},doAccess:function(path,amode){if(amode&~7){return-28}var node;var lookup=FS.lookupPath(path,{follow:true});node=lookup.node;if(!node){return-44}var perms=\"\";if(amode&4)perms+=\"r\";if(amode&2)perms+=\"w\";if(amode&1)perms+=\"x\";if(perms&&FS.nodePermissions(node,perms)){return-2}return 0},doDup:function(path,flags,suggestFD){var suggest=FS.getStream(suggestFD);if(suggest)FS.close(suggest);return FS.open(path,flags,0,suggestFD,suggestFD).fd},doReadv:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break}return ret},doWritev:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr}return ret},varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret},getStreamFromFD:function(fd){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return stream},get64:function(low,high){return low}};function ___sys_chmod(path,mode){try{path=SYSCALLS.getStr(path);FS.chmod(path,mode);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_chown32(path,owner,group){try{path=SYSCALLS.getStr(path);FS.chown(path,owner,group);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_fstat64(fd,buf){try{var stream=SYSCALLS.getStreamFromFD(fd);return SYSCALLS.doStat(FS.stat,stream.path,buf)}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_fstatat64(dirfd,path,buf,flags){try{path=SYSCALLS.getStr(path);var nofollow=flags&256;var allowEmpty=flags&4096;flags=flags&~4352;path=SYSCALLS.calculateAt(dirfd,path,allowEmpty);return SYSCALLS.doStat(nofollow?FS.lstat:FS.stat,path,buf)}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_ftruncate64(fd,zero,low,high){try{var length=SYSCALLS.get64(low,high);FS.ftruncate(fd,length);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_getcwd(buf,size){try{if(size===0)return-28;var cwd=FS.cwd();var cwdLengthInBytes=lengthBytesUTF8(cwd);if(size<cwdLengthInBytes+1)return-68;stringToUTF8(cwd,buf,size);return buf}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_getdents64(fd,dirp,count){try{var stream=SYSCALLS.getStreamFromFD(fd);if(!stream.getdents){stream.getdents=FS.readdir(stream.path)}var struct_size=280;var pos=0;var off=FS.llseek(stream,0,1);var idx=Math.floor(off/struct_size);while(idx<stream.getdents.length&&pos+struct_size<=count){var id;var type;var name=stream.getdents[idx];if(name[0]===\".\"){id=1;type=4}else{var child=FS.lookupNode(stream.node,name);id=child.id;type=FS.isChrdev(child.mode)?2:FS.isDir(child.mode)?4:FS.isLink(child.mode)?10:8}tempI64=[id>>>0,(tempDouble=id,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[dirp+pos>>2]=tempI64[0],HEAP32[dirp+pos+4>>2]=tempI64[1];tempI64=[(idx+1)*struct_size>>>0,(tempDouble=(idx+1)*struct_size,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[dirp+pos+8>>2]=tempI64[0],HEAP32[dirp+pos+12>>2]=tempI64[1];HEAP16[dirp+pos+16>>1]=280;HEAP8[dirp+pos+18>>0]=type;stringToUTF8(name,dirp+pos+19,256);pos+=struct_size;idx+=1}FS.llseek(stream,idx*struct_size,0);return pos}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_getpid(){return 42}function ___sys_getppid(){return 1}function ___sys_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:case 21505:{if(!stream.tty)return-59;return 0}case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:{if(!stream.tty)return-59;return 0}case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.get();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-59;return-28}case 21531:{var argp=SYSCALLS.get();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-59;return 0}case 21524:{if(!stream.tty)return-59;return 0}default:abort(\"bad ioctl syscall \"+op)}}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_link(oldpath,newpath){return-34}function ___sys_lstat64(path,buf){try{path=SYSCALLS.getStr(path);return SYSCALLS.doStat(FS.lstat,path,buf)}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_mkdir(path,mode){try{path=SYSCALLS.getStr(path);return SYSCALLS.doMkdir(path,mode)}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_open(path,flags,varargs){SYSCALLS.varargs=varargs;try{var pathname=SYSCALLS.getStr(path);var mode=varargs?SYSCALLS.get():0;var stream=FS.open(pathname,flags,mode);return stream.fd}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_readlink(path,buf,bufsize){try{path=SYSCALLS.getStr(path);return SYSCALLS.doReadlink(path,buf,bufsize)}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_rename(old_path,new_path){try{old_path=SYSCALLS.getStr(old_path);new_path=SYSCALLS.getStr(new_path);FS.rename(old_path,new_path);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_rmdir(path){try{path=SYSCALLS.getStr(path);FS.rmdir(path);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_stat64(path,buf){try{path=SYSCALLS.getStr(path);return SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_symlink(target,linkpath){try{target=SYSCALLS.getStr(target);linkpath=SYSCALLS.getStr(linkpath);FS.symlink(target,linkpath);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_umask(mask){try{var old=SYSCALLS.umask;SYSCALLS.umask=mask;return old}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_uname(buf){try{if(!buf)return-21;var layout={\"__size__\":390,\"domainname\":325,\"machine\":260,\"nodename\":65,\"release\":130,\"sysname\":0,\"version\":195};var copyString=function(element,value){var offset=layout[element];writeAsciiToMemory(value,buf+offset)};copyString(\"sysname\",\"Emscripten\");copyString(\"nodename\",\"emscripten\");copyString(\"release\",\"1.0\");copyString(\"version\",\"#1\");copyString(\"machine\",\"wasm32\");return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_unlink(path){try{path=SYSCALLS.getStr(path);FS.unlink(path);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_utimensat(dirfd,path,times,flags){try{path=SYSCALLS.getStr(path);path=SYSCALLS.calculateAt(dirfd,path,true);var seconds=HEAP32[times>>2];var nanoseconds=HEAP32[times+4>>2];var atime=seconds*1e3+nanoseconds/(1e3*1e3);times+=8;seconds=HEAP32[times>>2];nanoseconds=HEAP32[times+4>>2];var mtime=seconds*1e3+nanoseconds/(1e3*1e3);FS.utime(path,atime,mtime);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function _abort(){abort()}function _emscripten_get_heap_max(){return 2147483648}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function emscripten_realloc_buffer(size){try{wasmMemory.grow(size-buffer.byteLength+65535>>>16);updateGlobalBufferAndViews(wasmMemory.buffer);return 1}catch(e){}}function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize=requestedSize>>>0;var maxHeapSize=2147483648;if(requestedSize>maxHeapSize){return false}for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=emscripten_realloc_buffer(newSize);if(replacement){return true}}return false}var ENV={};function getExecutableName(){return thisProgram||\"./this.program\"}function getEnvStrings(){if(!getEnvStrings.strings){var lang=(typeof navigator===\"object\"&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\";var env={\"USER\":\"web_user\",\"LOGNAME\":\"web_user\",\"PATH\":\"/\",\"PWD\":\"/\",\"HOME\":\"/home/web_user\",\"LANG\":lang,\"_\":getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(x+\"=\"+env[x])}getEnvStrings.strings=strings}return getEnvStrings.strings}function _environ_get(__environ,environ_buf){var bufSize=0;getEnvStrings().forEach(function(string,i){var ptr=environ_buf+bufSize;HEAP32[__environ+i*4>>2]=ptr;writeAsciiToMemory(string,ptr);bufSize+=string.length+1});return 0}function _environ_sizes_get(penviron_count,penviron_buf_size){var strings=getEnvStrings();HEAP32[penviron_count>>2]=strings.length;var bufSize=0;strings.forEach(function(string){bufSize+=string.length+1});HEAP32[penviron_buf_size>>2]=bufSize;return 0}function _exit(status){exit(status)}function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);FS.close(stream);return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_fdstat_get(fd,pbuf){try{var stream=SYSCALLS.getStreamFromFD(fd);var type=stream.tty?2:FS.isDir(stream.mode)?3:FS.isLink(stream.mode)?7:4;HEAP8[pbuf>>0]=type;return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doReadv(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{var stream=SYSCALLS.getStreamFromFD(fd);var HIGH_OFFSET=4294967296;var offset=offset_high*HIGH_OFFSET+(offset_low>>>0);var DOUBLE_LIMIT=9007199254740992;if(offset<=-DOUBLE_LIMIT||offset>=DOUBLE_LIMIT){return-61}FS.llseek(stream,offset,whence);tempI64=[stream.position>>>0,(tempDouble=stream.position,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[newOffset>>2]=tempI64[0],HEAP32[newOffset+4>>2]=tempI64[1];if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doWritev(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS===\"undefined\"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _getgrgid(){throw\"getgrgid: TODO\"}function _getpwuid(){throw\"getpwuid: TODO\"}function _gettimeofday(ptr){var now=Date.now();HEAP32[ptr>>2]=now/1e3|0;HEAP32[ptr+4>>2]=now%1e3*1e3|0;return 0}function _mktime(tmPtr){_tzset();var date=new Date(HEAP32[tmPtr+20>>2]+1900,HEAP32[tmPtr+16>>2],HEAP32[tmPtr+12>>2],HEAP32[tmPtr+8>>2],HEAP32[tmPtr+4>>2],HEAP32[tmPtr>>2],0);var dst=HEAP32[tmPtr+32>>2];var guessedOffset=date.getTimezoneOffset();var start=new Date(date.getFullYear(),0,1);var summerOffset=new Date(date.getFullYear(),6,1).getTimezoneOffset();var winterOffset=start.getTimezoneOffset();var dstOffset=Math.min(winterOffset,summerOffset);if(dst<0){HEAP32[tmPtr+32>>2]=Number(summerOffset!=winterOffset&&dstOffset==guessedOffset)}else if(dst>0!=(dstOffset==guessedOffset)){var nonDstOffset=Math.max(winterOffset,summerOffset);var trueOffset=dst>0?dstOffset:nonDstOffset;date.setTime(date.getTime()+(trueOffset-guessedOffset)*6e4)}HEAP32[tmPtr+24>>2]=date.getDay();var yday=(date.getTime()-start.getTime())/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday;HEAP32[tmPtr>>2]=date.getSeconds();HEAP32[tmPtr+4>>2]=date.getMinutes();HEAP32[tmPtr+8>>2]=date.getHours();HEAP32[tmPtr+12>>2]=date.getDate();HEAP32[tmPtr+16>>2]=date.getMonth();return date.getTime()/1e3|0}function _setTempRet0(val){setTempRet0(val)}function _time(ptr){var ret=Date.now()/1e3|0;if(ptr){HEAP32[ptr>>2]=ret}return ret}function _times(buffer){if(buffer!==0){zeroMemory(buffer,16)}return 0}var FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};var readMode=292|73;var writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}});FS.FSNode=FSNode;FS.staticInit();if(ENVIRONMENT_IS_NODE){var fs=require(\"fs\");var NODEJS_PATH=require(\"path\");NODEFS.staticInit()}ERRNO_CODES={\"EPERM\":63,\"ENOENT\":44,\"ESRCH\":71,\"EINTR\":27,\"EIO\":29,\"ENXIO\":60,\"E2BIG\":1,\"ENOEXEC\":45,\"EBADF\":8,\"ECHILD\":12,\"EAGAIN\":6,\"EWOULDBLOCK\":6,\"ENOMEM\":48,\"EACCES\":2,\"EFAULT\":21,\"ENOTBLK\":105,\"EBUSY\":10,\"EEXIST\":20,\"EXDEV\":75,\"ENODEV\":43,\"ENOTDIR\":54,\"EISDIR\":31,\"EINVAL\":28,\"ENFILE\":41,\"EMFILE\":33,\"ENOTTY\":59,\"ETXTBSY\":74,\"EFBIG\":22,\"ENOSPC\":51,\"ESPIPE\":70,\"EROFS\":69,\"EMLINK\":34,\"EPIPE\":64,\"EDOM\":18,\"ERANGE\":68,\"ENOMSG\":49,\"EIDRM\":24,\"ECHRNG\":106,\"EL2NSYNC\":156,\"EL3HLT\":107,\"EL3RST\":108,\"ELNRNG\":109,\"EUNATCH\":110,\"ENOCSI\":111,\"EL2HLT\":112,\"EDEADLK\":16,\"ENOLCK\":46,\"EBADE\":113,\"EBADR\":114,\"EXFULL\":115,\"ENOANO\":104,\"EBADRQC\":103,\"EBADSLT\":102,\"EDEADLOCK\":16,\"EBFONT\":101,\"ENOSTR\":100,\"ENODATA\":116,\"ETIME\":117,\"ENOSR\":118,\"ENONET\":119,\"ENOPKG\":120,\"EREMOTE\":121,\"ENOLINK\":47,\"EADV\":122,\"ESRMNT\":123,\"ECOMM\":124,\"EPROTO\":65,\"EMULTIHOP\":36,\"EDOTDOT\":125,\"EBADMSG\":9,\"ENOTUNIQ\":126,\"EBADFD\":127,\"EREMCHG\":128,\"ELIBACC\":129,\"ELIBBAD\":130,\"ELIBSCN\":131,\"ELIBMAX\":132,\"ELIBEXEC\":133,\"ENOSYS\":52,\"ENOTEMPTY\":55,\"ENAMETOOLONG\":37,\"ELOOP\":32,\"EOPNOTSUPP\":138,\"EPFNOSUPPORT\":139,\"ECONNRESET\":15,\"ENOBUFS\":42,\"EAFNOSUPPORT\":5,\"EPROTOTYPE\":67,\"ENOTSOCK\":57,\"ENOPROTOOPT\":50,\"ESHUTDOWN\":140,\"ECONNREFUSED\":14,\"EADDRINUSE\":3,\"ECONNABORTED\":13,\"ENETUNREACH\":40,\"ENETDOWN\":38,\"ETIMEDOUT\":73,\"EHOSTDOWN\":142,\"EHOSTUNREACH\":23,\"EINPROGRESS\":26,\"EALREADY\":7,\"EDESTADDRREQ\":17,\"EMSGSIZE\":35,\"EPROTONOSUPPORT\":66,\"ESOCKTNOSUPPORT\":137,\"EADDRNOTAVAIL\":4,\"ENETRESET\":39,\"EISCONN\":30,\"ENOTCONN\":53,\"ETOOMANYREFS\":141,\"EUSERS\":136,\"EDQUOT\":19,\"ESTALE\":72,\"ENOTSUP\":138,\"ENOMEDIUM\":148,\"EILSEQ\":25,\"EOVERFLOW\":61,\"ECANCELED\":11,\"ENOTRECOVERABLE\":56,\"EOWNERDEAD\":62,\"ESTRPIPE\":135};var ASSERTIONS=false;function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}var asmLibraryArg={\"__cxa_allocate_exception\":___cxa_allocate_exception,\"__cxa_atexit\":___cxa_atexit,\"__cxa_throw\":___cxa_throw,\"__gmtime_r\":___gmtime_r,\"__localtime_r\":___localtime_r,\"__sys_chmod\":___sys_chmod,\"__sys_chown32\":___sys_chown32,\"__sys_fstat64\":___sys_fstat64,\"__sys_fstatat64\":___sys_fstatat64,\"__sys_ftruncate64\":___sys_ftruncate64,\"__sys_getcwd\":___sys_getcwd,\"__sys_getdents64\":___sys_getdents64,\"__sys_getpid\":___sys_getpid,\"__sys_getppid\":___sys_getppid,\"__sys_ioctl\":___sys_ioctl,\"__sys_link\":___sys_link,\"__sys_lstat64\":___sys_lstat64,\"__sys_mkdir\":___sys_mkdir,\"__sys_open\":___sys_open,\"__sys_readlink\":___sys_readlink,\"__sys_rename\":___sys_rename,\"__sys_rmdir\":___sys_rmdir,\"__sys_stat64\":___sys_stat64,\"__sys_symlink\":___sys_symlink,\"__sys_umask\":___sys_umask,\"__sys_uname\":___sys_uname,\"__sys_unlink\":___sys_unlink,\"__sys_utimensat\":___sys_utimensat,\"abort\":_abort,\"emscripten_get_heap_max\":_emscripten_get_heap_max,\"emscripten_memcpy_big\":_emscripten_memcpy_big,\"emscripten_resize_heap\":_emscripten_resize_heap,\"environ_get\":_environ_get,\"environ_sizes_get\":_environ_sizes_get,\"exit\":_exit,\"fd_close\":_fd_close,\"fd_fdstat_get\":_fd_fdstat_get,\"fd_read\":_fd_read,\"fd_seek\":_fd_seek,\"fd_write\":_fd_write,\"getgrgid\":_getgrgid,\"getpwuid\":_getpwuid,\"gettimeofday\":_gettimeofday,\"mktime\":_mktime,\"setTempRet0\":_setTempRet0,\"time\":_time,\"times\":_times};var asm=createWasm();var ___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=function(){return(___wasm_call_ctors=Module[\"___wasm_call_ctors\"]=Module[\"asm\"][\"__wasm_call_ctors\"]).apply(null,arguments)};var _malloc=Module[\"_malloc\"]=function(){return(_malloc=Module[\"_malloc\"]=Module[\"asm\"][\"malloc\"]).apply(null,arguments)};var ___errno_location=Module[\"___errno_location\"]=function(){return(___errno_location=Module[\"___errno_location\"]=Module[\"asm\"][\"__errno_location\"]).apply(null,arguments)};var _main=Module[\"_main\"]=function(){return(_main=Module[\"_main\"]=Module[\"asm\"][\"main\"]).apply(null,arguments)};var __get_tzname=Module[\"__get_tzname\"]=function(){return(__get_tzname=Module[\"__get_tzname\"]=Module[\"asm\"][\"_get_tzname\"]).apply(null,arguments)};var __get_daylight=Module[\"__get_daylight\"]=function(){return(__get_daylight=Module[\"__get_daylight\"]=Module[\"asm\"][\"_get_daylight\"]).apply(null,arguments)};var __get_timezone=Module[\"__get_timezone\"]=function(){return(__get_timezone=Module[\"__get_timezone\"]=Module[\"asm\"][\"_get_timezone\"]).apply(null,arguments)};var stackSave=Module[\"stackSave\"]=function(){return(stackSave=Module[\"stackSave\"]=Module[\"asm\"][\"stackSave\"]).apply(null,arguments)};var stackRestore=Module[\"stackRestore\"]=function(){return(stackRestore=Module[\"stackRestore\"]=Module[\"asm\"][\"stackRestore\"]).apply(null,arguments)};var stackAlloc=Module[\"stackAlloc\"]=function(){return(stackAlloc=Module[\"stackAlloc\"]=Module[\"asm\"][\"stackAlloc\"]).apply(null,arguments)};var dynCall_iijj=Module[\"dynCall_iijj\"]=function(){return(dynCall_iijj=Module[\"dynCall_iijj\"]=Module[\"asm\"][\"dynCall_iijj\"]).apply(null,arguments)};var dynCall_iijii=Module[\"dynCall_iijii\"]=function(){return(dynCall_iijii=Module[\"dynCall_iijii\"]=Module[\"asm\"][\"dynCall_iijii\"]).apply(null,arguments)};var dynCall_jii=Module[\"dynCall_jii\"]=function(){return(dynCall_jii=Module[\"dynCall_jii\"]=Module[\"asm\"][\"dynCall_jii\"]).apply(null,arguments)};var dynCall_iiji=Module[\"dynCall_iiji\"]=function(){return(dynCall_iiji=Module[\"dynCall_iiji\"]=Module[\"asm\"][\"dynCall_iiji\"]).apply(null,arguments)};var dynCall_iij=Module[\"dynCall_iij\"]=function(){return(dynCall_iij=Module[\"dynCall_iij\"]=Module[\"asm\"][\"dynCall_iij\"]).apply(null,arguments)};var dynCall_vij=Module[\"dynCall_vij\"]=function(){return(dynCall_vij=Module[\"dynCall_vij\"]=Module[\"asm\"][\"dynCall_vij\"]).apply(null,arguments)};var dynCall_iiij=Module[\"dynCall_iiij\"]=function(){return(dynCall_iiij=Module[\"dynCall_iiij\"]=Module[\"asm\"][\"dynCall_iiij\"]).apply(null,arguments)};var dynCall_jiji=Module[\"dynCall_jiji\"]=function(){return(dynCall_jiji=Module[\"dynCall_jiji\"]=Module[\"asm\"][\"dynCall_jiji\"]).apply(null,arguments)};var calledRun;function ExitStatus(status){this.name=\"ExitStatus\";this.message=\"Program terminated with exit(\"+status+\")\";this.status=status}var calledMain=false;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function callMain(args){var entryFunction=Module[\"_main\"];args=args||[];var argc=args.length+1;var argv=stackAlloc((argc+1)*4);HEAP32[argv>>2]=allocateUTF8OnStack(thisProgram);for(var i=1;i<argc;i++){HEAP32[(argv>>2)+i]=allocateUTF8OnStack(args[i-1])}HEAP32[(argv>>2)+argc]=0;try{var ret=entryFunction(argc,argv);exit(ret,true);return ret}catch(e){return handleException(e)}finally{calledMain=true}}function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();preMain();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();if(shouldRunNow)callMain(args);postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}Module[\"run\"]=run;function exit(status,implicit){EXITSTATUS=status;if(keepRuntimeAlive()){}else{exitRuntime()}procExit(status)}function procExit(code){EXITSTATUS=code;if(!keepRuntimeAlive()){if(Module[\"onExit\"])Module[\"onExit\"](code);ABORT=true}quit_(code,new ExitStatus(code))}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}var shouldRunNow=true;if(Module[\"noInitialRun\"])shouldRunNow=false;run();Module.FS=FS;Module.NODEFS=NODEFS;Module.WORKERFS=WORKERFS;Module.callMain=callMain;\r\n\r\n\r\n  return SevenZip.ready\r\n}\r\n);\r\n})();\r\nexport default SevenZip;","import { prettyLogStyles } from \"../../prettyLogStyles.js\";\nimport { jsonStringifyRecursive } from \"./helper.jsonStringifyRecursive.js\";\nexport function inspect(obj, opts) {\n    const ctx = {\n        seen: [],\n        stylize: stylizeNoColor,\n    };\n    if (opts != null) {\n        _extend(ctx, opts);\n    }\n    if (isUndefined(ctx.showHidden))\n        ctx.showHidden = false;\n    if (isUndefined(ctx.depth))\n        ctx.depth = 2;\n    if (isUndefined(ctx.colors))\n        ctx.colors = true;\n    if (isUndefined(ctx.customInspect))\n        ctx.customInspect = true;\n    if (ctx.colors)\n        ctx.stylize = stylizeWithColor;\n    return formatValue(ctx, obj, ctx.depth);\n}\ninspect.colors = prettyLogStyles;\ninspect.styles = {\n    special: \"cyan\",\n    number: \"yellow\",\n    boolean: \"yellow\",\n    undefined: \"grey\",\n    null: \"bold\",\n    string: \"green\",\n    date: \"magenta\",\n    regexp: \"red\",\n};\nfunction isBoolean(arg) {\n    return typeof arg === \"boolean\";\n}\nfunction isUndefined(arg) {\n    return arg === undefined;\n}\nfunction stylizeNoColor(str) {\n    return str;\n}\nfunction stylizeWithColor(str, styleType) {\n    const style = inspect.styles[styleType];\n    if (style != null && inspect?.colors?.[style]?.[0] != null && inspect?.colors?.[style]?.[1] != null) {\n        return \"\\u001b[\" + inspect.colors[style][0] + \"m\" + str + \"\\u001b[\" + inspect.colors[style][1] + \"m\";\n    }\n    else {\n        return str;\n    }\n}\nfunction isFunction(arg) {\n    return typeof arg === \"function\";\n}\nfunction isString(arg) {\n    return typeof arg === \"string\";\n}\nfunction isNumber(arg) {\n    return typeof arg === \"number\";\n}\nfunction isNull(arg) {\n    return arg === null;\n}\nfunction hasOwn(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\nfunction isRegExp(re) {\n    return isObject(re) && objectToString(re) === \"[object RegExp]\";\n}\nfunction isObject(arg) {\n    return typeof arg === \"object\" && arg !== null;\n}\nfunction isError(e) {\n    return isObject(e) && (objectToString(e) === \"[object Error]\" || e instanceof Error);\n}\nfunction isDate(d) {\n    return isObject(d) && objectToString(d) === \"[object Date]\";\n}\nfunction objectToString(o) {\n    return Object.prototype.toString.call(o);\n}\nfunction arrayToHash(array) {\n    const hash = {};\n    array.forEach((val) => {\n        hash[val] = true;\n    });\n    return hash;\n}\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n    const output = [];\n    for (let i = 0, l = value.length; i < l; ++i) {\n        if (hasOwn(value, String(i))) {\n            output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));\n        }\n        else {\n            output.push(\"\");\n        }\n    }\n    keys.forEach((key) => {\n        if (!key.match(/^\\d+$/)) {\n            output.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));\n        }\n    });\n    return output;\n}\nfunction formatError(value) {\n    return \"[\" + Error.prototype.toString.call(value) + \"]\";\n}\nexport function formatValue(ctx, value, recurseTimes = 0) {\n    if (ctx.customInspect &&\n        value != null &&\n        isFunction(value) &&\n        value?.inspect !== inspect &&\n        !(value?.constructor && value?.constructor.prototype === value)) {\n        if (typeof value.inspect !== \"function\" && value.toString != null) {\n            return value.toString();\n        }\n        let ret = value?.inspect(recurseTimes, ctx);\n        if (!isString(ret)) {\n            ret = formatValue(ctx, ret, recurseTimes);\n        }\n        return ret;\n    }\n    const primitive = formatPrimitive(ctx, value);\n    if (primitive) {\n        return primitive;\n    }\n    let keys = Object.keys(value);\n    const visibleKeys = arrayToHash(keys);\n    try {\n        if (ctx.showHidden && Object.getOwnPropertyNames) {\n            keys = Object.getOwnPropertyNames(value);\n        }\n    }\n    catch (e) {\n    }\n    if (isError(value) && (keys.indexOf(\"message\") >= 0 || keys.indexOf(\"description\") >= 0)) {\n        return formatError(value);\n    }\n    if (keys.length === 0) {\n        if (isFunction(ctx.stylize)) {\n            if (isFunction(value)) {\n                const name = value.name ? \": \" + value.name : \"\";\n                return ctx.stylize(\"[Function\" + name + \"]\", \"special\");\n            }\n            if (isRegExp(value)) {\n                return ctx.stylize(RegExp.prototype.toString.call(value), \"regexp\");\n            }\n            if (isDate(value)) {\n                return ctx.stylize(Date.prototype.toISOString.call(value), \"date\");\n            }\n            if (isError(value)) {\n                return formatError(value);\n            }\n        }\n        else {\n            return value;\n        }\n    }\n    let base = \"\";\n    let array = false;\n    let braces = [\"{\\n\", \"\\n}\"];\n    if (Array.isArray(value)) {\n        array = true;\n        braces = [\"[\\n\", \"\\n]\"];\n    }\n    if (isFunction(value)) {\n        const n = value.name ? \": \" + value.name : \"\";\n        base = \" [Function\" + n + \"]\";\n    }\n    if (isRegExp(value)) {\n        base = \" \" + RegExp.prototype.toString.call(value);\n    }\n    if (isDate(value)) {\n        base = \" \" + Date.prototype.toUTCString.call(value);\n    }\n    if (isError(value)) {\n        base = \" \" + formatError(value);\n    }\n    if (keys.length === 0 && (!array || value.length == 0)) {\n        return braces[0] + base + braces[1];\n    }\n    if (recurseTimes < 0) {\n        if (isRegExp(value)) {\n            return ctx.stylize(RegExp.prototype.toString.call(value), \"regexp\");\n        }\n        else {\n            return ctx.stylize(\"[Object]\", \"special\");\n        }\n    }\n    ctx.seen.push(value);\n    let output;\n    if (array) {\n        output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n    }\n    else {\n        output = keys.map((key) => {\n            return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n        });\n    }\n    ctx.seen.pop();\n    return reduceToSingleString(output, base, braces);\n}\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n    let name, str;\n    let desc = { value: void 0 };\n    try {\n        desc.value = value[key];\n    }\n    catch (e) {\n    }\n    try {\n        if (Object.getOwnPropertyDescriptor) {\n            desc = Object.getOwnPropertyDescriptor(value, key) || desc;\n        }\n    }\n    catch (e) {\n    }\n    if (desc.get) {\n        if (desc.set) {\n            str = ctx.stylize(\"[Getter/Setter]\", \"special\");\n        }\n        else {\n            str = ctx.stylize(\"[Getter]\", \"special\");\n        }\n    }\n    else {\n        if (desc.set) {\n            str = ctx.stylize(\"[Setter]\", \"special\");\n        }\n    }\n    if (!hasOwn(visibleKeys, key)) {\n        name = \"[\" + key + \"]\";\n    }\n    if (!str) {\n        if (ctx.seen.indexOf(desc.value) < 0) {\n            if (isNull(recurseTimes)) {\n                str = formatValue(ctx, desc.value, undefined);\n            }\n            else {\n                str = formatValue(ctx, desc.value, recurseTimes - 1);\n            }\n            if (str.indexOf(\"\\n\") > -1) {\n                if (array) {\n                    str = str\n                        .split(\"\\n\")\n                        .map((line) => {\n                        return \"  \" + line;\n                    })\n                        .join(\"\\n\")\n                        .substr(2);\n                }\n                else {\n                    str =\n                        \"\\n\" +\n                            str\n                                .split(\"\\n\")\n                                .map((line) => {\n                                return \"   \" + line;\n                            })\n                                .join(\"\\n\");\n                }\n            }\n        }\n        else {\n            str = ctx.stylize(\"[Circular]\", \"special\");\n        }\n    }\n    if (isUndefined(name)) {\n        if (array && key.match(/^\\d+$/)) {\n            return str;\n        }\n        name = JSON.stringify(\"\" + key);\n        if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n            name = name.substr(1, name.length - 2);\n            name = ctx.stylize(name, \"name\");\n        }\n        else {\n            name = name\n                .replace(/'/g, \"\\\\'\")\n                .replace(/\\\\\"/g, \"\\\\'\")\n                .replace(/(^\"|\"$)/g, \"'\");\n            name = ctx.stylize(name, \"string\");\n        }\n    }\n    return name + \": \" + str;\n}\nfunction formatPrimitive(ctx, value) {\n    if (isUndefined(value))\n        return ctx.stylize(\"undefined\", \"undefined\");\n    if (isString(value)) {\n        const simple = \"'\" + JSON.stringify(value).replace(/^\"|\"$/g, \"\").replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, \"\\\\'\") + \"'\";\n        return ctx.stylize(simple, \"string\");\n    }\n    if (isNumber(value))\n        return ctx.stylize(\"\" + value, \"number\");\n    if (isBoolean(value))\n        return ctx.stylize(\"\" + value, \"boolean\");\n    if (isNull(value))\n        return ctx.stylize(\"null\", \"null\");\n}\nfunction reduceToSingleString(output, base, braces) {\n    return braces[0] + (base === \"\" ? \"\" : base + \"\\n\") + \"  \" + output.join(\",\\n  \") + \" \" + braces[1];\n}\nfunction _extend(origin, add) {\n    if (!add || !isObject(add))\n        return origin;\n    const clonedOrigin = { ...origin };\n    const clonedAdd = { ...add };\n    const keys = Object.keys(add);\n    let i = keys.length;\n    while (i--) {\n        clonedOrigin[keys[i]] = clonedAdd[keys[i]];\n    }\n    return origin;\n}\nexport function formatWithOptions(inspectOptions, ...args) {\n    const ctx = {\n        seen: [],\n        stylize: stylizeNoColor,\n    };\n    if (inspectOptions != null) {\n        _extend(ctx, inspectOptions);\n    }\n    const first = args[0];\n    let a = 0;\n    let str = \"\";\n    let join = \"\";\n    if (typeof first === \"string\") {\n        if (args.length === 1) {\n            return first;\n        }\n        let tempStr;\n        let lastPos = 0;\n        for (let i = 0; i < first.length - 1; i++) {\n            if (first.charCodeAt(i) === 37) {\n                const nextChar = first.charCodeAt(++i);\n                if (a + 1 !== args.length) {\n                    switch (nextChar) {\n                        case 115: {\n                            const tempArg = args[++a];\n                            if (typeof tempArg === \"number\") {\n                                tempStr = formatPrimitive(ctx, tempArg);\n                            }\n                            else if (typeof tempArg === \"bigint\") {\n                                tempStr = formatPrimitive(ctx, tempArg);\n                            }\n                            else if (typeof tempArg !== \"object\" || tempArg === null) {\n                                tempStr = String(tempArg);\n                            }\n                            else {\n                                tempStr = inspect(tempArg, {\n                                    ...inspectOptions,\n                                    compact: 3,\n                                    colors: false,\n                                    depth: 0,\n                                });\n                            }\n                            break;\n                        }\n                        case 106:\n                            tempStr = jsonStringifyRecursive(args[++a]);\n                            break;\n                        case 100: {\n                            const tempNum = args[++a];\n                            if (typeof tempNum === \"bigint\") {\n                                tempStr = formatPrimitive(ctx, tempNum);\n                            }\n                            else if (typeof tempNum === \"symbol\") {\n                                tempStr = \"NaN\";\n                            }\n                            else {\n                                tempStr = formatPrimitive(ctx, tempNum);\n                            }\n                            break;\n                        }\n                        case 79:\n                            tempStr = inspect(args[++a], inspectOptions);\n                            break;\n                        case 111:\n                            tempStr = inspect(args[++a], {\n                                ...inspectOptions,\n                                showHidden: true,\n                                showProxy: true,\n                                depth: 4,\n                            });\n                            break;\n                        case 105: {\n                            const tempInteger = args[++a];\n                            if (typeof tempInteger === \"bigint\") {\n                                tempStr = formatPrimitive(ctx, tempInteger);\n                            }\n                            else if (typeof tempInteger === \"symbol\") {\n                                tempStr = \"NaN\";\n                            }\n                            else {\n                                tempStr = formatPrimitive(ctx, parseInt(tempStr));\n                            }\n                            break;\n                        }\n                        case 102: {\n                            const tempFloat = args[++a];\n                            if (typeof tempFloat === \"symbol\") {\n                                tempStr = \"NaN\";\n                            }\n                            else {\n                                tempStr = formatPrimitive(ctx, parseInt(tempFloat));\n                            }\n                            break;\n                        }\n                        case 99:\n                            a += 1;\n                            tempStr = \"\";\n                            break;\n                        case 37:\n                            str += first.slice(lastPos, i);\n                            lastPos = i + 1;\n                            continue;\n                        default:\n                            continue;\n                    }\n                    if (lastPos !== i - 1) {\n                        str += first.slice(lastPos, i - 1);\n                    }\n                    str += tempStr;\n                    lastPos = i + 1;\n                }\n                else if (nextChar === 37) {\n                    str += first.slice(lastPos, i);\n                    lastPos = i + 1;\n                }\n            }\n        }\n        if (lastPos !== 0) {\n            a++;\n            join = \" \";\n            if (lastPos < first.length) {\n                str += first.slice(lastPos);\n            }\n        }\n    }\n    while (a < args.length) {\n        const value = args[a];\n        str += join;\n        str += typeof value !== \"string\" ? inspect(value, inspectOptions) : value;\n        join = \" \";\n        a++;\n    }\n    return str;\n}\n","import { formatTemplate } from \"../../formatTemplate.js\";\nimport { formatWithOptions } from \"./util.inspect.polyfil.js\";\nimport { jsonStringifyRecursive } from \"./helper.jsonStringifyRecursive.js\";\nexport default {\n    getCallerStackFrame,\n    getErrorTrace,\n    getMeta,\n    transportJSON,\n    transportFormatted,\n    isBuffer,\n    isError,\n    prettyFormatLogObj,\n    prettyFormatErrorObj,\n};\nconst meta = {\n    runtime: ![typeof window, typeof document].includes(\"undefined\") ? \"Browser\" : \"Generic\",\n    browser: globalThis?.[\"navigator\"]?.userAgent,\n};\nconst pathRegex = /(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\\/[^:/]+){2,})(?::(\\d+))?(?::(\\d+))?/;\nexport function getMeta(logLevelId, logLevelName, stackDepthLevel, hideLogPositionForPerformance, name, parentNames) {\n    return Object.assign({}, meta, {\n        name,\n        parentNames,\n        date: new Date(),\n        logLevelId,\n        logLevelName,\n        path: !hideLogPositionForPerformance ? getCallerStackFrame(stackDepthLevel) : undefined,\n    });\n}\nexport function getCallerStackFrame(stackDepthLevel, error = Error()) {\n    return stackLineToStackFrame(error?.stack?.split(\"\\n\")?.filter((line) => !line.includes(\"Error: \"))?.[stackDepthLevel]);\n}\nexport function getErrorTrace(error) {\n    return error?.stack\n        ?.split(\"\\n\")\n        ?.filter((line) => !line.includes(\"Error: \"))\n        ?.reduce((result, line) => {\n        result.push(stackLineToStackFrame(line));\n        return result;\n    }, []);\n}\nfunction stackLineToStackFrame(line) {\n    const href = globalThis?.location?.origin;\n    const pathResult = {\n        fullFilePath: undefined,\n        fileName: undefined,\n        fileNameWithLine: undefined,\n        fileColumn: undefined,\n        fileLine: undefined,\n        filePath: undefined,\n        filePathWithLine: undefined,\n        method: undefined,\n    };\n    if (line != null) {\n        const match = line.match(pathRegex);\n        if (match) {\n            pathResult.filePath = match[1].replace(/\\?.*$/, \"\");\n            pathResult.fullFilePath = `${href}${pathResult.filePath}`;\n            const pathParts = pathResult.filePath.split(\"/\");\n            pathResult.fileName = pathParts[pathParts.length - 1];\n            pathResult.fileLine = match[2];\n            pathResult.fileColumn = match[3];\n            pathResult.filePathWithLine = `${pathResult.filePath}:${pathResult.fileLine}`;\n            pathResult.fileNameWithLine = `${pathResult.fileName}:${pathResult.fileLine}`;\n        }\n    }\n    return pathResult;\n}\nexport function isError(e) {\n    return e instanceof Error;\n}\nexport function prettyFormatLogObj(maskedArgs, settings) {\n    return maskedArgs.reduce((result, arg) => {\n        isError(arg) ? result.errors.push(prettyFormatErrorObj(arg, settings)) : result.args.push(arg);\n        return result;\n    }, { args: [], errors: [] });\n}\nexport function prettyFormatErrorObj(error, settings) {\n    const errorStackStr = getErrorTrace(error).map((stackFrame) => {\n        return formatTemplate(settings, settings.prettyErrorStackTemplate, { ...stackFrame }, true);\n    });\n    const placeholderValuesError = {\n        errorName: ` ${error.name} `,\n        errorMessage: Object.getOwnPropertyNames(error)\n            .reduce((result, key) => {\n            if (key !== \"stack\") {\n                result.push(error[key]);\n            }\n            return result;\n        }, [])\n            .join(\", \"),\n        errorStack: errorStackStr.join(\"\\n\"),\n    };\n    return formatTemplate(settings, settings.prettyErrorTemplate, placeholderValuesError);\n}\nexport function transportFormatted(logMetaMarkup, logArgs, logErrors, settings) {\n    const logErrorsStr = (logErrors.length > 0 && logArgs.length > 0 ? \"\\n\" : \"\") + logErrors.join(\"\\n\");\n    settings.prettyInspectOptions.colors = settings.stylePrettyLogs;\n    console.log(logMetaMarkup + formatWithOptions(settings.prettyInspectOptions, ...logArgs) + logErrorsStr);\n}\nexport function transportJSON(json) {\n    console.log(jsonStringifyRecursive(json));\n}\nexport function isBuffer(arg) {\n    return arg ? false : false;\n}\n","import { formatTemplate } from \"./formatTemplate.js\";\nimport { formatNumberAddZeros } from \"./formatNumberAddZeros.js\";\nimport { urlToObject } from \"./urlToObj.js\";\nimport Runtime from \"./runtime/nodejs/index.js\";\nexport * from \"./interfaces.js\";\nexport { Runtime };\nexport class BaseLogger {\n    constructor(settings, logObj, stackDepthLevel = 4) {\n        this.logObj = logObj;\n        this.stackDepthLevel = stackDepthLevel;\n        this.runtime = Runtime;\n        this.settings = {\n            type: settings?.type ?? \"pretty\",\n            name: settings?.name,\n            parentNames: settings?.parentNames,\n            minLevel: settings?.minLevel ?? 0,\n            argumentsArrayName: settings?.argumentsArrayName,\n            hideLogPositionForProduction: settings?.hideLogPositionForProduction ?? false,\n            prettyLogTemplate: settings?.prettyLogTemplate ??\n                \"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}\\t{{logLevelName}}\\t{{filePathWithLine}}{{nameWithDelimiterPrefix}}\\t\",\n            prettyErrorTemplate: settings?.prettyErrorTemplate ?? \"\\n{{errorName}} {{errorMessage}}\\nerror stack:\\n{{errorStack}}\",\n            prettyErrorStackTemplate: settings?.prettyErrorStackTemplate ?? \"  • {{fileName}}\\t{{method}}\\n\\t{{filePathWithLine}}\",\n            prettyErrorParentNamesSeparator: settings?.prettyErrorParentNamesSeparator ?? \":\",\n            prettyErrorLoggerNameDelimiter: settings?.prettyErrorLoggerNameDelimiter ?? \"\\t\",\n            stylePrettyLogs: settings?.stylePrettyLogs ?? true,\n            prettyLogTimeZone: settings?.prettyLogTimeZone ?? \"UTC\",\n            prettyLogStyles: settings?.prettyLogStyles ?? {\n                logLevelName: {\n                    \"*\": [\"bold\", \"black\", \"bgWhiteBright\", \"dim\"],\n                    SILLY: [\"bold\", \"white\"],\n                    TRACE: [\"bold\", \"whiteBright\"],\n                    DEBUG: [\"bold\", \"green\"],\n                    INFO: [\"bold\", \"blue\"],\n                    WARN: [\"bold\", \"yellow\"],\n                    ERROR: [\"bold\", \"red\"],\n                    FATAL: [\"bold\", \"redBright\"],\n                },\n                dateIsoStr: \"white\",\n                filePathWithLine: \"white\",\n                name: [\"white\", \"bold\"],\n                nameWithDelimiterPrefix: [\"white\", \"bold\"],\n                nameWithDelimiterSuffix: [\"white\", \"bold\"],\n                errorName: [\"bold\", \"bgRedBright\", \"whiteBright\"],\n                fileName: [\"yellow\"],\n                fileNameWithLine: \"white\",\n            },\n            prettyInspectOptions: settings?.prettyInspectOptions ?? {\n                colors: true,\n                compact: false,\n                depth: Infinity,\n            },\n            metaProperty: settings?.metaProperty ?? \"_meta\",\n            maskPlaceholder: settings?.maskPlaceholder ?? \"[***]\",\n            maskValuesOfKeys: settings?.maskValuesOfKeys ?? [\"password\"],\n            maskValuesOfKeysCaseInsensitive: settings?.maskValuesOfKeysCaseInsensitive ?? false,\n            maskValuesRegEx: settings?.maskValuesRegEx,\n            prefix: [...(settings?.prefix ?? [])],\n            attachedTransports: [...(settings?.attachedTransports ?? [])],\n            overwrite: {\n                mask: settings?.overwrite?.mask,\n                toLogObj: settings?.overwrite?.toLogObj,\n                addMeta: settings?.overwrite?.addMeta,\n                addPlaceholders: settings?.overwrite?.addPlaceholders,\n                formatMeta: settings?.overwrite?.formatMeta,\n                formatLogObj: settings?.overwrite?.formatLogObj,\n                transportFormatted: settings?.overwrite?.transportFormatted,\n                transportJSON: settings?.overwrite?.transportJSON,\n            },\n        };\n    }\n    log(logLevelId, logLevelName, ...args) {\n        if (logLevelId < this.settings.minLevel) {\n            return;\n        }\n        const logArgs = [...this.settings.prefix, ...args];\n        const maskedArgs = this.settings.overwrite?.mask != null\n            ? this.settings.overwrite?.mask(logArgs)\n            : this.settings.maskValuesOfKeys != null && this.settings.maskValuesOfKeys.length > 0\n                ? this._mask(logArgs)\n                : logArgs;\n        const thisLogObj = this.logObj != null ? this._recursiveCloneAndExecuteFunctions(this.logObj) : undefined;\n        const logObj = this.settings.overwrite?.toLogObj != null ? this.settings.overwrite?.toLogObj(maskedArgs, thisLogObj) : this._toLogObj(maskedArgs, thisLogObj);\n        const logObjWithMeta = this.settings.overwrite?.addMeta != null\n            ? this.settings.overwrite?.addMeta(logObj, logLevelId, logLevelName)\n            : this._addMetaToLogObj(logObj, logLevelId, logLevelName);\n        let logMetaMarkup;\n        let logArgsAndErrorsMarkup = undefined;\n        if (this.settings.overwrite?.formatMeta != null) {\n            logMetaMarkup = this.settings.overwrite?.formatMeta(logObjWithMeta?.[this.settings.metaProperty]);\n        }\n        if (this.settings.overwrite?.formatLogObj != null) {\n            logArgsAndErrorsMarkup = this.settings.overwrite?.formatLogObj(maskedArgs, this.settings);\n        }\n        if (this.settings.type === \"pretty\") {\n            logMetaMarkup = logMetaMarkup ?? this._prettyFormatLogObjMeta(logObjWithMeta?.[this.settings.metaProperty]);\n            logArgsAndErrorsMarkup = logArgsAndErrorsMarkup ?? this.runtime.prettyFormatLogObj(maskedArgs, this.settings);\n        }\n        if (logMetaMarkup != null && logArgsAndErrorsMarkup != null) {\n            this.settings.overwrite?.transportFormatted != null\n                ? this.settings.overwrite?.transportFormatted(logMetaMarkup, logArgsAndErrorsMarkup.args, logArgsAndErrorsMarkup.errors, this.settings)\n                : this.runtime.transportFormatted(logMetaMarkup, logArgsAndErrorsMarkup.args, logArgsAndErrorsMarkup.errors, this.settings);\n        }\n        else {\n            this.settings.overwrite?.transportJSON != null\n                ? this.settings.overwrite?.transportJSON(logObjWithMeta)\n                : this.settings.type !== \"hidden\"\n                    ? this.runtime.transportJSON(logObjWithMeta)\n                    : undefined;\n        }\n        if (this.settings.attachedTransports != null && this.settings.attachedTransports.length > 0) {\n            this.settings.attachedTransports.forEach((transportLogger) => {\n                transportLogger(logObjWithMeta);\n            });\n        }\n        return logObjWithMeta;\n    }\n    attachTransport(transportLogger) {\n        this.settings.attachedTransports.push(transportLogger);\n    }\n    getSubLogger(settings, logObj) {\n        const subLoggerSettings = {\n            ...this.settings,\n            ...settings,\n            parentNames: this.settings?.parentNames != null && this.settings?.name != null\n                ? [...this.settings.parentNames, this.settings.name]\n                : this.settings?.name != null\n                    ? [this.settings.name]\n                    : undefined,\n            prefix: [...this.settings.prefix, ...(settings?.prefix ?? [])],\n        };\n        const subLogger = new this.constructor(subLoggerSettings, logObj ?? this.logObj, this.stackDepthLevel);\n        return subLogger;\n    }\n    _mask(args) {\n        const maskValuesOfKeys = this.settings.maskValuesOfKeysCaseInsensitive !== true ? this.settings.maskValuesOfKeys : this.settings.maskValuesOfKeys.map((key) => key.toLowerCase());\n        return args?.map((arg) => {\n            return this._recursiveCloneAndMaskValuesOfKeys(arg, maskValuesOfKeys);\n        });\n    }\n    _recursiveCloneAndMaskValuesOfKeys(source, keys, seen = []) {\n        if (seen.includes(source)) {\n            return { ...source };\n        }\n        if (typeof source === \"object\" && source !== null) {\n            seen.push(source);\n        }\n        if (this.runtime.isError(source) || this.runtime.isBuffer(source)) {\n            return source;\n        }\n        else if (source instanceof Map) {\n            return new Map(source);\n        }\n        else if (source instanceof Set) {\n            return new Set(source);\n        }\n        else if (Array.isArray(source)) {\n            return source.map((item) => this._recursiveCloneAndMaskValuesOfKeys(item, keys, seen));\n        }\n        else if (source instanceof Date) {\n            return new Date(source.getTime());\n        }\n        else if (source instanceof URL) {\n            return urlToObject(source);\n        }\n        else if (source !== null && typeof source === \"object\") {\n            const baseObject = this.runtime.isError(source) ? this._cloneError(source) : Object.create(Object.getPrototypeOf(source));\n            return Object.getOwnPropertyNames(source).reduce((o, prop) => {\n                o[prop] = keys.includes(this.settings?.maskValuesOfKeysCaseInsensitive !== true ? prop : prop.toLowerCase())\n                    ? this.settings.maskPlaceholder\n                    : this._recursiveCloneAndMaskValuesOfKeys(source[prop], keys, seen);\n                return o;\n            }, baseObject);\n        }\n        else {\n            if (typeof source === \"string\") {\n                let modifiedSource = source;\n                for (const regEx of this.settings?.maskValuesRegEx || []) {\n                    modifiedSource = modifiedSource.replace(regEx, this.settings?.maskPlaceholder || \"\");\n                }\n                return modifiedSource;\n            }\n            return source;\n        }\n    }\n    _recursiveCloneAndExecuteFunctions(source, seen = []) {\n        if (this.isObjectOrArray(source) && seen.includes(source)) {\n            return this.shallowCopy(source);\n        }\n        if (this.isObjectOrArray(source)) {\n            seen.push(source);\n        }\n        if (Array.isArray(source)) {\n            return source.map((item) => this._recursiveCloneAndExecuteFunctions(item, seen));\n        }\n        else if (source instanceof Date) {\n            return new Date(source.getTime());\n        }\n        else if (this.isObject(source)) {\n            return Object.getOwnPropertyNames(source).reduce((o, prop) => {\n                const descriptor = Object.getOwnPropertyDescriptor(source, prop);\n                if (descriptor) {\n                    Object.defineProperty(o, prop, descriptor);\n                    const value = source[prop];\n                    o[prop] = typeof value === \"function\" ? value() : this._recursiveCloneAndExecuteFunctions(value, seen);\n                }\n                return o;\n            }, Object.create(Object.getPrototypeOf(source)));\n        }\n        else {\n            return source;\n        }\n    }\n    isObjectOrArray(value) {\n        return typeof value === \"object\" && value !== null;\n    }\n    isObject(value) {\n        return typeof value === \"object\" && !Array.isArray(value) && value !== null;\n    }\n    shallowCopy(source) {\n        if (Array.isArray(source)) {\n            return [...source];\n        }\n        else {\n            return { ...source };\n        }\n    }\n    _toLogObj(args, clonedLogObj = {}) {\n        args = args?.map((arg) => (this.runtime.isError(arg) ? this._toErrorObject(arg) : arg));\n        if (this.settings.argumentsArrayName == null) {\n            if (args.length === 1 && !Array.isArray(args[0]) && this.runtime.isBuffer(args[0]) !== true && !(args[0] instanceof Date)) {\n                clonedLogObj = typeof args[0] === \"object\" && args[0] != null ? { ...args[0], ...clonedLogObj } : { 0: args[0], ...clonedLogObj };\n            }\n            else {\n                clonedLogObj = { ...clonedLogObj, ...args };\n            }\n        }\n        else {\n            clonedLogObj = {\n                ...clonedLogObj,\n                [this.settings.argumentsArrayName]: args,\n            };\n        }\n        return clonedLogObj;\n    }\n    _cloneError(error) {\n        const cloned = new error.constructor();\n        Object.getOwnPropertyNames(error).forEach((key) => {\n            cloned[key] = error[key];\n        });\n        return cloned;\n    }\n    _toErrorObject(error) {\n        return {\n            nativeError: error,\n            name: error.name ?? \"Error\",\n            message: error.message,\n            stack: this.runtime.getErrorTrace(error),\n        };\n    }\n    _addMetaToLogObj(logObj, logLevelId, logLevelName) {\n        return {\n            ...logObj,\n            [this.settings.metaProperty]: this.runtime.getMeta(logLevelId, logLevelName, this.stackDepthLevel, this.settings.hideLogPositionForProduction, this.settings.name, this.settings.parentNames),\n        };\n    }\n    _prettyFormatLogObjMeta(logObjMeta) {\n        if (logObjMeta == null) {\n            return \"\";\n        }\n        let template = this.settings.prettyLogTemplate;\n        const placeholderValues = {};\n        if (template.includes(\"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}\")) {\n            template = template.replace(\"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}\", \"{{dateIsoStr}}\");\n        }\n        else {\n            if (this.settings.prettyLogTimeZone === \"UTC\") {\n                placeholderValues[\"yyyy\"] = logObjMeta?.date?.getUTCFullYear() ?? \"----\";\n                placeholderValues[\"mm\"] = formatNumberAddZeros(logObjMeta?.date?.getUTCMonth(), 2, 1);\n                placeholderValues[\"dd\"] = formatNumberAddZeros(logObjMeta?.date?.getUTCDate(), 2);\n                placeholderValues[\"hh\"] = formatNumberAddZeros(logObjMeta?.date?.getUTCHours(), 2);\n                placeholderValues[\"MM\"] = formatNumberAddZeros(logObjMeta?.date?.getUTCMinutes(), 2);\n                placeholderValues[\"ss\"] = formatNumberAddZeros(logObjMeta?.date?.getUTCSeconds(), 2);\n                placeholderValues[\"ms\"] = formatNumberAddZeros(logObjMeta?.date?.getUTCMilliseconds(), 3);\n            }\n            else {\n                placeholderValues[\"yyyy\"] = logObjMeta?.date?.getFullYear() ?? \"----\";\n                placeholderValues[\"mm\"] = formatNumberAddZeros(logObjMeta?.date?.getMonth(), 2, 1);\n                placeholderValues[\"dd\"] = formatNumberAddZeros(logObjMeta?.date?.getDate(), 2);\n                placeholderValues[\"hh\"] = formatNumberAddZeros(logObjMeta?.date?.getHours(), 2);\n                placeholderValues[\"MM\"] = formatNumberAddZeros(logObjMeta?.date?.getMinutes(), 2);\n                placeholderValues[\"ss\"] = formatNumberAddZeros(logObjMeta?.date?.getSeconds(), 2);\n                placeholderValues[\"ms\"] = formatNumberAddZeros(logObjMeta?.date?.getMilliseconds(), 3);\n            }\n        }\n        const dateInSettingsTimeZone = this.settings.prettyLogTimeZone === \"UTC\" ? logObjMeta?.date : new Date(logObjMeta?.date?.getTime() - logObjMeta?.date?.getTimezoneOffset() * 60000);\n        placeholderValues[\"rawIsoStr\"] = dateInSettingsTimeZone?.toISOString();\n        placeholderValues[\"dateIsoStr\"] = dateInSettingsTimeZone?.toISOString().replace(\"T\", \" \").replace(\"Z\", \"\");\n        placeholderValues[\"logLevelName\"] = logObjMeta?.logLevelName;\n        placeholderValues[\"fileNameWithLine\"] = logObjMeta?.path?.fileNameWithLine ?? \"\";\n        placeholderValues[\"filePathWithLine\"] = logObjMeta?.path?.filePathWithLine ?? \"\";\n        placeholderValues[\"fullFilePath\"] = logObjMeta?.path?.fullFilePath ?? \"\";\n        let parentNamesString = this.settings.parentNames?.join(this.settings.prettyErrorParentNamesSeparator);\n        parentNamesString = parentNamesString != null && logObjMeta?.name != null ? parentNamesString + this.settings.prettyErrorParentNamesSeparator : undefined;\n        placeholderValues[\"name\"] = logObjMeta?.name != null || parentNamesString != null ? (parentNamesString ?? \"\") + logObjMeta?.name ?? \"\" : \"\";\n        placeholderValues[\"nameWithDelimiterPrefix\"] =\n            placeholderValues[\"name\"].length > 0 ? this.settings.prettyErrorLoggerNameDelimiter + placeholderValues[\"name\"] : \"\";\n        placeholderValues[\"nameWithDelimiterSuffix\"] =\n            placeholderValues[\"name\"].length > 0 ? placeholderValues[\"name\"] + this.settings.prettyErrorLoggerNameDelimiter : \"\";\n        if (this.settings.overwrite?.addPlaceholders != null) {\n            this.settings.overwrite?.addPlaceholders(logObjMeta, placeholderValues);\n        }\n        return formatTemplate(this.settings, template, placeholderValues);\n    }\n}\n","import { invoke } from '@tauri-apps/api/core';\nimport { listen } from '@tauri-apps/api/event';\n\n// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar LogLevel;\n(function (LogLevel) {\n    /**\n     * The \"trace\" level.\n     *\n     * Designates very low priority, often extremely verbose, information.\n     */\n    LogLevel[LogLevel[\"Trace\"] = 1] = \"Trace\";\n    /**\n     * The \"debug\" level.\n     *\n     * Designates lower priority information.\n     */\n    LogLevel[LogLevel[\"Debug\"] = 2] = \"Debug\";\n    /**\n     * The \"info\" level.\n     *\n     * Designates useful information.\n     */\n    LogLevel[LogLevel[\"Info\"] = 3] = \"Info\";\n    /**\n     * The \"warn\" level.\n     *\n     * Designates hazardous situations.\n     */\n    LogLevel[LogLevel[\"Warn\"] = 4] = \"Warn\";\n    /**\n     * The \"error\" level.\n     *\n     * Designates very serious errors.\n     */\n    LogLevel[LogLevel[\"Error\"] = 5] = \"Error\";\n})(LogLevel || (LogLevel = {}));\nasync function log(level, message, options) {\n    const traces = new Error().stack?.split(\"\\n\").map((line) => line.split(\"@\"));\n    const filtered = traces?.filter(([name, location]) => {\n        return name.length > 0 && location !== \"[native code]\";\n    });\n    const { file, line, keyValues } = options ?? {};\n    let location = filtered?.[0]?.filter((v) => v.length > 0).join(\"@\");\n    if (location === \"Error\") {\n        location = \"webview::unknown\";\n    }\n    await invoke(\"plugin:log|log\", {\n        level,\n        message,\n        location,\n        file,\n        line,\n        keyValues,\n    });\n}\n/**\n * Logs a message at the error level.\n *\n * @param message\n *\n * # Examples\n *\n * ```js\n * import { error } from '@tauri-apps/plugin-log';\n *\n * const err_info = \"No connection\";\n * const port = 22;\n *\n * error(`Error: ${err_info} on port ${port}`);\n * ```\n */\nasync function error(message, options) {\n    await log(LogLevel.Error, message, options);\n}\n/**\n * Logs a message at the warn level.\n *\n * @param message\n *\n * # Examples\n *\n * ```js\n * import { warn } from '@tauri-apps/plugin-log';\n *\n * const warn_description = \"Invalid Input\";\n *\n * warn(`Warning! {warn_description}!`);\n * ```\n */\nasync function warn(message, options) {\n    await log(LogLevel.Warn, message, options);\n}\n/**\n * Logs a message at the info level.\n *\n * @param message\n *\n * # Examples\n *\n * ```js\n * import { info } from '@tauri-apps/plugin-log';\n *\n * const conn_info = { port: 40, speed: 3.20 };\n *\n * info(`Connected to port {conn_info.port} at {conn_info.speed} Mb/s`);\n * ```\n */\nasync function info(message, options) {\n    await log(LogLevel.Info, message, options);\n}\n/**\n * Logs a message at the debug level.\n *\n * @param message\n *\n * # Examples\n *\n * ```js\n * import { debug } from '@tauri-apps/plugin-log';\n *\n * const pos = { x: 3.234, y: -1.223 };\n *\n * debug(`New position: x: {pos.x}, y: {pos.y}`);\n * ```\n */\nasync function debug(message, options) {\n    await log(LogLevel.Debug, message, options);\n}\n/**\n * Logs a message at the trace level.\n *\n * @param message\n *\n * # Examples\n *\n * ```js\n * import { trace } from '@tauri-apps/plugin-log';\n *\n * let pos = { x: 3.234, y: -1.223 };\n *\n * trace(`Position is: x: {pos.x}, y: {pos.y}`);\n * ```\n */\nasync function trace(message, options) {\n    await log(LogLevel.Trace, message, options);\n}\n/**\n * Attaches a listener for the log, and calls the passed function for each log entry.\n * @param fn\n *\n * @returns a function to cancel the listener.\n */\nasync function attachLogger(fn) {\n    return await listen(\"log://log\", (event) => {\n        const { level } = event.payload;\n        let { message } = event.payload;\n        // Strip ANSI escape codes\n        message = message.replace(\n        // TODO: Investigate security/detect-unsafe-regex\n        // eslint-disable-next-line no-control-regex, security/detect-unsafe-regex\n        /[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g, \"\");\n        fn({ message, level });\n    });\n}\n/**\n * Attaches a listener that writes log entries to the console as they come in.\n *\n * @returns a function to cancel the listener.\n */\nasync function attachConsole() {\n    return await attachLogger(({ level, message }) => {\n        switch (level) {\n            case LogLevel.Trace:\n                console.log(message);\n                break;\n            case LogLevel.Debug:\n                console.debug(message);\n                break;\n            case LogLevel.Info:\n                console.info(message);\n                break;\n            case LogLevel.Warn:\n                console.warn(message);\n                break;\n            case LogLevel.Error:\n                console.error(message);\n                break;\n            default:\n                // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n                throw new Error(`unknown log level ${level}`);\n        }\n    });\n}\n\nexport { attachConsole, attachLogger, debug, error, info, trace, warn };\n","import SevenZip, { SevenZipModule } from \"7z-wasm\";\nimport { File } from './file'\nimport { newLogger } from '../log'\nimport { mimeTypes } from './minetype';\nimport { join } from './utils';\nconst log = newLogger(\"Zip\")\nfunction generateRandomString(length: number): string {\n    const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n    let result = '';\n    for (let i = 0; i < length; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        result += characters.charAt(randomIndex);\n    }\n    return result;\n}\nexport class _7zip {\n    public js7z: SevenZipModule = {} as any\n    public isRuning: boolean = false\n    private outCache: string = ''\n    public lastRuningCode: number | undefined = undefined\n    private ePath: string = \"/7_zip_work/extract/\"\n    private aPath: string = \"/7_zip_work/add/\"\n    private exitCallback:()=>any = ()=>{}\n    public FS = this.js7z.FS\n    static async create() {\n        var _n_7z = new this()\n        let js7z_wasm = await fetch(\"/assets/dep/7zz.wasm\")\n        if (!js7z_wasm.ok)js7z_wasm = await fetch(\"/PhiChartRender/assets/dep/7zz.wasm\")\n        _n_7z.js7z = await (SevenZip as any)({\n            print: (t: string) => { _n_7z._print(t) },\n            printErr: (t: string) => { _n_7z._printErr(t) },\n            wasmBinary: await js7z_wasm.arrayBuffer(),\n            quit:(t: number,_:any) => {_n_7z._onExit(t) }\n        })\n        _n_7z.FS = _n_7z.js7z.FS\n        _n_7z.FS.mkdir(\"/7_zip_work\")\n        _n_7z.FS.mkdir(_n_7z.ePath)\n        _n_7z.FS.mkdir(_n_7z.aPath)\n        return _n_7z\n    }\n    private _onExit(code: number) {\n        this.isRuning = false\n        this.lastRuningCode = code\n\n        if (code == 0) {\n            log.info(`7-ZIP输出：${this.outCache}`)\n        }\n        if (code == 1) {\n            log.warn(`7-ZIP产生警告：${this.outCache}`)\n        }\n        if (code == 2) {\n            log.fatal(`7-ZIP产生致命错误：${this.outCache}`)\n        }\n        if (code == 7) {\n            log.error(`7-ZIP命令行错误：${this.outCache}`)\n        }\n        if (code == 8) {\n            log.fatal(`7-ZIP没有足够的内存：${this.outCache}`)\n        }\n        log.debug(`code：${code}`)\n        this.exitCallback()\n    }\n    private _print(text: string) {\n        if (this.isRuning) {\n            this.outCache = this.outCache + text + \"\\n\"\n        }\n    }\n    private _printErr(text: string) {\n        if (this.isRuning) {\n            this.outCache = this.outCache + text + \"\\n\"\n        }\n    }\n    async callMain(args: string[]) {\n        this.outCache = \"\"\n        this.exitCallback = ()=>{}\n        this.isRuning = true\n        return await new Promise((r) => {\n            this.exitCallback = ()=>{r(this.outCache)}\n            try{\n                this.js7z.callMain(args)\n            }catch {\n                log.error(\"似乎在运行7-zip时遇到了一些问题，命令行：\",args.join(\" \"))\n            }\n        })\n    }\n    async load(src: Blob | ArrayBuffer | Uint8Array, a_name?: string) {\n        let u8array\n        a_name = generateRandomString(16)\n        let e_path = a_name\n        a_name = a_name + \"_src\"\n        if (src instanceof Blob) {\n            u8array = new Uint8Array(await src.arrayBuffer())\n        } else if (src instanceof ArrayBuffer) {\n            u8array = new Uint8Array(src)\n        } else {\n            u8array = src\n        }\n        \n        let path = join(this.ePath, e_path)\n        this.FS.writeFile(\"/\" + a_name, u8array)\n        this.FS.mkdir(path)\n        await this.callMain([\"e\", \"/\" + a_name,\"-o\"+path])\n        return {\n            extractPath: path,\n            archivePath: \"/\" + a_name\n        }\n    }\n    fileType(path: string) {\n        let f\n        try {\n            f = this.FS.stat(path)\n        } catch {\n            return 0\n        }\n        if (this.FS.isFile(f.mode)) return 1\n        if (this.FS.isDir(f.mode)) return 2\n        return 0\n    }\n    listDir(path: string) {\n        let ps = this.FS.readdir(path)\n        ps.splice(ps.indexOf(\".\"), 1)\n        ps.splice(ps.indexOf(\"..\"), 1)\n        return ps\n    }\n    listAllDir(path: string) {\n        let t = this.fileType(path)\n        let s\n        switch (t) {\n            case 0:\n                return undefined\n            case 1:\n                return path.split('/').pop()\n            case 2:\n                s = this.listDir(path)\n                let l: any = {}\n                for (let fn of s) {\n                    (l as any)[fn] = this.listAllDir(join(path, fn))\n                }\n                return l\n        }\n    }\n    async get(path: string): Promise<{ [key: string]: File | any } | undefined> {\n        let t = this.fileType(path)\n        let s\n        switch (t) {\n            case 0:\n                return undefined\n            case 1:\n                s = this.readFile(path)\n                this.FS.close\n                let f = new File(new Blob([s], {\n                    type: mimeTypes.getType(path)\n                }), path.split('/').pop())\n                return f\n            case 2:\n                s = this.listDir(path)\n                let l: any = {}\n                for (let fn of s) {\n                    (l as any)[fn] = await this.get(join(path, fn))\n                }\n                return l\n        }\n    }\n    readFile(name:string){\n        let _s = this.FS.stat(name)\n        this.FS.chmod(name,777) // <-为什么Js上的FS要有权限系统啊啊啊啊啊啊\n        let s = this.FS.open(name,\"r\",_s.mode)\n        let temp = new Uint8Array(_s.size)\n        this.FS.read(s,temp,0,_s.size,0)\n        let o = new Uint8Array(temp)\n        temp = null as any\n        this.FS.close(s)\n        return o\n    }\n    rmDir(path:string){\n        //this.FS.chmod(path,777)\n        let t = this.fileType(path)\n        let s\n        switch (t) {\n            case 0:\n                return\n            case 1:\n                this.FS.unlink(path)\n                return\n            case 2:\n                s = this.listDir(path)\n                for (let fn of s) {\n                    this.rmDir(join(path, fn))\n                }\n                return\n        }\n    }\n\n}\nexport const _7ZIP = await _7zip.create()\n\nexport class Archive {\n    public files: Map<string, File> = new Map<string, File>()\n    public name: string\n    constructor(files: File[], n: string) {\n        files.forEach((file => {\n            this.files.set(file.name, file)\n        }))\n        this.name = n\n    }\n    get(name: string): File | undefined {\n        return this.files.get(name)\n    }\n}\n\nexport async function loadZip(name: string, file: Blob | ArrayBuffer): Promise<Archive> {\n    log.info(\"加载zip文件 \" + name + \" 中...\")\n    const zip = await _7ZIP.load(file, name)\n    const filel = await _7ZIP.get(zip.extractPath)!\n    const files: { \"name\": string, \"file\": File }[] = []\n    for (let k in filel) {\n        if (!(filel[k] instanceof File)) continue\n        files.push({ \"name\": k, \"file\": filel[k] })\n    }\n    let o = []\n    for (let file of files) {\n        const f = file.file\n        await f.getBlob()\n        o.push(f)\n    }\n    try{\n        _7ZIP.rmDir(zip.extractPath)\n        _7ZIP.FS.unlink(zip.archivePath)\n    }catch{\n\n    }\n    \n    log.info(\"加载zip文件 \" + name + \" 完成\")\n    return new Archive(o, name)\n}","import FontFaceObserver from 'fontfaceobserver';\nexport const fontPath = \"assets/font/font.woff\"\nexport const fontPathPhi = \"assets/font/font_phi.woff\"\nexport const OutGameFontName = \"Font,phi\"\nexport const InGameFontName = \"phi,Font\"\nconst style =\n    `\n@font-face {\n    font-family: Font;\n    src:\n        url(\"${fontPath}2\") format(\"woff2\"),\n\n}\n@font-face {\n    font-family: phi;\n    src:\n        url(\"${fontPathPhi}2\") format(\"woff2\"),\n}\n@font-face {\n  font-display: swap;\n  font-family: 'Fluent UI Emoji Flat';\n  font-style: normal;\n  font-weight: normal;\n  src: url('assets/font/emoji.woff2') format('woff2');\n}\n\n`\nconst styleEl = document.createElement(\"style\")\nstyleEl.innerHTML = style\ndocument.head.appendChild(styleEl)\nexport const fontFaceObservernew = new FontFaceObserver(\"Font\")\nexport const loadFont = async () => { await fontFaceObservernew.load(null, 3000000) }\nawait loadFont()\nconst mFaceObservernew = new FontFaceObserver(\"Material Icons\")\nawait mFaceObservernew.load(null, 3000000)\nconst eFaceObservernew = new FontFaceObserver(\"Fluent UI Emoji Flat\")\nawait eFaceObservernew.load(null, 3000000)\n\n\n","import Chart from '../index';\nimport Judgeline from '../judgeline';\nimport EventLayer from '../eventlayer';\nimport Note from '../note';\nimport utils from './utils';\nimport { PhiEditEasing as Easing } from '../easing'\nimport { PhiEdit as utils2 } from './otherUtils'\nimport { chart_log } from './index.js';\nexport default function PhiEditChartConverter(_chart: any) {\n    let rawChart = _chart.split(\"\\n\");\n    let chart = new Chart();\n    let ___ = performance.now()\n    chart_log.info(\"加载PEC格式的铺面中\")\n\n    let chartSimple = {\n        bpm: new Array<any>(),\n        judgelines: new Array<any>(),\n        _judgelines: new Array<any>(),\n        notes: new Array<any>(),\n        notesPerLine: new Array<any>(),\n        sameTimeNoteCount: {},\n\n        pushNote: function (note: any) {\n            (this.sameTimeNoteCount as any)[utils2.floorNum(note.startTime)] = !(this.sameTimeNoteCount as any)[utils2.floorNum(note.startTime)] ? 1 : (this.sameTimeNoteCount as any)[utils2.floorNum(note.startTime)] + 1;\n            if (!(this.notesPerLine as any)[note.lineId]) (this.notesPerLine as any)[note.lineId] = [];\n            (this.notesPerLine as any)[note.lineId].push(note);\n            this.notes.push(note);\n        },\n\n        pushEventToLine: function (lineId: any, eventName: any, event: any) {\n            if (isNaN(lineId) || lineId < 0) {\n                console.warn('Invalid line id: ' + lineId + ', ignored');\n                return;\n            }\n            if (!(this._judgelines as any)[lineId]) (this._judgelines as any)[lineId] = new Judgeline({ id: lineId });\n            if ((this._judgelines as any)[lineId].eventLayers.length < 1) (this._judgelines as any)[lineId].eventLayers.push(new EventLayer());\n            if (!(this._judgelines as any)[lineId].eventLayers[0][eventName]) throw new Error('No such event type: ' + eventName);\n\n            let events = (this._judgelines as any)[lineId].eventLayers[0][eventName];\n            let lastEvent = events[events.length - 1];\n\n            if (\n                lastEvent &&\n                lastEvent.startTime == event.startTime &&\n                (\n                    (\n                        isNaN(lastEvent.endTime) &&\n                        isNaN(event.endTime)\n                    ) ||\n                    (\n                        !isNaN(lastEvent.endTime) &&\n                        !isNaN(event.endTime) &&\n                        lastEvent.endTime == event.endTime\n                    )\n                )\n            ) {\n                lastEvent.endTime = event.endTime;\n\n                if (isNaN(parseFloat(event.value))) {\n                    lastEvent.start = event.start;\n                    lastEvent.end = event.end;\n                }\n                else {\n                    lastEvent.value = event.value;\n                }\n            }\n            else {\n                events.push(event);\n            }\n        }\n    };\n\n    /*\n    chartSimple.pushNote = chartSimple.pushNote.bind(chartSimple);\n    chartSimple.pushEventToLine = chartSimple.pushEventToLine.bind(chartSimple);\n    */\n    if (!isNaN(rawChart[0])) chart.offset = parseFloat((parseFloat(rawChart.shift()) / 1000).toFixed(4)) - 0.175;\n    else return null;\n\n    rawChart.forEach((_command: any, commandIndex: any) => {\n        if (!_command) return;\n        if (_command == '') return;\n        if (_command.replace(/\\s/g, '') == '') return;\n\n        let command = _command.split(' ');\n\n        for (let commandIndex = 1; commandIndex < command.length; commandIndex++) {\n            command[commandIndex] = parseFloat(command[commandIndex]);\n        }\n\n        switch (command[0]) {\n            // bpm 列表\n            case 'bp': {\n                chartSimple.bpm.push({\n                    startBeat: command[1] || 0,\n                    bpm: command[2] || 120\n                });\n                break;\n            }\n            // note\n            case 'n1':\n                { // tap\n                    chartSimple.pushNote({\n                        type: 1,\n                        lineId: !isNaN(command[1]) ? command[1] : -1,\n                        startTime: command[2] || 0,\n                        positionX: command[3] || 0,\n                        isAbove: command[4] == 1 ? true : false,\n                        isFake: command[5] == 1 ? true : false\n                    });\n                    break;\n                }\n            case 'n2':\n                { // hold\n                    chartSimple.pushNote({\n                        type: 3,\n                        lineId: !isNaN(command[1]) ? command[1] : -1,\n                        startTime: command[2] || 0,\n                        endTime: command[3] || (command[2] || 0),\n                        positionX: command[4] || 0,\n                        isAbove: command[5] == 1 ? true : false,\n                        isFake: command[6] == 1 ? true : false\n                    });\n                    break;\n                }\n            case 'n3':\n                { // flick\n                    chartSimple.pushNote({\n                        type: 4,\n                        lineId: !isNaN(command[1]) ? command[1] : -1,\n                        startTime: command[2] || 0,\n                        positionX: command[3] || 0,\n                        isAbove: command[4] == 1 ? true : false,\n                        isFake: command[5] == 1 ? true : false\n                    });\n                    break;\n                }\n            case 'n4':\n                { // drag\n                    chartSimple.pushNote({\n                        type: 2,\n                        lineId: !isNaN(command[1]) ? command[1] : -1,\n                        startTime: command[2] || 0,\n                        positionX: command[3] || 0,\n                        isAbove: command[4] == 1 ? true : false,\n                        isFake: command[5] == 1 ? true : false\n                    });\n                    break;\n                }\n            // note 附加信息\n            case '#':\n                { // 速度\n                    chartSimple.notes[chartSimple.notes.length - 1].speed = !isNaN(command[1]) ? command[1] : 1;\n                    break;\n                }\n            case '&':\n                { // 缩放\n                    chartSimple.notes[chartSimple.notes.length - 1].xScale = !isNaN(command[1]) ? command[1] : 1;\n                    break;\n                }\n            // 判定线事件相关\n            case 'cv':\n                { // speed\n                    chartSimple.pushEventToLine(command[1], 'speed', {\n                        startTime: command[2] || 0,\n                        endTime: NaN,\n                        value: !isNaN(command[3]) ? command[3] / 7 : 1\n                    });\n                    break;\n                }\n            case 'cm':\n                { // moveX & moveY\n                    chartSimple.pushEventToLine(command[1], 'moveX', {\n                        startTime: command[2] || 0,\n                        endTime: command[3] || (command[2] || 0),\n                        start: NaN,\n                        end: command[4] / 2048 - 0.5 || 0,\n                        easingType: command[6] || 1\n                    });\n                    chartSimple.pushEventToLine(command[1], 'moveY', {\n                        startTime: command[2] || 0,\n                        endTime: command[3] || (command[2] || 0),\n                        start: NaN,\n                        end: command[5] / 1400 - 0.5 || 0,\n                        easingType: command[6] || 1\n                    });\n                    break;\n                }\n            case 'cp':\n                { // moveX & moveY（瞬时）\n                    chartSimple.pushEventToLine(command[1], 'moveX', {\n                        startTime: command[2] || 0,\n                        endTime: NaN,\n                        start: command[3] / 2048 - 0.5 || 0,\n                        end: command[3] / 2048 - 0.5 || 0,\n                        easingType: 1\n                    });\n                    chartSimple.pushEventToLine(command[1], 'moveY', {\n                        startTime: command[2] || 0,\n                        endTime: NaN,\n                        start: command[4] / 1400 - 0.5 || 0,\n                        end: command[4] / 1400 - 0.5 || 0,\n                        easingType: 1\n                    });\n                    break;\n                }\n            case 'cr':\n                { // rotate\n                    chartSimple.pushEventToLine(command[1], 'rotate', {\n                        startTime: command[2] || 0,\n                        endTime: command[3] || (command[2] || 0),\n                        start: NaN,\n                        end: command[4] || 0,\n                        easingType: command[5] || 1\n                    });\n                    break;\n                }\n            case 'cd':\n                { // rotate（瞬时）\n                    chartSimple.pushEventToLine(command[1], 'rotate', {\n                        startTime: command[2] || 0,\n                        endTime: NaN,\n                        start: command[3] || 0,\n                        end: command[3] || 0,\n                        easingType: 1\n                    });\n                    break;\n                }\n            case 'cf':\n                { // alpha\n                    chartSimple.pushEventToLine(command[1], 'alpha', {\n                        startTime: command[2] || 0,\n                        endTime: command[3] || (command[2] || 0),\n                        start: NaN,\n                        end: command[4] || 0,\n                        easingType: 1\n                    });\n                    break;\n                }\n            case 'ca':\n                { // alpha（瞬时）\n                    chartSimple.pushEventToLine(command[1], 'alpha', {\n                        startTime: command[2] || 0,\n                        endTime: NaN,\n                        start: command[3] || 0,\n                        end: command[3] || 0,\n                        easingType: 1\n                    });\n                    break;\n                }\n            default:\n                {\n                    console.warn('Unsupported command: ' + command[0] + ', ignoring.\\nAt line ' + (commandIndex + 2) + ':\\n' + command.join(' '));\n                }\n        }\n    });\n\n    if (chartSimple.bpm.length <= 0) {\n        chartSimple.bpm.push({\n            startBeat: 0,\n            endBeat: 1e4,\n            bpm: 120\n        });\n    }\n\n    chartSimple.bpm.sort((a, b) => a.startBeat - b.startBeat);\n\n    { // 将 Beat 计算为对应的时间（秒）\n        let currentBeatRealTime = 0.5; // 当前每个 Beat 的实际时长（秒）\n        let bpmChangedBeat = 0; // 当前 BPM 是在什么时候被更改的（Beat）\n        let bpmChangedTime = 0; // 当前 BPM 是在什么时候被更改的（秒）\n\n        chartSimple.bpm.forEach((bpm, index) => {\n\n            bpm.endBeat = chartSimple.bpm[index + 1] ? chartSimple.bpm[index + 1].startBeat : 1e4;\n\n            bpmChangedTime += currentBeatRealTime * (bpm.startBeat - bpmChangedBeat);\n            bpm.startTime = bpmChangedTime;\n            bpm.endTime = currentBeatRealTime * (bpm.endBeat - bpmChangedBeat);\n\n            bpmChangedBeat += (bpm.startBeat - bpmChangedBeat);\n\n            currentBeatRealTime = 60 / bpm.bpm;\n            bpm.beatTime = 60 / bpm.bpm;\n        });\n    }\n\n    // note 和 bpm 按时间排序\n    chartSimple.bpm.sort((a, b) => b.startBeat - a.startBeat);\n    for (const lineId in chartSimple.notesPerLine) {\n        chartSimple.notesPerLine[lineId].sort((a: any, b: any) => a.startTime - b.startTime);\n    }\n\n    for (const lineId in chartSimple._judgelines) {\n        let judgeline = chartSimple._judgelines[lineId];\n\n        judgeline.sortEvent();\n\n        // 事件参数补齐\n        judgeline.eventLayers[0].alpha.forEach((event: any, eventIndex: any, array: any) => {\n            if (isNaN(event.endTime)) event.endTime = eventIndex < array.length - 1 ? array[eventIndex + 1].startTime : 1e5;\n            if (isNaN(event.start)) event.start = eventIndex > 0 ? array[eventIndex - 1].end : 0;\n        });\n        judgeline.eventLayers[0].moveX.forEach((event: any, eventIndex: any, array: any) => {\n            if (isNaN(event.endTime)) event.endTime = eventIndex < array.length - 1 ? array[eventIndex + 1].startTime : 1e5;\n            if (isNaN(event.start)) event.start = eventIndex > 0 ? array[eventIndex - 1].end : 0;\n        });\n        judgeline.eventLayers[0].moveY.forEach((event: any, eventIndex: any, array: any) => {\n            if (isNaN(event.endTime)) event.endTime = eventIndex < array.length - 1 ? array[eventIndex + 1].startTime : 1e5;\n            if (isNaN(event.start)) event.start = eventIndex > 0 ? array[eventIndex - 1].end : 0;\n        });\n        judgeline.eventLayers[0].rotate.forEach((event: any, eventIndex: any, array: any) => {\n            if (isNaN(event.endTime)) event.endTime = eventIndex < array.length - 1 ? array[eventIndex + 1].startTime : 1e5;\n            if (isNaN(event.start)) event.start = eventIndex > 0 ? array[eventIndex - 1].end / (Math.PI / 180) : 0;\n\n            event.start = event.start * (Math.PI / 180);\n            event.end = event.end * (Math.PI / 180);\n        });\n        judgeline.eventLayers[0].speed.forEach((event: any, eventIndex: any, array: any) => {\n            if (isNaN(event.endTime)) event.endTime = eventIndex < array.length - 1 ? array[eventIndex + 1].startTime : 1e5;\n        });\n\n        // Alpha 事件单独进行计算\n        judgeline.eventLayers[0].alpha.forEach((event: any) => {\n            let noNoteSetsVisibleTime = true;\n\n            if (event.start == -1) event.start = -255;\n            else if (event.start == -2) event.start = -510;\n            else if (event.start < -100 && event.start >= -1000) {\n                for (let eventCountIndex = 0, eventCountLength = Math.ceil((event.endTime - event.startTime) / utils.CalcBetweenTime); eventCountIndex < eventCountLength; eventCountIndex++) {\n                    let currentTime = (event.startTime + (eventCountIndex * utils.CalcBetweenTime)) >= event.endTime ? event.endTime : (event.startTime + (eventCountIndex * utils.CalcBetweenTime));\n                    let currentEventValue = utils.valueCalculator(event, Easing, currentTime);\n                    let visibleBeat = ((currentEventValue + 100) * -1) / 10;\n\n                    if (currentEventValue >= -100) break;\n\n                    for (const note of chartSimple.notesPerLine[lineId]) {\n                        if (note.startTime < currentTime) continue;\n                        if (note.startTime > currentTime) break;\n\n                        note.visibleBeat = visibleBeat;\n                        noNoteSetsVisibleTime = false;\n                    }\n                }\n\n                event.start = noNoteSetsVisibleTime ? -255 : 0;\n            }\n\n            if (event.end == -1) event.end = -255;\n            else if (event.end == -2) event.end = -510;\n            else if (event.end < -100) event.end = noNoteSetsVisibleTime ? -255 : 0;\n\n            event.start = event.start / 255;\n            event.end = event.end / 255;\n        });\n\n        // 拆分缓动\n        for (const name in judgeline.eventLayers[0]) {\n            if (name == 'speed' || !(judgeline.eventLayers[0][name] instanceof Array)) continue;\n\n            let newEvents: any[] = [];\n            judgeline.eventLayers[0][name].forEach((event: any) => {\n                utils.calculateEventEase(event, Easing)\n                    .forEach((newEvent) => {\n                        newEvents.push(newEvent);\n                    }\n                    );\n            });\n            judgeline.eventLayers[0][name] = newEvents;\n        }\n\n        // 合并相同变化量事件\n        /*\n        for (const name in judgeline.eventLayers[0])\n        {\n            if (name != 'speed' && (judgeline.eventLayers[0][name] instanceof Array))\n            {\n                judgeline.eventLayers[0][name] = utils.arrangeSameValueEvent(judgeline.eventLayers[0][name]);\n            }\n        }\n        judgeline.eventLayers[0].speed = utils.arrangeSameSingleValueEvent(judgeline.eventLayers[0].speed);\n        */\n\n        // 计算事件真实时间\n        for (const name in judgeline.eventLayers[0]) {\n            if (!(judgeline.eventLayers[0][name] instanceof Array)) continue;\n            judgeline.eventLayers[0][name] = utils.calculateRealTime(chartSimple.bpm, judgeline.eventLayers[0][name]);\n        }\n\n        judgeline.sortEvent();\n        judgeline.calcFloorPosition();\n    };\n\n    for (const lineId in chartSimple.notesPerLine) {\n        let notes = chartSimple.notesPerLine[lineId];\n\n        // 计算 Note 高亮\n        notes.forEach((note: any) => {\n            if ((chartSimple.sameTimeNoteCount as any)[utils2.floorNum(note.startTime)] > 1) note.isMulti = true;\n        });\n\n        notes = utils2.calculateRealVisibleTime(chartSimple.bpm, notes);\n        notes = utils.calculateRealTime(chartSimple.bpm, notes);\n        notes.sort((a: any, b: any) => a.startTime - b.startTime);\n\n        notes.forEach((note: any, noteIndex: any) => {\n            let judgeline = chartSimple._judgelines[note.lineId];\n\n            if (!judgeline) {\n                console.warn('Judgeline ' + note.lineId + ' doesn\\'t exist, ignoring.');\n                return;\n            }\n\n            {  // 计算 Note 的 floorPosition\n                let noteStartSpeedEvent = judgeline.getFloorPosition(note.startTime);\n                note.floorPosition = noteStartSpeedEvent ? noteStartSpeedEvent.floorPosition + noteStartSpeedEvent.value * (note.startTime - noteStartSpeedEvent.startTime) : 0;\n\n                if (note.type == 3) {\n                    let noteEndSpeedEvent = judgeline.getFloorPosition(note.endTime);\n                    note.holdLength = (noteEndSpeedEvent ? noteEndSpeedEvent.floorPosition + noteEndSpeedEvent.value * (note.endTime - noteEndSpeedEvent.startTime) : 0) - note.floorPosition;\n                }\n                else {\n                    note.holdLength = 0;\n                }\n            }\n\n            // 推送 Note\n            chart.notes.push(new Note({\n                id: noteIndex,\n                type: note.type,\n                time: note.startTime,\n                holdTime: note.endTime - note.startTime,\n                speed: note.speed,\n                isAbove: note.isAbove,\n                isMulti: note.isMulti,\n                isFake: note.isFake,\n                positionX: note.positionX * 9 / 1024,\n                floorPosition: note.floorPosition,\n                holdLength: note.holdLength,\n                xScale: note.xScale,\n                visibleTime: note.visibleTime,\n                judgeline: judgeline\n            }));\n        });\n    }\n\n    for (const lineId in chartSimple._judgelines) {\n        chart.judgelines.push(chartSimple._judgelines[lineId]);\n    }\n\n    chart.judgelines.sort((a: any, b: any) => a.id - b.id);\n    chart.notes.sort((a: any, b: any) => a.time - b.time);\n\n    chart.bpmList = utils.calculateHoldBetween(chartSimple.bpm);\n    chart_log.info(\"铺面加载完成\", \"用时\", (performance.now() - ___).toFixed(0) + \"ms\", \"总计note:\", chart.notes.length, \"个\", \"判定线\", chart.judgelines.length, \"条\")\n    return chart;\n}","\n/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nvar isNothing_1      = isNothing;\nvar isObject_1       = isObject;\nvar toArray_1        = toArray;\nvar repeat_1         = repeat;\nvar isNegativeZero_1 = isNegativeZero;\nvar extend_1         = extend;\n\nvar common = {\n\tisNothing: isNothing_1,\n\tisObject: isObject_1,\n\ttoArray: toArray_1,\n\trepeat: repeat_1,\n\tisNegativeZero: isNegativeZero_1,\n\textend: extend_1\n};\n\n// YAML error class. http://stackoverflow.com/questions/8458984\n\n\nfunction formatError(exception, compact) {\n  var where = '', message = exception.reason || '(unknown reason)';\n\n  if (!exception.mark) return message;\n\n  if (exception.mark.name) {\n    where += 'in \"' + exception.mark.name + '\" ';\n  }\n\n  where += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n\n  if (!compact && exception.mark.snippet) {\n    where += '\\n\\n' + exception.mark.snippet;\n  }\n\n  return message + ' ' + where;\n}\n\n\nfunction YAMLException$1(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = formatError(this, false);\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException$1.prototype = Object.create(Error.prototype);\nYAMLException$1.prototype.constructor = YAMLException$1;\n\n\nYAMLException$1.prototype.toString = function toString(compact) {\n  return this.name + ': ' + formatError(this, compact);\n};\n\n\nvar exception = YAMLException$1;\n\n// get snippet for a single line, respecting maxLength\nfunction getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n  var head = '';\n  var tail = '';\n  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n\n  if (position - lineStart > maxHalfLength) {\n    head = ' ... ';\n    lineStart = position - maxHalfLength + head.length;\n  }\n\n  if (lineEnd - position > maxHalfLength) {\n    tail = ' ...';\n    lineEnd = position + maxHalfLength - tail.length;\n  }\n\n  return {\n    str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '→') + tail,\n    pos: position - lineStart + head.length // relative position\n  };\n}\n\n\nfunction padStart(string, max) {\n  return common.repeat(' ', max - string.length) + string;\n}\n\n\nfunction makeSnippet(mark, options) {\n  options = Object.create(options || null);\n\n  if (!mark.buffer) return null;\n\n  if (!options.maxLength) options.maxLength = 79;\n  if (typeof options.indent      !== 'number') options.indent      = 1;\n  if (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n  if (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n\n  var re = /\\r?\\n|\\r|\\0/g;\n  var lineStarts = [ 0 ];\n  var lineEnds = [];\n  var match;\n  var foundLineNo = -1;\n\n  while ((match = re.exec(mark.buffer))) {\n    lineEnds.push(match.index);\n    lineStarts.push(match.index + match[0].length);\n\n    if (mark.position <= match.index && foundLineNo < 0) {\n      foundLineNo = lineStarts.length - 2;\n    }\n  }\n\n  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n\n  var result = '', i, line;\n  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n\n  for (i = 1; i <= options.linesBefore; i++) {\n    if (foundLineNo - i < 0) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo - i],\n      lineEnds[foundLineNo - i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n      maxLineLength\n    );\n    result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n' + result;\n  }\n\n  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n  result += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n    ' | ' + line.str + '\\n';\n  result += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n\n  for (i = 1; i <= options.linesAfter; i++) {\n    if (foundLineNo + i >= lineEnds.length) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo + i],\n      lineEnds[foundLineNo + i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n      maxLineLength\n    );\n    result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n';\n  }\n\n  return result.replace(/\\n$/, '');\n}\n\n\nvar snippet = makeSnippet;\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'multi',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'representName',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type$1(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.options       = options; // keep original options in case user wants to extend this type later\n  this.tag           = tag;\n  this.kind          = options['kind']          || null;\n  this.resolve       = options['resolve']       || function () { return true; };\n  this.construct     = options['construct']     || function (data) { return data; };\n  this.instanceOf    = options['instanceOf']    || null;\n  this.predicate     = options['predicate']     || null;\n  this.represent     = options['represent']     || null;\n  this.representName = options['representName'] || null;\n  this.defaultStyle  = options['defaultStyle']  || null;\n  this.multi         = options['multi']         || false;\n  this.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nvar type = Type$1;\n\n/*eslint-disable max-len*/\n\n\n\n\n\nfunction compileList(schema, name) {\n  var result = [];\n\n  schema[name].forEach(function (currentType) {\n    var newIndex = result.length;\n\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag &&\n          previousType.kind === currentType.kind &&\n          previousType.multi === currentType.multi) {\n\n        newIndex = previousIndex;\n      }\n    });\n\n    result[newIndex] = currentType;\n  });\n\n  return result;\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {},\n        multi: {\n          scalar: [],\n          sequence: [],\n          mapping: [],\n          fallback: []\n        }\n      }, index, length;\n\n  function collectType(type) {\n    if (type.multi) {\n      result.multi[type.kind].push(type);\n      result.multi['fallback'].push(type);\n    } else {\n      result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n    }\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema$1(definition) {\n  return this.extend(definition);\n}\n\n\nSchema$1.prototype.extend = function extend(definition) {\n  var implicit = [];\n  var explicit = [];\n\n  if (definition instanceof type) {\n    // Schema.extend(type)\n    explicit.push(definition);\n\n  } else if (Array.isArray(definition)) {\n    // Schema.extend([ type1, type2, ... ])\n    explicit = explicit.concat(definition);\n\n  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n    // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n    if (definition.implicit) implicit = implicit.concat(definition.implicit);\n    if (definition.explicit) explicit = explicit.concat(definition.explicit);\n\n  } else {\n    throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n      'or a schema definition ({ implicit: [...], explicit: [...] })');\n  }\n\n  implicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n\n    if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n      throw new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n\n    if (type$1.multi) {\n      throw new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n    }\n  });\n\n  explicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n  });\n\n  var result = Object.create(Schema$1.prototype);\n\n  result.implicit = (this.implicit || []).concat(implicit);\n  result.explicit = (this.explicit || []).concat(explicit);\n\n  result.compiledImplicit = compileList(result, 'implicit');\n  result.compiledExplicit = compileList(result, 'explicit');\n  result.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n\n  return result;\n};\n\n\nvar schema = Schema$1;\n\nvar str = new type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n\nvar seq = new type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n\nvar map = new type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n\nvar failsafe = new schema({\n  explicit: [\n    str,\n    seq,\n    map\n  ]\n});\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nvar _null = new type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; },\n    empty:     function () { return '';     }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nvar bool = new type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'o') {\n      // base 8\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isOctCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n  }\n\n  // base 10 (except 0)\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  return true;\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch;\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n    if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nvar int = new type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nvar float = new type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n\nvar json = failsafe.extend({\n  implicit: [\n    _null,\n    bool,\n    int,\n    float\n  ]\n});\n\nvar core = json;\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nvar timestamp = new type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nvar merge = new type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n\n/*eslint-disable no-bitwise*/\n\n\n\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(obj) {\n  return Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n}\n\nvar binary = new type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n\nvar _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\nvar _toString$2       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString$2.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty$3.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nvar omap = new type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n\nvar _toString$1 = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString$1.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nvar pairs = new type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n\nvar _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty$2.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nvar set = new type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n\nvar _default = core.extend({\n  implicit: [\n    timestamp,\n    merge\n  ],\n  explicit: [\n    binary,\n    omap,\n    pairs,\n    set\n  ]\n});\n\n/*eslint-disable max-len,no-use-before-define*/\n\n\n\n\n\n\n\nvar _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State$1(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || _default;\n  this.onWarning = options['onWarning'] || null;\n  // (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n  // if such documents have no explicit %YAML directive\n  this.legacy    = options['legacy']    || false;\n\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  // position of first leading tab in the current line,\n  // used to make sure there are no tabs in the indentation\n  this.firstTabInLine = -1;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  var mark = {\n    name:     state.filename,\n    buffer:   state.input.slice(0, -1), // omit trailing \\0\n    position: state.position,\n    line:     state.line,\n    column:   state.position - state.lineStart\n  };\n\n  mark.snippet = snippet(mark);\n\n  return new exception(message, mark);\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    try {\n      prefix = decodeURIComponent(prefix);\n    } catch (err) {\n      throwError(state, 'tag prefix is malformed: ' + prefix);\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty$1.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n  startLine, startLineStart, startPos) {\n\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n        _hasOwnProperty$1.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.lineStart = startLineStart || state.lineStart;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n\n    // used for this specific key only because Object.defineProperty is slow\n    if (keyNode === '__proto__') {\n      Object.defineProperty(_result, keyNode, {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: valueNode\n      });\n    } else {\n      _result[keyNode] = valueNode;\n    }\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n  state.firstTabInLine = -1;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      if (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n        state.firstTabInLine = state.position;\n      }\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _lineStart,\n      _pos,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = Object.create(null),\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    } else if (ch === 0x2C/* , */) {\n      // \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n      throwError(state, \"expected the node content, but found ','\");\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line; // Save the current line.\n    _lineStart = state.lineStart;\n    _pos = state.position;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _keyLine,\n      _keyLineStart,\n      _keyPos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = Object.create(null),\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (!atExplicitKey && state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else {\n      _keyLine = state.line;\n      _keyLineStart = state.lineStart;\n      _keyPos = state.position;\n\n      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n        // Neither implicit nor explicit notation.\n        // Reading is done. Go to the epilogue.\n        break;\n      }\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (atExplicitKey) {\n        _keyLine = state.line;\n        _keyLineStart = state.lineStart;\n        _keyPos = state.position;\n      }\n\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  try {\n    tagName = decodeURIComponent(tagName);\n  } catch (err) {\n    throwError(state, 'tag name is malformed: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      typeList,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag === null) {\n    if (state.anchor !== null) {\n      state.anchorMap[state.anchor] = state.result;\n    }\n\n  } else if (state.tag === '?') {\n    // Implicit resolving is not allowed for non-scalar types, and '?'\n    // non-specific tag is only automatically assigned to plain scalars.\n    //\n    // We only need to check kind conformity in case user explicitly assigns '?'\n    // tag, for example like this: \"!<?> [0]\"\n    //\n    if (state.result !== null && state.kind !== 'scalar') {\n      throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n    }\n\n    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n      type = state.implicitTypes[typeIndex];\n\n      if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        state.result = type.construct(state.result);\n        state.tag = type.tag;\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n        break;\n      }\n    }\n  } else if (state.tag !== '!') {\n    if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n    } else {\n      // looking for multi type\n      type = null;\n      typeList = state.typeMap.multi[state.kind || 'fallback'];\n\n      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n          type = typeList[typeIndex];\n          break;\n        }\n      }\n    }\n\n    if (!type) {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n\n    if (state.result !== null && type.kind !== state.kind) {\n      throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n    }\n\n    if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n      throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n    } else {\n      state.result = type.construct(state.result, state.tag);\n      if (state.anchor !== null) {\n        state.anchorMap[state.anchor] = state.result;\n      }\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = Object.create(null);\n  state.anchorMap = Object.create(null);\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State$1(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll$1(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load$1(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new exception('expected a single document in the stream, but found more');\n}\n\n\nvar loadAll_1 = loadAll$1;\nvar load_1    = load$1;\n\nvar loader = {\n\tloadAll: loadAll_1,\n\tload: load_1\n};\n\n/*eslint-disable no-use-before-define*/\n\n\n\n\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_BOM                  = 0xFEFF;\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nvar DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\n\nvar QUOTING_TYPE_SINGLE = 1,\n    QUOTING_TYPE_DOUBLE = 2;\n\nfunction State(options) {\n  this.schema        = options['schema'] || _default;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n  this.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n  this.forceQuotes   = options['forceQuotes'] || false;\n  this.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isn’t mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// Including s-white (for some reason, examples doesn't match specs in this aspect)\n// ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\nfunction isNsCharOrWhitespace(c) {\n  return isPrintable(c)\n    && c !== CHAR_BOM\n    // - b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// [127]  ns-plain-safe(c) ::= c = flow-out  ⇒ ns-plain-safe-out\n//                             c = flow-in   ⇒ ns-plain-safe-in\n//                             c = block-key ⇒ ns-plain-safe-out\n//                             c = flow-key  ⇒ ns-plain-safe-in\n// [128] ns-plain-safe-out ::= ns-char\n// [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n// [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - “:” - “#” )\n//                            | ( /* An ns-char preceding */ “#” )\n//                            | ( “:” /* Followed by an ns-plain-safe(c) */ )\nfunction isPlainSafe(c, prev, inblock) {\n  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n  return (\n    // ns-plain-safe\n    inblock ? // c = flow-in\n      cIsNsCharOrWhitespace\n      : cIsNsCharOrWhitespace\n        // - c-flow-indicator\n        && c !== CHAR_COMMA\n        && c !== CHAR_LEFT_SQUARE_BRACKET\n        && c !== CHAR_RIGHT_SQUARE_BRACKET\n        && c !== CHAR_LEFT_CURLY_BRACKET\n        && c !== CHAR_RIGHT_CURLY_BRACKET\n  )\n    // ns-plain-char\n    && c !== CHAR_SHARP // false on '#'\n    && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n    || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n    || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  // No support of ( ( “?” | “:” | “-” ) /* Followed by an ns-plain-safe(c)) */ ) part\n  return isPrintable(c) && c !== CHAR_BOM\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // “-” | “?” | “:” | “,” | “[” | “]” | “{” | “}”\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | “#” | “&” | “*” | “!” | “|” | “=” | “>” | “'” | “\"”\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | “%” | “@” | “`”)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Simplified test for values allowed as the last character in plain style.\nfunction isPlainSafeLast(c) {\n  // just not whitespace or colon, it will be checked to be plain character later\n  return !isWhitespace(c) && c !== CHAR_COLON;\n}\n\n// Same as 'string'.codePointAt(pos), but works in older browsers.\nfunction codePointAt(string, pos) {\n  var first = string.charCodeAt(pos), second;\n  if (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n    second = string.charCodeAt(pos + 1);\n    if (second >= 0xDC00 && second <= 0xDFFF) {\n      // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n    }\n  }\n  return first;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n  testAmbiguousType, quotingType, forceQuotes, inblock) {\n\n  var i;\n  var char = 0;\n  var prevChar = null;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(codePointAt(string, 0))\n          && isPlainSafeLast(codePointAt(string, string.length - 1));\n\n  if (singleLineOnly || forceQuotes) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    if (plain && !forceQuotes && !testAmbiguousType(string)) {\n      return STYLE_PLAIN;\n    }\n    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  if (!forceQuotes) {\n    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n  }\n  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//    • No ending newline => unaffected; already using strip \"-\" chomping.\n//    • Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey, inblock) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n    }\n    if (!state.noCompatMode) {\n      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n        return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n      }\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth ≤ 40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n      testAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string) + '\"';\n      default:\n        throw new exception('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines—\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char = 0;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n    char = codePointAt(string, i);\n    escapeSeq = ESCAPE_SEQUENCES[char];\n\n    if (!escapeSeq && isPrintable(char)) {\n      result += string[i];\n      if (char >= 0x10000) result += string[i + 1];\n    } else {\n      result += escapeSeq || encodeHex(char);\n    }\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level, value, false, false) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level, null, false, false))) {\n\n      if (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level + 1, value, true, true, false, true) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level + 1, null, true, true, false, true))) {\n\n      if (!compact || _result !== '') {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (_result !== '') pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new exception('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || _result !== '') {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      if (explicit) {\n        if (type.multi && type.representName) {\n          state.tag = type.representName(object);\n        } else {\n          state.tag = type.tag;\n        }\n      } else {\n        state.tag = '?';\n      }\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey, isblockseq) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n  var inblock = block;\n  var tagStr;\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      if (block && (state.dump.length !== 0)) {\n        if (state.noArrayIndent && !isblockseq && level > 0) {\n          writeBlockSequence(state, level - 1, state.dump, compact);\n        } else {\n          writeBlockSequence(state, level, state.dump, compact);\n        }\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey, inblock);\n      }\n    } else if (type === '[object Undefined]') {\n      return false;\n    } else {\n      if (state.skipInvalid) return false;\n      throw new exception('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      // Need to encode all characters except those allowed by the spec:\n      //\n      // [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n      // [36] ns-hex-digit    ::=  ns-dec-digit\n      //                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n      // [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n      // [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | “-”\n      // [39] ns-uri-char     ::=  “%” ns-hex-digit ns-hex-digit | ns-word-char | “#”\n      //                         | “;” | “/” | “?” | “:” | “@” | “&” | “=” | “+” | “$” | “,”\n      //                         | “_” | “.” | “!” | “~” | “*” | “'” | “(” | “)” | “[” | “]”\n      //\n      // Also need to encode '!' because it has special meaning (end of tag prefix).\n      //\n      tagStr = encodeURI(\n        state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n      ).replace(/!/g, '%21');\n\n      if (state.tag[0] === '!') {\n        tagStr = '!' + tagStr;\n      } else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n        tagStr = '!!' + tagStr.slice(18);\n      } else {\n        tagStr = '!<' + tagStr + '>';\n      }\n\n      state.dump = tagStr + ' ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump$1(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  var value = input;\n\n  if (state.replacer) {\n    value = state.replacer.call({ '': value }, '', value);\n  }\n\n  if (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nvar dump_1 = dump$1;\n\nvar dumper = {\n\tdump: dump_1\n};\n\nfunction renamed(from, to) {\n  return function () {\n    throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n      'Use yaml.' + to + ' instead, which is now safe by default.');\n  };\n}\n\n\nvar Type                = type;\nvar Schema              = schema;\nvar FAILSAFE_SCHEMA     = failsafe;\nvar JSON_SCHEMA         = json;\nvar CORE_SCHEMA         = core;\nvar DEFAULT_SCHEMA      = _default;\nvar load                = loader.load;\nvar loadAll             = loader.loadAll;\nvar dump                = dumper.dump;\nvar YAMLException       = exception;\n\n// Re-export all types in case user wants to create custom schema\nvar types = {\n  binary:    binary,\n  float:     float,\n  map:       map,\n  null:      _null,\n  pairs:     pairs,\n  set:       set,\n  timestamp: timestamp,\n  bool:      bool,\n  int:       int,\n  merge:     merge,\n  omap:      omap,\n  seq:       seq,\n  str:       str\n};\n\n// Removed functions from JS-YAML 3.0.x\nvar safeLoad            = renamed('safeLoad', 'load');\nvar safeLoadAll         = renamed('safeLoadAll', 'loadAll');\nvar safeDump            = renamed('safeDump', 'dump');\n\nvar jsYaml = {\n\tType: Type,\n\tSchema: Schema,\n\tFAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\tJSON_SCHEMA: JSON_SCHEMA,\n\tCORE_SCHEMA: CORE_SCHEMA,\n\tDEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\tload: load,\n\tloadAll: loadAll,\n\tdump: dump,\n\tYAMLException: YAMLException,\n\ttypes: types,\n\tsafeLoad: safeLoad,\n\tsafeLoadAll: safeLoadAll,\n\tsafeDump: safeDump\n};\n\nexport default jsYaml;\nexport { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };\n","export default \"precision mediump float;\\n\\nvarying vec2 vTextureCoord;\\nuniform sampler2D uTexture;\\nuniform float sampleCount; // %3% int 1..64\\nuniform float power; // %0.01%\\n\\nvoid main(){\\n    vec3 sum;\\n    vec3 color = vec3(0.0);\\n    vec2 offset = (vTextureCoord - vec2(0.5)) * vec2(1.0, -1.0);\\n    int sample_count = int(sampleCount);\\n    float spread = power;\\n    for(int i = 0; i < 64; i++){\\n        if (i >= sample_count) break;\\n        float t = 2.0 * float(i) / float(sample_count-1); // range 0.0->2.0\\n        vec3 slice = vec3(1.0-t, 1.0 - abs(t - 1.0), t - 1.0);\\n        slice = max(slice, 0.0);\\n        sum += slice;\\n        vec2 slice_offset = (t-1.0) * spread * offset;\\n        color += slice * texture2D(uTexture, vTextureCoord + slice_offset).rgb;\\n    }\\n    color /= sum;\\n    gl_FragColor = vec4(color, 1.0);\\n}\\n\"","export default \"precision mediump float;\\n\\nuniform float size; // %10.0%\\nuniform vec2 screenSize;\\nuniform sampler2D uTexture;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main() {\\n    vec2 center = vec2(0.5, 0.5);\\n    vec3 color = texture2D(uTexture, vTextureCoord).rgb;\\n    float size_new = size / 1.1;\\n    float totalBlurFactor = 0.0;\\n    const int numSamples = 8;\\n\\n    for (int i = 0; i < numSamples; i++) {\\n        float angle = float(i) * 6.28 / float(numSamples);\\n        vec2 offset = vec2(cos(angle), sin(angle)) * size_new;\\n\\n        vec2 sampleUV = vTextureCoord + offset / screenSize;\\n        vec3 sampleColor = texture2D(uTexture, sampleUV).rgb;\\n\\n        float distance = length(offset) * screenSize.x;\\n        float blurFactor = smoothstep(size_new-1.0, size_new+1.0, distance);\\n\\n        color += sampleColor * blurFactor;\\n\\n        totalBlurFactor += blurFactor;\\n    }\\n\\n    color /= totalBlurFactor;\\n\\n    gl_FragColor = vec4(color, 1.0);\\n}\\n\"","export default \"precision mediump float;\\n\\nvarying lowp vec2 vTextureCoord;\\nuniform vec2 screenSize;\\nuniform sampler2D uTexture;\\n\\nuniform float power; // %-0.1%\\n\\nvoid main() {\\n  vec2 p = vec2(vTextureCoord.x, vTextureCoord.y * screenSize.y / screenSize.x);\\n  float aspect = screenSize.x / screenSize.y;\\n  vec2 m = vec2(0.5, 0.5 / aspect);\\n  vec2 d = p - m;\\n  float r = sqrt(dot(d, d));\\n\\n  float new_power = (2.0 * 3.141592 / (2.0 * sqrt(dot(m, m)))) * power;\\n\\n  float bind = new_power > 0.0? sqrt(dot(m, m)): (aspect < 1.0? m.x: m.y);\\n\\n  vec2 nuv;\\n  if (new_power > 0.0)\\n    nuv = m + normalize(d) * tan(r * new_power) * bind / tan(bind * new_power);\\n  else\\n    nuv = m + normalize(d) * atan(r * -new_power * 10.0) * bind / atan(-new_power * bind * 10.0);\\n\\n  gl_FragColor = texture2D(uTexture, vec2(nuv.x, nuv.y * aspect));\\n}\\n\"","export default \"precision highp float;\\n\\nvarying lowp vec2 vTextureCoord;\\n\\nuniform sampler2D uTexture;\\nuniform float time;\\n\\nuniform float power; // %0.03%\\nuniform float rate; // %0.6%\\nuniform float speed; // %5.0%\\nuniform float blockCount; // %30.5%\\nuniform float colorRate; // %0.01%\\n\\nfloat my_trunc(float x) {\\n  return x < 0.0 ? -floor(-x) : floor(x);\\n}\\n\\nfloat random(float seed) {\\n  return fract(543.2543 * sin(dot(vec2(seed, seed), vec2(3525.46, -54.3415))));\\n}\\n\\nbool isnan( float val )\\n{\\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\\n}\\nvoid main() {\\n  float newpower = power;\\n  if (isnan(newpower)){\\n    newpower = 0.03;\\n  }\\n  float enable_shift = float(random(my_trunc(time * speed)) < rate);\\n\\n  vec2 fixed_uv = vTextureCoord;\\n  fixed_uv.x += (random((my_trunc(vTextureCoord.y * blockCount) / blockCount) + time) - 0.5) * newpower * enable_shift;\\n\\n  vec4 pixel_color = texture2D(uTexture, fixed_uv);\\n  pixel_color.r = mix(\\n    pixel_color.r,\\n    texture2D(uTexture, fixed_uv + vec2(colorRate, 0.0)).r,\\n    enable_shift\\n  );\\n  pixel_color.b = mix(\\n    pixel_color.b,\\n    texture2D(uTexture, fixed_uv + vec2(-colorRate, 0.0)).b,\\n    enable_shift\\n  );\\n\\n  gl_FragColor = pixel_color;\\n}\\n\""],"file":"o.O.js"}